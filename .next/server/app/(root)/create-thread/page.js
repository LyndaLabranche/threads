(()=>{var e={};e.id=9572,e.ids=[9572],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},10467:e=>{"use strict";e.exports=require("next/dist/compiled/@vercel/og/index.node.js")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},53762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>p,pages:()=>u,routeModule:()=>x,tree:()=>l});var a=r(73137),s=r(54647),o=r(4183),n=r.n(o),i=r(71775),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let c=a.AppPageRouteModule,l=["",{children:["(root)",{children:["create-thread",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54597)),"C:\\Users\\lynda\\OneDrive\\Desktop\\GitHub2_Projects\\threads\\app\\(root)\\create-thread\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83537)),"C:\\Users\\lynda\\OneDrive\\Desktop\\GitHub2_Projects\\threads\\app\\(root)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\lynda\\OneDrive\\Desktop\\GitHub2_Projects\\threads\\app\\(root)\\create-thread\\page.tsx"],p="/(root)/create-thread/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new c({definition:{kind:s.x.APP_PAGE,page:"/(root)/create-thread/page",pathname:"/create-thread",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},87418:(e,t,r)=>{let a={"78e111e9dc41efac987bd5e8ac51b19043c9068a":()=>Promise.resolve().then(r.bind(r,43073)).then(e=>e.createThread),"38d2d7a0a35de985e321f749280c69191b8c2814":()=>Promise.resolve().then(r.bind(r,43073)).then(e=>e.fetchPosts),"39784508112122b2d6fe16b8d277c4cb71a3d20d":()=>Promise.resolve().then(r.bind(r,43073)).then(e=>e.fetchThreadById),e5fb2a651b5b7a205c654d5be1a786f5e317b9d1:()=>Promise.resolve().then(r.bind(r,43073)).then(e=>e.addCommentToThread)};async function s(e,...t){let r=await a[e]();return r.apply(null,t)}e.exports={"78e111e9dc41efac987bd5e8ac51b19043c9068a":s.bind(null,"78e111e9dc41efac987bd5e8ac51b19043c9068a"),"38d2d7a0a35de985e321f749280c69191b8c2814":s.bind(null,"38d2d7a0a35de985e321f749280c69191b8c2814"),"39784508112122b2d6fe16b8d277c4cb71a3d20d":s.bind(null,"39784508112122b2d6fe16b8d277c4cb71a3d20d"),e5fb2a651b5b7a205c654d5be1a786f5e317b9d1:s.bind(null,"e5fb2a651b5b7a205c654d5be1a786f5e317b9d1")}},63706:(e,t,r)=>{Promise.resolve().then(r.bind(r,18149)),Promise.resolve().then(r.bind(r,16373)),Promise.resolve().then(r.bind(r,52990)),Promise.resolve().then(r.bind(r,84102)),Promise.resolve().then(r.bind(r,54390)),Promise.resolve().then(r.t.bind(r,42796,23))},18149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(60080),s=r(66558),o=r(68384),n=r(60806),i=r(83894),d=r(76466),c=r(21510);r(4047);var l=r(57114),u=r(74233);let p=function({userId:e}){let t=(0,l.useRouter)(),r=(0,l.usePathname)(),p=(0,s.cI)({resolver:(0,i.F)(c.A),defaultValues:{thread:"",accountId:e}}),h=async a=>{await (0,u.gK)({text:a.thread,author:e,communityId:null,path:r}),t.push("/")};return a.jsx(n.l0,{...p,children:(0,a.jsxs)("form",{onSubmit:p.handleSubmit(h),className:"flex flex-col justify-start gap-10",children:[a.jsx(n.Wi,{control:p.control,name:"thread",render:({field:e})=>(0,a.jsxs)(n.xJ,{className:"flex w-full flex-col gap-3",children:[a.jsx(n.lX,{className:"text-base-semibold text-light-2",children:"Content"}),a.jsx(n.NI,{className:"no-focus border border-dark-4 bg-dark-3 text-light-1",children:a.jsx(d.g,{rows:15,...e})}),a.jsx(n.zG,{})]})}),a.jsx(o.z,{type:"submit",className:"bg-primary-500",children:"Post Thread"})]})})}},54597:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(48144),s=r(17536);let o=(0,s.createProxy)(String.raw`C:\Users\lynda\OneDrive\Desktop\GitHub2_Projects\threads\components\forms\PostThread.tsx`),{__esModule:n,$$typeof:i}=o,d=o.default;var c=r(89822),l=r(98620),u=r(6465);async function p(){let e=await (0,l.ar)();if(!e)return null;let t=await (0,c.fetchUser)(e.id);return t?.onboarded||(0,u.redirect)("/onboarding"),(0,a.jsxs)(a.Fragment,{children:[a.jsx("h1",{className:"head-text",children:"Create Threads"}),a.jsx(d,{userId:t._id})]})}let h=p},43073:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addCommentToThread:()=>u,createThread:()=>d,fetchPosts:()=>c,fetchThreadById:()=>l});var a=r(57016),s=r(20738),o=r(74975),n=r(9245),i=r(27977);async function d({text:e,author:t,communityId:r,path:a}){try{(0,i.connectToDB)();let r=await o.default.create({text:e,author:t,community:null});await n.default.findByIdAndUpdate(t,{$push:{threads:r._id}}),(0,s.revalidatePath)(a)}catch(e){throw Error(`Error creating thread: ${e.message}`)}}async function c(e=1,t=20){(0,i.connectToDB)();let r=(e-1)*t,a=o.default.find({parentId:{$in:[null,void 0]}}).sort({createdAt:"desc"}).skip(r).limit(t).populate({path:"author",model:n.default}).populate({path:"children",populate:{path:"author",model:n.default,select:"_id name parentId image"}}),s=await o.default.countDocuments({parentId:{$in:[null,void 0]}}),d=await a.exec(),c=s>r+d.length;return{posts:d,isNext:c}}async function l(e){(0,i.connectToDB)();try{let t=await o.default.findById(e).populate({path:"author",model:n.default,select:"_id id name image"}).populate({path:"children",populate:[{path:"author",model:n.default,select:"_id id name parentId image"},{path:"children",model:o.default,populate:{path:"author",model:n.default,select:"_id id name patentId image"}}]}).exec();return t}catch(e){throw Error(`Error fetching thread: ${e.message}`)}}async function u(e,t,r,a){(0,i.connectToDB)();try{let a=await o.default.findById(e);if(!a)throw Error("Thread not found");let s=new o.default({text:t,author:r,parentId:e}),n=await s.save();a.children.push(n._id),await a.save()}catch(e){throw Error(`Error adding comment to thread: ${e.message}`)}}(0,r(96276).ensureServerEntryExports)([d,c,l,u]),(0,a.createActionProxy)("78e111e9dc41efac987bd5e8ac51b19043c9068a",null,d),(0,a.createActionProxy)("38d2d7a0a35de985e321f749280c69191b8c2814",null,c),(0,a.createActionProxy)("39784508112122b2d6fe16b8d277c4cb71a3d20d",null,l),(0,a.createActionProxy)("e5fb2a651b5b7a205c654d5be1a786f5e317b9d1",null,u)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4650,1421,7375,8620,2107,6248,5717,8242,3406,8788,8415,7297,3979,1971,6785,3938,3474,1397,3638,7792,9822,3161,8384,6404,1748,5652,1949],()=>r(53762));module.exports=a})();