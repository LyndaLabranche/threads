(()=>{var e={};e.id=7786,e.ids=[7786],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},57310:e=>{"use strict";e.exports=require("url")},71267:e=>{"use strict";e.exports=require("worker_threads")},47275:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>f,pages:()=>u,routeModule:()=>m,tree:()=>d});var a=r(73137),s=r(54647),o=r(4183),n=r.n(o),i=r(71775),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=a.AppPageRouteModule,d=["",{children:["(auth)",{children:["onboarding",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3223)),"C:\\Users\\lynda\\OneDrive\\Desktop\\GitHub2_Projects\\threads\\app\\(auth)\\onboarding\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3675)),"C:\\Users\\lynda\\OneDrive\\Desktop\\GitHub2_Projects\\threads\\app\\(auth)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["C:\\Users\\lynda\\OneDrive\\Desktop\\GitHub2_Projects\\threads\\app\\(auth)\\onboarding\\page.tsx"],f="/(auth)/onboarding/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new c({definition:{kind:s.x.APP_PAGE,page:"/(auth)/onboarding/page",pathname:"/onboarding",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},96536:(e,t,r)=>{let a={ff1d10e4c4589040540250355c302d70862062e6:()=>Promise.resolve().then(r.bind(r,36801)).then(e=>e.updateUser),"1596b48302c0ee3dbe71040264d262724aaf5922":()=>Promise.resolve().then(r.bind(r,36801)).then(e=>e.fetchUser),"4136361b190c15107930ce3a82a69c155f3f5e21":()=>Promise.resolve().then(r.bind(r,36801)).then(e=>e.fetchUserPosts),a1a227a67ee82139c2a8df61f007c4e13a42bd7d:()=>Promise.resolve().then(r.bind(r,36801)).then(e=>e.fetchUsers),"8ec1f8a9f390f17362a26d8913fa4e2dfef86fce":()=>Promise.resolve().then(r.bind(r,36801)).then(e=>e.getActivity)};async function s(e,...t){let r=await a[e]();return r.apply(null,t)}e.exports={ff1d10e4c4589040540250355c302d70862062e6:s.bind(null,"ff1d10e4c4589040540250355c302d70862062e6"),"1596b48302c0ee3dbe71040264d262724aaf5922":s.bind(null,"1596b48302c0ee3dbe71040264d262724aaf5922"),"4136361b190c15107930ce3a82a69c155f3f5e21":s.bind(null,"4136361b190c15107930ce3a82a69c155f3f5e21"),a1a227a67ee82139c2a8df61f007c4e13a42bd7d:s.bind(null,"a1a227a67ee82139c2a8df61f007c4e13a42bd7d"),"8ec1f8a9f390f17362a26d8913fa4e2dfef86fce":s.bind(null,"8ec1f8a9f390f17362a26d8913fa4e2dfef86fce")}},30530:(e,t,r)=>{Promise.resolve().then(r.bind(r,68751)),Promise.resolve().then(r.bind(r,16373)),Promise.resolve().then(r.bind(r,52990)),Promise.resolve().then(r.bind(r,84102)),Promise.resolve().then(r.bind(r,54390))},68751:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(60080),s=r(66558),o=r(83894),n=r(19098);let i=n.Ry({profile_photo:n.Z_().url().nonempty(),name:n.Z_().min(3).max(30),username:n.Z_().min(3).max(30),bio:n.Z_().min(3).max(1e3)});var l=r(52451),c=r.n(l),d=r(60806),u=r(49424),f=r(68384),p=r(76466),m=r(9885);r(4047);var x=r(31581);let{useUploadThing:h,uploadFiles:b}=(0,x.$)();var g=r(23161);r(70391),r(53009);var y=r(61324),v=(0,y.$)("ff1d10e4c4589040540250355c302d70862062e6");(0,y.$)("1596b48302c0ee3dbe71040264d262724aaf5922"),(0,y.$)("4136361b190c15107930ce3a82a69c155f3f5e21"),(0,y.$)("a1a227a67ee82139c2a8df61f007c4e13a42bd7d"),(0,y.$)("8ec1f8a9f390f17362a26d8913fa4e2dfef86fce");var j=r(57114);let w=({user:e,btnTitle:t})=>{let[r,n]=(0,m.useState)([]),{startUpload:l}=h("media"),x=(0,j.useRouter)(),b=(0,j.usePathname)(),y=(0,s.cI)({resolver:(0,o.F)(i),defaultValues:{profile_photo:e?.image?e.image:"",name:e?.name?e.name:"",username:e?.username?e.username:"",bio:e?.bio?e.bio:""}}),w=(e,t)=>{e.preventDefault();let r=new FileReader;if(e.target.files&&e.target.files.length>0){let a=e.target.files[0];if(n(Array.from(e.target.files)),!a.type.includes("image"))return;r.onload=async e=>{let r=e.target?.result?.toString()||"";t(r)},r.readAsDataURL(a)}},P=async t=>{let a=t.profile_photo,s=(0,g.dY)(a);if(s){let e=await l(r);e&&e[0].url&&(t.profile_photo=e[0].url)}await v({userId:e.id,username:t.username,name:t.name,bio:t.bio,image:t.profile_photo,path:b}),"/profile/edit"===b?x.back():x.push("/")};return a.jsx(d.l0,{...y,children:(0,a.jsxs)("form",{onSubmit:y.handleSubmit(P),className:"flex flex-col justify-start gap-10",children:[a.jsx(d.Wi,{control:y.control,name:"profile_photo",render:({field:e})=>(0,a.jsxs)(d.xJ,{className:"flex items-center gap-4",children:[a.jsx(d.lX,{className:"account-form_image-label",children:e.value?a.jsx(c(),{src:e.value,alt:"profile_photo",width:96,height:96,priority:!0,className:"rounded-full object-contain"}):a.jsx(c(),{src:"/assets/profile.svg",alt:"profile_photo",width:24,height:24,className:"object-contain"})}),a.jsx(d.NI,{className:"flex-1 text-base-semibold text-gray-200",children:a.jsx(u.I,{type:"file",accept:"image/*",placeholder:"Add profile photo",...e,value:"",className:"account-form_image-input",onChange:t=>w(t,e.onChange)})}),a.jsx(d.zG,{})]})}),a.jsx(d.Wi,{control:y.control,name:"name",render:({field:e})=>(0,a.jsxs)(d.xJ,{className:"flex w-full flex-col gap-3",children:[a.jsx(d.lX,{className:"text-base-semibold text-light-2",children:"Name"}),a.jsx(d.NI,{children:a.jsx(u.I,{type:"text",className:"account-form_input no-focus",...e})}),a.jsx(d.zG,{})]})}),a.jsx(d.Wi,{control:y.control,name:"username",render:({field:e})=>(0,a.jsxs)(d.xJ,{className:"flex w-full flex-col gap-3",children:[a.jsx(d.lX,{className:"text-base-semibold text-light-2 gap-3 w-full",children:"Username"}),a.jsx(d.NI,{children:a.jsx(u.I,{type:"text",className:"account-form_input",...e})}),a.jsx(d.zG,{})]})}),a.jsx(d.Wi,{control:y.control,name:"bio",render:({field:e})=>(0,a.jsxs)(d.xJ,{className:"flex w-full flex-col gap-3",children:[a.jsx(d.lX,{className:"text-base-semibold text-light-2 gap-3 w-full",children:"Bio"}),a.jsx(d.NI,{children:a.jsx(p.g,{rows:10,className:"account-form_input",...e})}),a.jsx(d.zG,{})]})}),a.jsx(f.z,{type:"submit",className:"bg-primary-500",children:"Submit"})]})})}},49424:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var a=r(60080),s=r(9885),o=r(23161);let n=s.forwardRef(({className:e,type:t,...r},s)=>a.jsx("input",{type:t,className:(0,o.cn)("flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:bg-slate-950 dark:ring-offset-slate-950 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",e),ref:s,...r}));n.displayName="Input"},3223:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(48144),s=r(17536);let o=(0,s.createProxy)(String.raw`C:\Users\lynda\OneDrive\Desktop\GitHub2_Projects\threads\components\forms\AccountProfile.tsx`),{__esModule:n,$$typeof:i}=o,l=o.default;var c=r(98620);async function d(){let e=await (0,c.ar)(),t={},r={id:e.id,objectId:t.id,username:t?.username||e.username,name:t?.name||e.firstName||"",bio:t.bio||"",image:t.image||e?.imageUrl};return(0,a.jsxs)("main",{className:"mx-auto flex max-w-3xl flex-col justify-start px-10 py-20",children:[a.jsx("h1",{className:"head-text",children:"Onboarding"}),a.jsx("p",{className:"mt-3 text-base-regular text-light-2",children:"Complete your profile now to use Threads"}),a.jsx("section",{className:"mt-9 bg-dark-2 p-10",children:a.jsx(l,{user:r,btnTitle:"Continue"})})]})}let u=d},36801:(e,t,r)=>{"use strict";r.r(t),r.d(t,{fetchUser:()=>c,fetchUserPosts:()=>d,fetchUsers:()=>u,getActivity:()=>f,updateUser:()=>l});var a=r(57016),s=r(20738),o=r(9245),n=r(27977),i=r(74975);async function l({userId:e,username:t,name:r,bio:a,image:i,path:l}){(0,n.connectToDB)();try{await o.default.findOneAndUpdate({id:e},{username:t.toLowerCase(),name:r,bio:a,image:i,onboarded:!0},{upsert:!0}),"/profile/edit"===l&&(0,s.revalidatePath)(l)}catch(e){throw Error(`Failed to create/update user: ${e.message}`)}}async function c(e){try{return(0,n.connectToDB)(),await o.default.findOne({id:e})}catch(e){throw Error(`Failed to fetch user: ${e.message}`)}}async function d(e){try{(0,n.connectToDB)();let t=await o.default.findOne({id:e}).populate({path:"threads",model:i.default,populate:{path:"children",model:i.default,populate:{path:"author",model:o.default,select:"name image id"}}});return t}catch(e){throw Error(`Error fetching all user posts ${e.message}`)}}async function u({userId:e,searchString:t="",pageNumber:r=1,pageSize:a=20,sortBy:s="desc"}){try{(0,n.connectToDB)();let i=(r-1)*a,l=RegExp(t,"i"),c={id:{$ne:e}};""!==t.trim()&&(c.$or=[{username:{$regex:l}},{name:{$regex:l}}]);let d=o.default.find(c).sort({createdAt:s}).skip(i).limit(a),u=await o.default.countDocuments(c),f=await d.exec(),p=u>i+f.length;return{users:f,isNext:p}}catch(e){throw Error(`Failed to fetch all users: ${e.message}`)}}async function f(e){try{(0,n.connectToDB)();let t=await i.default.find({author:e}),r=t.reduce((e,t)=>e.concat(t.children),[]),a=await i.default.find({_id:{$in:r},author:{$ne:e}}).populate({path:"author",model:o.default,select:"name image _id"});return a}catch(e){throw Error(`Failed to get activity: ${e.message}`)}}(0,r(96276).ensureServerEntryExports)([l,c,d,u,f]),(0,a.createActionProxy)("ff1d10e4c4589040540250355c302d70862062e6",null,l),(0,a.createActionProxy)("1596b48302c0ee3dbe71040264d262724aaf5922",null,c),(0,a.createActionProxy)("4136361b190c15107930ce3a82a69c155f3f5e21",null,d),(0,a.createActionProxy)("a1a227a67ee82139c2a8df61f007c4e13a42bd7d",null,u),(0,a.createActionProxy)("8ec1f8a9f390f17362a26d8913fa4e2dfef86fce",null,f)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4650,1421,7375,8620,2107,6248,8242,7297,3979,1971,6785,3938,5272,3474,1397,3161,8384,1748,5114,5652],()=>r(47275));module.exports=a})();