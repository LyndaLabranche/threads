"use strict";exports.id=8620,exports.ids=[8620],exports.modules={78912:(e,t,r)=>{var n,i,o=Object.create,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,h=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of l(t))c.call(e,i)||i===r||s(e,i,{get:()=>t[i],enumerable:!(n=a(t,i))||n.enumerable});return e},f=(e,t,r)=>(r=null!=e?o(u(e)):{},h(!t&&e&&e.__esModule?r:s(r,"default",{value:e,enumerable:!0}),e)),d={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(d,{AllowlistIdentifier:()=>ei,AuthStatus:()=>e4,Clerk:()=>tX,Client:()=>es,DeletedObject:()=>ea,Email:()=>el,EmailAddress:()=>eh,ExternalAccount:()=>ef,IdentificationLink:()=>eu,Invitation:()=>ed,OauthAccessToken:()=>ey,ObjectType:()=>ep,Organization:()=>eg,OrganizationInvitation:()=>em,OrganizationMembership:()=>eb,OrganizationMembershipPublicUserData:()=>ev,PhoneNumber:()=>ew,RedirectUrl:()=>eS,SMSMessage:()=>e_,Session:()=>eo,SignInToken:()=>eA,Token:()=>ek,User:()=>eB,Verification:()=>ec,buildRequestUrl:()=>tr,constants:()=>er,createAuthenticateRequest:()=>tF,createIsomorphicRequest:()=>eQ,debugRequestState:()=>tV,decodeJwt:()=>tg,deserialize:()=>eC,hasValidSignature:()=>ty,loadInterstitialFromLocal:()=>eF,makeAuthObjectSerializable:()=>ej,prunePrivateMetadata:()=>eU,redirect:()=>tY,sanitizeAuthObject:()=>eL,signedInAuthObject:()=>eR,signedOutAuthObject:()=>eK,verifyJwt:()=>tm,verifyToken:()=>tE}),e.exports=h(s({},"__esModule",{value:!0}),d);var p=class{constructor(e){this.request=e}requireId(e){if(!e)throw Error("A valid resource ID is required.")}},y=RegExp("/{1,}","g");function g(...e){return e.filter(e=>e).join("/").replace(y,"/")}var m="/allowlist_identifiers",b=class extends p{async getAllowlistIdentifierList(){return this.request({method:"GET",path:m})}async createAllowlistIdentifier(e){return this.request({method:"POST",path:m,bodyParams:e})}async deleteAllowlistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:g(m,e)})}},v="/clients",w=class extends p{async getClientList(){return this.request({method:"GET",path:v})}async getClient(e){return this.requireId(e),this.request({method:"GET",path:g(v,e)})}verifyClient(e){return this.request({method:"POST",path:g(v,"verify"),bodyParams:{token:e}})}},S=class extends p{async deleteDomain(e){return this.request({method:"DELETE",path:g("/domains",e)})}},A="/email_addresses",_=class extends p{async getEmailAddress(e){return this.requireId(e),this.request({method:"GET",path:g(A,e)})}async createEmailAddress(e){return this.request({method:"POST",path:A,bodyParams:e})}async updateEmailAddress(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:g(A,e),bodyParams:t})}async deleteEmailAddress(e){return this.requireId(e),this.request({method:"DELETE",path:g(A,e)})}},k=class extends p{async createEmail(e){return this.request({method:"POST",path:"/emails",bodyParams:e})}},E=class extends p{async getInterstitial(){return this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}},B="/invitations",C=class extends p{async getInvitationList(e={}){return this.request({method:"GET",path:B,queryParams:e})}async createInvitation(e){return this.request({method:"POST",path:B,bodyParams:e})}async revokeInvitation(e){return this.requireId(e),this.request({method:"POST",path:g(B,e,"revoke")})}},P=f(r(35788)),{default:T,RuntimeAbortController:x,RuntimeBlob:O,RuntimeFormData:N,RuntimeHeaders:I,RuntimeRequest:R,RuntimeResponse:K}=f(r(86935)),U=T.bind(globalThis),L={crypto:P.default,fetch:U,AbortController:x,Blob:O,FormData:N,Headers:I,Request:R,Response:K},j="/organizations",M=class extends p{async getOrganizationList(e){return this.request({method:"GET",path:j,queryParams:e})}async createOrganization(e){return this.request({method:"POST",path:j,bodyParams:e})}async getOrganization(e){let t="organizationId"in e?e.organizationId:e.slug;return this.requireId(t),this.request({method:"GET",path:g(j,t)})}async updateOrganization(e,t){return this.requireId(e),this.request({method:"PATCH",path:g(j,e),bodyParams:t})}async updateOrganizationLogo(e,t){this.requireId(e);let r=new L.FormData;return r.append("file",t?.file),r.append("uploader_user_id",t?.uploaderUserId),this.request({method:"PUT",path:g(j,e,"logo"),formData:r})}async deleteOrganizationLogo(e){return this.requireId(e),this.request({method:"DELETE",path:g(j,e,"logo")})}async updateOrganizationMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:g(j,e,"metadata"),bodyParams:t})}async deleteOrganization(e){return this.request({method:"DELETE",path:g(j,e)})}async getOrganizationMembershipList(e){let{organizationId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:g(j,t,"memberships"),queryParams:{limit:r,offset:n}})}async createOrganizationMembership(e){let{organizationId:t,userId:r,role:n}=e;return this.requireId(t),this.request({method:"POST",path:g(j,t,"memberships"),bodyParams:{userId:r,role:n}})}async updateOrganizationMembership(e){let{organizationId:t,userId:r,role:n}=e;return this.requireId(t),this.request({method:"PATCH",path:g(j,t,"memberships",r),bodyParams:{role:n}})}async updateOrganizationMembershipMetadata(e){let{organizationId:t,userId:r,publicMetadata:n,privateMetadata:i}=e;return this.request({method:"PATCH",path:g(j,t,"memberships",r,"metadata"),bodyParams:{publicMetadata:n,privateMetadata:i}})}async deleteOrganizationMembership(e){let{organizationId:t,userId:r}=e;return this.requireId(t),this.request({method:"DELETE",path:g(j,t,"memberships",r)})}async getPendingOrganizationInvitationList(e){let{organizationId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:g(j,t,"invitations","pending"),queryParams:{limit:r,offset:n}})}async createOrganizationInvitation(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"POST",path:g(j,t,"invitations"),bodyParams:{...r}})}async getOrganizationInvitation(e){let{organizationId:t,invitationId:r}=e;return this.requireId(t),this.requireId(r),this.request({method:"GET",path:g(j,t,"invitations",r)})}async revokeOrganizationInvitation(e){let{organizationId:t,invitationId:r,requestingUserId:n}=e;return this.requireId(t),this.request({method:"POST",path:g(j,t,"invitations",r,"revoke"),bodyParams:{requestingUserId:n}})}},D="/phone_numbers",H=class extends p{async getPhoneNumber(e){return this.requireId(e),this.request({method:"GET",path:g(D,e)})}async createPhoneNumber(e){return this.request({method:"POST",path:D,bodyParams:e})}async updatePhoneNumber(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:g(D,e),bodyParams:t})}async deletePhoneNumber(e){return this.requireId(e),this.request({method:"DELETE",path:g(D,e)})}},q="/redirect_urls",$=class extends p{async getRedirectUrlList(){return this.request({method:"GET",path:q})}async getRedirectUrl(e){return this.requireId(e),this.request({method:"GET",path:g(q,e)})}async createRedirectUrl(e){return this.request({method:"POST",path:q,bodyParams:e})}async deleteRedirectUrl(e){return this.requireId(e),this.request({method:"DELETE",path:g(q,e)})}},z="/sessions",J=class extends p{async getSessionList(e){return this.request({method:"GET",path:z,queryParams:e})}async getSession(e){return this.requireId(e),this.request({method:"GET",path:g(z,e)})}async revokeSession(e){return this.requireId(e),this.request({method:"POST",path:g(z,e,"revoke")})}async verifySession(e,t){return this.requireId(e),this.request({method:"POST",path:g(z,e,"verify"),bodyParams:{token:t}})}async getToken(e,t){return this.requireId(e),(await this.request({method:"POST",path:g(z,e,"tokens",t||"")})).jwt}},V="/sign_in_tokens",F=class extends p{async createSignInToken(e){return this.request({method:"POST",path:V,bodyParams:e})}async revokeSignInToken(e){return this.requireId(e),this.request({method:"POST",path:g(V,e,"revoke")})}},W=class extends p{async createSMSMessage(e){return this.request({method:"POST",path:"/sms_messages",bodyParams:e})}},G="/users",Y=class extends p{async getUserList(e={}){return this.request({method:"GET",path:G,queryParams:e})}async getUser(e){return this.requireId(e),this.request({method:"GET",path:g(G,e)})}async createUser(e){return this.request({method:"POST",path:G,bodyParams:e})}async updateUser(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:g(G,e),bodyParams:t})}async updateUserProfileImage(e,t){this.requireId(e);let r=new L.FormData;return r.append("file",t?.file),this.request({method:"POST",path:g(G,e,"profile_image"),formData:r})}async updateUserMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:g(G,e,"metadata"),bodyParams:t})}async deleteUser(e){return this.requireId(e),this.request({method:"DELETE",path:g(G,e)})}async getCount(e={}){return this.request({method:"GET",path:g(G,"count"),queryParams:e})}async getUserOauthAccessToken(e,t){return this.requireId(e),this.request({method:"GET",path:g(G,e,"oauth_access_tokens",t)})}async disableUserMFA(e){return this.requireId(e),this.request({method:"DELETE",path:g(G,e,"mfa")})}async getOrganizationMembershipList(e){let{userId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:g(G,t,"organization_memberships"),queryParams:{limit:r,offset:n}})}async verifyPassword(e){let{userId:t,password:r}=e;return this.requireId(t),this.request({method:"POST",path:g(G,t,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(e){let{userId:t,code:r}=e;return this.requireId(t),this.request({method:"POST",path:g(G,t,"verify_totp"),bodyParams:{code:r}})}},X=f(r(76196)),Z=f(r(53918)),Q="https://api.clerk.dev",ee="@clerk/backend",et={AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",EnableDebug:"x-clerk-debug",ClerkRedirectTo:"x-clerk-redirect-to",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},er={Attributes:{AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},Cookies:{Session:"__session",ClientUat:"__client_uat"},Headers:et,SearchParams:{AuthStatus:et.AuthStatus},ContentTypes:{Json:"application/json"}};function en(e){if(!e||"string"!=typeof e)throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var ei=class{constructor(e,t,r,n,i){this.id=e,this.identifier=t,this.createdAt=r,this.updatedAt=n,this.invitationId=i}static fromJSON(e){return new ei(e.id,e.identifier,e.created_at,e.updated_at,e.invitation_id)}},eo=class{constructor(e,t,r,n,i,o,s,a,l){this.id=e,this.clientId=t,this.userId=r,this.status=n,this.lastActiveAt=i,this.expireAt=o,this.abandonAt=s,this.createdAt=a,this.updatedAt=l}static fromJSON(e){return new eo(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at)}},es=class{constructor(e,t,r,n,i,o,s,a){this.id=e,this.sessionIds=t,this.sessions=r,this.signInId=n,this.signUpId=i,this.lastActiveSessionId=o,this.createdAt=s,this.updatedAt=a}static fromJSON(e){return new es(e.id,e.session_ids,e.sessions.map(e=>eo.fromJSON(e)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.created_at,e.updated_at)}},ea=class{constructor(e,t,r,n){this.object=e,this.id=t,this.slug=r,this.deleted=n}static fromJSON(e){return new ea(e.object,e.id||null,e.slug||null,e.deleted)}},el=class{constructor(e,t,r,n,i,o,s,a,l,u,c){this.id=e,this.fromEmailName=t,this.emailAddressId=r,this.toEmailAddress=n,this.subject=i,this.body=o,this.bodyPlain=s,this.status=a,this.slug=l,this.data=u,this.deliveredByClerk=c}static fromJSON(e){return new el(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},eu=class{constructor(e,t){this.id=e,this.type=t}static fromJSON(e){return new eu(e.id,e.type)}},ec=class{constructor(e,t,r=null,n=null,i=null,o=null){this.status=e,this.strategy=t,this.externalVerificationRedirectURL=r,this.attempts=n,this.expireAt=i,this.nonce=o}static fromJSON(e){return new ec(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},eh=class{constructor(e,t,r,n){this.id=e,this.emailAddress=t,this.verification=r,this.linkedTo=n}static fromJSON(e){return new eh(e.id,e.email_address,e.verification&&ec.fromJSON(e.verification),e.linked_to.map(e=>eu.fromJSON(e)))}},ef=class{constructor(e,t,r,n,i,o,s,a,l,u,c,h={},f,d){this.id=e,this.provider=t,this.identificationId=r,this.externalId=n,this.approvedScopes=i,this.emailAddress=o,this.firstName=s,this.lastName=a,this.picture=l,this.imageUrl=u,this.username=c,this.publicMetadata=h,this.label=f,this.verification=d}static fromJSON(e){return new ef(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.avatar_url,e.image_url,e.username,e.public_metadata,e.label,e.verification&&ec.fromJSON(e.verification))}},ed=class{constructor(e,t,r,n,i,o,s){this.id=e,this.emailAddress=t,this.publicMetadata=r,this.createdAt=n,this.updatedAt=i,this.status=o,this.revoked=s}static fromJSON(e){return new ed(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.revoked)}},ep=((n=ep||{}).AllowlistIdentifier="allowlist_identifier",n.Client="client",n.Email="email",n.EmailAddress="email_address",n.ExternalAccount="external_account",n.FacebookAccount="facebook_account",n.GoogleAccount="google_account",n.Invitation="invitation",n.OauthAccessToken="oauth_access_token",n.Organization="organization",n.OrganizationInvitation="organization_invitation",n.OrganizationMembership="organization_membership",n.PhoneNumber="phone_number",n.RedirectUrl="redirect_url",n.Session="session",n.SignInAttempt="sign_in_attempt",n.SignInToken="sign_in_token",n.SignUpAttempt="sign_up_attempt",n.SmsMessage="sms_message",n.User="user",n.Web3Wallet="web3_wallet",n.Token="token",n.TotalCount="total_count",n),ey=class{constructor(e,t,r={},n,i,o){this.provider=e,this.token=t,this.publicMetadata=r,this.label=n,this.scopes=i,this.tokenSecret=o}static fromJSON(e){return new ey(e.provider,e.token,e.public_metadata,e.label,e.scopes,e.token_secret)}},eg=class{constructor(e,t,r,n,i,o,s,a,l,u={},c={},h,f){this.id=e,this.name=t,this.slug=r,this.logoUrl=n,this.imageUrl=i,this.hasImage=o,this.createdBy=s,this.createdAt=a,this.updatedAt=l,this.publicMetadata=u,this.privateMetadata=c,this.maxAllowedMemberships=h,this.adminDeleteEnabled=f}static fromJSON(e){return new eg(e.id,e.name,e.slug,e.logo_url,e.image_url,e.has_image,e.created_by,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled)}},em=class{constructor(e,t,r,n,i,o,s,a={},l={}){this.id=e,this.emailAddress=t,this.role=r,this.organizationId=n,this.createdAt=i,this.updatedAt=o,this.status=s,this.publicMetadata=a,this.privateMetadata=l}static fromJSON(e){return new em(e.id,e.email_address,e.role,e.organization_id,e.created_at,e.updated_at,e.status,e.public_metadata,e.private_metadata)}},eb=class{constructor(e,t,r={},n={},i,o,s,a){this.id=e,this.role=t,this.publicMetadata=r,this.privateMetadata=n,this.createdAt=i,this.updatedAt=o,this.organization=s,this.publicUserData=a}static fromJSON(e){return new eb(e.id,e.role,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,eg.fromJSON(e.organization),ev.fromJSON(e.public_user_data))}},ev=class{constructor(e,t,r,n,i,o,s){this.identifier=e,this.firstName=t,this.lastName=r,this.profileImageUrl=n,this.imageUrl=i,this.hasImage=o,this.userId=s}static fromJSON(e){return new ev(e.identifier,e.first_name,e.last_name,e.profile_image_url,e.image_url,e.has_image,e.user_id)}},ew=class{constructor(e,t,r,n,i,o){this.id=e,this.phoneNumber=t,this.reservedForSecondFactor=r,this.defaultSecondFactor=n,this.verification=i,this.linkedTo=o}static fromJSON(e){return new ew(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&ec.fromJSON(e.verification),e.linked_to.map(e=>eu.fromJSON(e)))}},eS=class{constructor(e,t,r,n){this.id=e,this.url=t,this.createdAt=r,this.updatedAt=n}static fromJSON(e){return new eS(e.id,e.url,e.created_at,e.updated_at)}},eA=class{constructor(e,t,r,n,i,o,s){this.id=e,this.userId=t,this.token=r,this.status=n,this.url=i,this.createdAt=o,this.updatedAt=s}static fromJSON(e){return new eA(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},e_=class{constructor(e,t,r,n,i,o,s){this.id=e,this.fromPhoneNumber=t,this.toPhoneNumber=r,this.message=n,this.status=i,this.phoneNumberId=o,this.data=s}static fromJSON(e){return new e_(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},ek=class{constructor(e){this.jwt=e}static fromJSON(e){return new ek(e.jwt)}},eE=class{constructor(e,t,r){this.id=e,this.web3Wallet=t,this.verification=r}static fromJSON(e){return new eE(e.id,e.web3_wallet,e.verification&&ec.fromJSON(e.verification))}},eB=class{constructor(e,t,r,n,i,o,s,a,l,u,c,h,f,d,p,y,g,m,b,v,w,S={},A={},_={},k=[],E=[],B=[],C=[]){this.id=e,this.passwordEnabled=t,this.totpEnabled=r,this.backupCodeEnabled=n,this.twoFactorEnabled=i,this.banned=o,this.createdAt=s,this.updatedAt=a,this.profileImageUrl=l,this.imageUrl=u,this.hasImage=c,this.gender=h,this.birthday=f,this.primaryEmailAddressId=d,this.primaryPhoneNumberId=p,this.primaryWeb3WalletId=y,this.lastSignInAt=g,this.externalId=m,this.username=b,this.firstName=v,this.lastName=w,this.publicMetadata=S,this.privateMetadata=A,this.unsafeMetadata=_,this.emailAddresses=k,this.phoneNumbers=E,this.web3Wallets=B,this.externalAccounts=C}static fromJSON(e){return new eB(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.created_at,e.updated_at,e.profile_image_url,e.image_url,e.has_image,e.gender,e.birthday,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(e=>eh.fromJSON(e)),(e.phone_numbers||[]).map(e=>ew.fromJSON(e)),(e.web3_wallets||[]).map(e=>eE.fromJSON(e)),(e.external_accounts||[]).map(e=>ef.fromJSON(e)))}};function eC(e){return Array.isArray(e)?e.map(e=>eP(e)):Array.isArray(e.data)&&void 0!==e.data?e.data.map(e=>eP(e)):eP(e)}function eP(e){if("string"!=typeof e&&"object"in e&&"deleted"in e)return ea.fromJSON(e);switch(e.object){case"allowlist_identifier":return ei.fromJSON(e);case"client":return es.fromJSON(e);case"email_address":return eh.fromJSON(e);case"email":return el.fromJSON(e);case"invitation":return ed.fromJSON(e);case"oauth_access_token":return ey.fromJSON(e);case"organization":return eg.fromJSON(e);case"organization_invitation":return em.fromJSON(e);case"organization_membership":return eb.fromJSON(e);case"phone_number":return ew.fromJSON(e);case"redirect_url":return eS.fromJSON(e);case"sign_in_token":return eA.fromJSON(e);case"session":return eo.fromJSON(e);case"sms_message":return e_.fromJSON(e);case"token":return ek.fromJSON(e);case"total_count":return e.total_count;case"user":return eB.fromJSON(e);default:return e}}var eT=e=>async(...t)=>{let{data:r,errors:n,status:i,statusText:o}=await e(...t);if(null===n)return r;throw new eO(o||"",{data:n,status:i||""})};function ex(e){return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:e?.meta?.param_name,sessionId:e?.meta?.session_id}}}var eO=class extends Error{constructor(e,{data:t,status:r}){super(e),Object.setPrototypeOf(this,eO.prototype),this.clerkError=!0,this.message=e,this.status=r,this.errors=t}};function eN(e){let t=function(e){let t=async t=>{let r;let{apiKey:n,secretKey:i,apiUrl:o=Q,apiVersion:s="v1",userAgent:a=ee,httpOptions:l={}}=e,{path:u,method:c,queryParams:h,headerParams:f,bodyParams:d,formData:p}=t,y=i||n;en(y);let m=g(o,s,u),b=new URL(m);if(h){let e=(0,Z.default)({...h});for(let[t,r]of Object.entries(e))r&&[r].flat().forEach(e=>b.searchParams.append(t,e))}let v={Authorization:`Bearer ${y}`,"Clerk-Backend-SDK":a,...f};try{if(p)r=await L.fetch(b.href,{...l,method:c,headers:v,body:p});else{v["Content-Type"]="application/json";let e="GET"!==c&&d&&Object.keys(d).length>0,t=e?{body:JSON.stringify((0,Z.default)(d,{deep:!1}))}:null;r=await L.fetch(b.href,(0,X.default)(l,{method:c,headers:v,...t}))}let e=r?.headers&&r.headers?.get(er.Headers.ContentType)===er.ContentTypes.Json,t=await (e?r.json():r.text());if(!r.ok)throw t;return{data:eC(t),errors:null}}catch(e){if(e instanceof Error)return{data:null,errors:[{code:"unexpected_error",message:e.message||"Unexpected error"}]};return{data:null,errors:function(e){if(e&&"object"==typeof e&&"errors"in e){let t=e.errors;return t.length>0?t.map(ex):[]}return[]}(e),status:r?.status,statusText:r?.statusText}}};return eT(t)}(e);return{allowlistIdentifiers:new b(t),clients:new w(t),emailAddresses:new _(t),emails:new k(t),interstitial:new E(t),invitations:new C(t),organizations:new M(t),phoneNumbers:new H(t),redirectUrls:new $(t),sessions:new J(t),signInTokens:new F(t),smsMessages:new W(t),users:new Y(t),domains:new S(t)}}var eI=e=>()=>{let t={...e};return t.apiKey=(t.apiKey||"").substring(0,7),t.secretKey=(t.secretKey||"").substring(0,7),t.jwtKey=(t.jwtKey||"").substring(0,7),{...t}};function eR(e,t,r){let{act:n,sid:i,org_id:o,org_role:s,org_slug:a,sub:l}=e,{apiKey:u,secretKey:c,apiUrl:h,apiVersion:f,token:d,session:p,user:y,organization:g}=t,{sessions:m}=eN({apiKey:u,secretKey:c,apiUrl:h,apiVersion:f}),b=eM({sessionId:i,sessionToken:d,fetcher:(...e)=>m.getToken(...e)});return{actor:n,sessionClaims:e,sessionId:i,session:p,userId:l,user:y,orgId:o,orgRole:s,orgSlug:a,organization:g,getToken:b,debug:eI({...t,...r})}}function eK(e){return{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,organization:null,getToken:()=>Promise.resolve(null),debug:eI(e)}}function eU(e){return e&&(delete e.privateMetadata,delete e.private_metadata),e}function eL(e){let t=e.user?{...e.user}:e.user,r=e.organization?{...e.organization}:e.organization;return eU(t),eU(r),{...e,user:t,organization:r}}var ej=e=>{let{debug:t,getToken:r,...n}=e;return n},eM=e=>{let{fetcher:t,sessionToken:r,sessionId:n}=e||{};return async(e={})=>n?e.template?t(n,e.template):r:null};async function eD(e,t=1,r=5){try{return await e()}catch(i){var n;if(t>=r)throw i;return await (n=2**t*100,new Promise(e=>setTimeout(e,n))),eD(e,t+1)}}function eH(e){return e.startsWith("test_")||e.startsWith("sk_test_")}var{isDevOrStagingUrl:eq}=function(){let e=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],t=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;let n="string"==typeof r?r:r.hostname,i=t.get(n);return void 0===i&&(i=e.some(e=>n.endsWith(e)),t.set(n,i)),i}}}(),e$="pk_live_";function ez(e){if(!function(e){e=e||"";let t=e.startsWith(e$)||e.startsWith("pk_test_"),r=eJ(e.split("_")[2]||"").endsWith("$");return t&&r}(e=e||""))return null;let t=e.startsWith(e$)?"production":"development",r=eJ(e.split("_")[2]);return r.endsWith("$")?{instanceType:t,frontendApi:r=r.slice(0,-1)}:null}var eJ=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof globalThis&&globalThis.Buffer?new globalThis.Buffer(e,"base64").toString():e,eV=class extends Error{constructor({action:e,message:t,reason:r}){super(t),Object.setPrototypeOf(this,eV.prototype),this.reason=r,this.message=t,this.action=e}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};function eF(e){e.frontendApi=ez(e.publishableKey)?.frontendApi||e.frontendApi||"";let t=eq(e.frontendApi)?"":function(e){let t;if(!e)return"";if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}let r=e.replace(t,"");return`clerk.${r}`}(e.domain),{debugData:r,frontendApi:n,pkgVersion:i,clerkJSUrl:o,clerkJSVersion:s,publishableKey:a,proxyUrl:l,isSatellite:u=!1,domain:c,signInUrl:h}=e;return`
    <head>
        <meta charset="UTF-8" />
    </head>
    <body>
        <script>
            window.__clerk_frontend_api = '${n}';
            window.__clerk_debug = ${JSON.stringify(r||{})};
            ${l?`window.__clerk_proxy_url = '${l}'`:""}
            ${c?`window.__clerk_domain = '${c}'`:""}
            window.startClerk = async () => {
                function formRedirect(){
                    const form = '<form method="get" action="" name="redirect"></form>';
                    document.body.innerHTML = document.body.innerHTML + form;

                    const searchParams = new URLSearchParams(window.location.search);
                    for (let paramTuple of searchParams) {
                        const input = document.createElement("input");
                        input.type = "hidden";
                        input.name = paramTuple[0];
                        input.value = paramTuple[1];
                        document.forms.redirect.appendChild(input);
                    }
                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);
                    window.history.pushState({}, '', url);

                    document.forms.redirect.action = window.location.pathname + window.location.hash;
                    document.forms.redirect.submit();
                }

                const Clerk = window.Clerk;
                try {
                    await Clerk.load({
                        isSatellite: ${u},
                        isInterstitial: true,
                        signInUrl: ${h?`'${h}'`:void 0}
                    });
                    if(Clerk.loaded){
                      if(window.location.href.indexOf("#") === -1){
                        window.location.href = window.location.href;
                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){
                          formRedirect();
                      } else {
                          window.location.reload();
                      }
                    }
                } catch (err) {
                    console.error('Clerk: ', err);
                }
            };
            (() => {
                const script = document.createElement('script');
                ${a?`script.setAttribute('data-clerk-publishable-key', '${a}');`:`script.setAttribute('data-clerk-frontend-api', '${n}');`}

                ${c?`script.setAttribute('data-clerk-domain', '${c}');`:""}
                ${l?`script.setAttribute('data-clerk-proxy-url', '${l}')`:""};
                script.async = true;
                script.src = '${o||eX(l||t||n,{pkgVersion:i,clerkJSVersion:s})}';
                script.crossOrigin = 'anonymous';
                script.addEventListener('load', startClerk);
                document.body.appendChild(script);
            })();
        </script>
    </body>
`}async function eW(e){e.frontendApi=ez(e.publishableKey)?.frontendApi||e.frontendApi||"";let t=eG(e),r=await eD(()=>L.fetch(eG(e),{method:"GET",headers:{"Clerk-Backend-SDK":e.userAgent||ee}}));if(!r.ok)throw new eV({action:"Contact support@clerk.com",message:`Error loading Clerk Interstitial from ${t} with code=${r.status}`,reason:"interstitial-remote-failed-to-load"});return r.text()}function eG(e){e.frontendApi=ez(e.publishableKey)?.frontendApi||e.frontendApi||"";let{apiUrl:t,frontendApi:r,pkgVersion:n,clerkJSVersion:i,publishableKey:o,proxyUrl:s,isSatellite:a,domain:l,signInUrl:u}=e,c=new URL(t);return c.pathname=g(c.pathname,"v1","/public/interstitial"),c.searchParams.append("clerk_js_version",i||eY(r,n)),o?c.searchParams.append("publishable_key",o):c.searchParams.append("frontend_api",r),s&&c.searchParams.append("proxy_url",s),a&&c.searchParams.append("is_satellite","true"),c.searchParams.append("sign_in_url",u||""),eq(e.frontendApi)||c.searchParams.append("use_domain_for_script","true"),l&&c.searchParams.append("domain",l),c.href}var eY=(e,t)=>!t&&function(e){return e.endsWith(".lclstage.dev")||e.endsWith(".stgstage.dev")||e.endsWith(".clerkstage.dev")||e.endsWith(".accountsstage.dev")}(e)?"staging":t?t.includes("next")?"next":t.split(".")[0]||"latest":"latest",eX=(e,{pkgVersion:t,clerkJSVersion:r})=>{let n=e.replace(/http(s)?:\/\//,""),i=eY(e,t);return`https://${n}/npm/@clerk/clerk-js@${r||i}/dist/clerk.browser.js`},eZ=r(50002),eQ=e=>e(L.Request,L.Headers),e0=e=>{if(!e)return{};let t=e8(e),r=e2(e),n=e3(e);return{cookies:t,headers:r,searchParams:n}},e1=e=>e?e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):e,e8=e=>{let t=e.headers&&e.headers?.get("cookie")?(0,eZ.parse)(e.headers.get("cookie")):{};return e=>{let r=t?.[e];if(void 0!==r)return e1(r)}},e2=e=>t=>e?.headers?.get(t)||void 0,e3=e=>e?.url?new URL(e.url)?.searchParams:void 0,e6=e=>e?.replace("Bearer ",""),e4=((i=e4||{}).SignedIn="signed-in",i.SignedOut="signed-out",i.Interstitial="interstitial",i.Unknown="unknown",i);async function e5(e,t){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:o,cookieToken:s,frontendApi:a,proxyUrl:l,publishableKey:u,domain:c,isSatellite:h,headerToken:f,loadSession:d,loadUser:p,loadOrganization:y,signInUrl:g,signUpUrl:m,afterSignInUrl:b,afterSignUpUrl:v}=e,{sid:w,org_id:S,sub:A}=t,{sessions:_,users:k,organizations:E}=eN({apiKey:r,secretKey:n,apiUrl:i,apiVersion:o}),[B,C,P]=await Promise.all([d?_.getSession(w):Promise.resolve(void 0),p?k.getUser(A):Promise.resolve(void 0),y&&S?E.getOrganization({organizationId:S}):Promise.resolve(void 0)]),T=eR(t,{secretKey:n,apiKey:r,apiUrl:i,apiVersion:o,token:s||f||"",session:B,user:C,organization:P},{...e,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:a,proxyUrl:l,publishableKey:u,domain:c,isSatellite:h,signInUrl:g,signUpUrl:m,afterSignInUrl:b,afterSignUpUrl:v,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>T}}function e9(e,t,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:o,isSatellite:s,domain:a,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h}=e;return{status:"signed-out",reason:t,message:r,frontendApi:n,proxyUrl:o,publishableKey:i,isSatellite:s,domain:a,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>eK({...e,status:"signed-out",reason:t,message:r})}}function e7(e,t,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:o,isSatellite:s,domain:a,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h}=e;return{status:"interstitial",reason:t,message:r,frontendApi:n,publishableKey:i,isSatellite:s,domain:a,proxyUrl:o,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null}}var te=(e,t)=>e.headers.get(t),tt=e=>e?.split(",")[0],tr=(e,t)=>{let r=new URL(e.url),n=te(e,er.Headers.ForwardedProto),i=te(e,er.Headers.ForwardedHost),o=te(e,er.Headers.Host),s=r.protocol,a=tn({protocol:s,forwardedProto:n,forwardedHost:i,host:o||r.host});return new URL(t||r.pathname,a)},tn=({protocol:e,forwardedProto:t,forwardedHost:r,host:n})=>{let i=tt(r)??n,o=tt(t)??e?.replace(/[:/]/,"");return i&&o?`${o}://${i}`:""};function ti({originURL:e,host:t,forwardedHost:r,forwardedProto:n}){let i=tn({forwardedProto:n,forwardedHost:r,protocol:e.protocol,host:t});return i&&new URL(i).origin!==e.origin}var to=(e,t)=>e?e.find(e=>e.code===t):null,ts={parse:(e,t)=>(function(e,t,r={}){if(!t.codes){t.codes={};for(let e=0;e<t.chars.length;++e)t.codes[t.chars[e]]=e}if(!r.loose&&e.length*t.bits&7)throw SyntaxError("Invalid padding");let n=e.length;for(;"="===e[n-1];)if(--n,!r.loose&&!((e.length-n)*t.bits&7))throw SyntaxError("Invalid padding");let i=new(r.out??Uint8Array)(n*t.bits/8|0),o=0,s=0,a=0;for(let r=0;r<n;++r){let n=t.codes[e[r]];if(void 0===n)throw SyntaxError("Invalid character "+e[r]);s=s<<t.bits|n,(o+=t.bits)>=8&&(o-=8,i[a++]=255&s>>o)}if(o>=t.bits||255&s<<8-o)throw SyntaxError("Unexpected end of data");return i})(e,ta,t),stringify:(e,t)=>(function(e,t,r={}){let{pad:n=!0}=r,i=(1<<t.bits)-1,o="",s=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|255&e[r],s+=8;s>t.bits;)s-=t.bits,o+=t.chars[i&a>>s];if(s&&(o+=t.chars[i&a<<t.bits-s]),n)for(;o.length*t.bits&7;)o+="=";return o})(e,ta,t)},ta={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},tl=e=>Array.isArray(e)&&e.length>0&&e.every(e=>"string"==typeof e),tu=(e,t)=>{let r=[t].flat().filter(e=>!!e),n=[e].flat().filter(e=>!!e),i=r.length>0&&n.length>0;if(i){if("string"==typeof e){if(!r.includes(e))throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}else if(tl(e)&&!e.some(e=>r.includes(e)))throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}},tc={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512",ES256:"SHA-256",ES384:"SHA-384",ES512:"SHA-512"},th="RSASSA-PKCS1-v1_5",tf="ECDSA",td={RS256:th,RS384:th,RS512:th,ES256:tf,ES384:tf,ES512:tf},tp=Object.keys(tc);async function ty(e,t){let{header:r,signature:n,raw:i}=e,o=new TextEncoder,s=o.encode([i.header,i.payload].join(".")),a=await L.crypto.subtle.importKey("jwk",t,{name:td[r.alg],hash:tc[r.alg]},!1,["verify"]);return L.crypto.subtle.verify("RSASSA-PKCS1-v1_5",a,n,s)}function tg(e){let t=(e||"").toString().split(".");if(3!==t.length)throw new eV({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});let[r,n,i]=t,o=new TextDecoder,s=JSON.parse(o.decode(ts.parse(r,{loose:!0}))),a=JSON.parse(o.decode(ts.parse(n,{loose:!0}))),l=ts.parse(i,{loose:!0});return{header:s,payload:a,signature:l,raw:{header:r,payload:n,signature:i,text:e}}}async function tm(e,{audience:t,authorizedParties:r,clockSkewInSeconds:n,clockSkewInMs:i,issuer:o,key:s}){let a;let l=i||n||5e3,u=tg(e),{header:c,payload:h}=u,{typ:f,alg:d}=c;if(void 0!==f&&"JWT"!==f)throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(f)}. Expected "JWT".`});if(!tc[d])throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(d)}. Supported: ${tp}.`});let{azp:p,sub:y,aud:g,iss:m,iat:b,exp:v,nbf:w}=h;if("string"!=typeof y)throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(y)}.`});if(tu([g],[t]),p&&r&&r.length>0&&!r.includes(p))throw new eV({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(p)}. Expected "${r}".`});if("function"!=typeof o||o(m)){if("string"==typeof o&&m&&m!==o)throw new eV({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(u.payload.iss)}. Expected "${o}".`})}else throw new eV({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."});if("number"!=typeof v)throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(v)}. Expected number.`});let S=new Date(Date.now()),A=new Date(0);A.setUTCSeconds(v);let _=A.getTime()<=S.getTime()-l;if(_)throw new eV({reason:"token-expired",message:`JWT is expired. Expiry date: ${A}, Current date: ${S}.`});if(void 0!==w){if("number"!=typeof w)throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(w)}. Expected number.`});let e=new Date(0);e.setUTCSeconds(w);let t=e.getTime()>S.getTime()+l;if(t)throw new eV({action:"Make sure your system clock is in sync (e.g. turn off and on automatic time synchronization).",reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${e}; Current date: ${S};`})}if(void 0!==b){if("number"!=typeof b)throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(b)}. Expected number.`});let e=new Date(0);e.setUTCSeconds(b);let t=e.getTime()>S.getTime()+l;if(t)throw new eV({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${e}; Current date: ${S};`})}try{a=await ty(u,s)}catch(e){throw new eV({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${e}`})}if(!a)throw new eV({reason:"token-invalid-signature",message:"JWT signature is invalid."});return h}var tb={},tv=0;function tw(e,t=36e5){tb[e.kid]=e,tv=Date.now(),t>=0&&setTimeout(()=>{e?delete tb[e.kid]:tb={}},t)}var tS="local";async function tA({apiKey:e,secretKey:t,apiUrl:r=Q,apiVersion:n="v1",issuer:i,kid:o,jwksCacheTtlInMs:s=36e5,skipJwksCache:a}){let l=!tb[o]&&Date.now()-tv>=3e5;if(a||l){let o;let a=t||e;if(a)o=()=>tk(r,a,n);else if(i)o=()=>t_(i);else throw new eV({action:"Contact support@clerk.com",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});let{keys:l}=await eD(o);if(!l||!l.length)throw new eV({action:"Contact support@clerk.com",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:"jwk-remote-failed-to-load"});l.forEach(e=>tw(e,s))}let u=tb[o];if(!u)throw new eV({action:"Contact support@clerk.com",message:`Unable to find a signing key in JWKS that matches the kid='${o}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT.`,reason:"jwk-remote-missing"});return u}async function t_(e){let t=new URL(e);t.pathname=g(t.pathname,".well-known/jwks.json");let r=await L.fetch(t.href);if(!r.ok)throw new eV({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${t.href} with code=${r.status}`,reason:"jwk-remote-failed-to-load"});return r.json()}async function tk(e,t,r){if(!t)throw new eV({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:"jwk-remote-failed-to-load"});let n=new URL(e);n.pathname=g(n.pathname,r,"/jwks");let i=await L.fetch(n.href,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!i.ok){let e=await i.json(),t=to(e?.errors,"clerk_key_invalid");if(t)throw new eV({action:"Contact support@clerk.com",message:t.message,reason:"secret-key-invalid"});throw new eV({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${n.href} with code=${i.status}`,reason:"jwk-remote-failed-to-load"})}return i.json()}async function tE(e,t){let r;let{apiKey:n,secretKey:i,apiUrl:o,apiVersion:s,audience:a,authorizedParties:l,clockSkewInSeconds:u,clockSkewInMs:c,issuer:h,jwksCacheTtlInMs:f,jwtKey:d,skipJwksCache:p}=t,{header:y}=tg(e),{kid:g}=y;if(d)r=function(e){if(!tb[tS]){if(!e)throw new eV({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});let t=e.replace(/(\r\n|\n|\r)/gm,"").replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA","").replace("IDAQAB","").replace(/\+/g,"-").replace(/\//g,"_");tw({kid:"local",kty:"RSA",alg:"RS256",n:t,e:"AQAB"},-1)}return tb[tS]}(d);else if("string"==typeof h)r=await tA({issuer:h,kid:g,jwksCacheTtlInMs:f,skipJwksCache:p});else if(n||i)r=await tA({apiKey:n,secretKey:i,apiUrl:o,apiVersion:s,kid:g,jwksCacheTtlInMs:f,skipJwksCache:p});else throw new eV({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});return await tm(e,{audience:a,authorizedParties:l,clockSkewInSeconds:u,clockSkewInMs:c,key:r,issuer:h})}var tB=e=>!!e?.get("__clerk_satellite_url"),tC=e=>e?.get("__clerk_synced")==="true",tP=e=>e?.get("__clerk_referrer_primary")==="true",tT=/^Mozilla\/|(Amazon CloudFront)/,tx=e=>tT.test(e||""),tO=e=>{let{apiKey:t,secretKey:r,userAgent:n}=e,i=r||t||"";if(eH(i)&&!tx(n))return e9(e,"header-missing-non-browser")},tN=e=>{let{origin:t,host:r,forwardedHost:n,forwardedProto:i}=e,o=t&&ti({originURL:new URL(t),host:r,forwardedHost:n,forwardedProto:i});if(o)return e9(e,"header-missing-cors")},tI=e=>{let{apiKey:t,secretKey:r,isSatellite:n,searchParams:i}=e,o=eH(r||t||"");if(o&&!n&&tB(i))return e7(e,"primary-responds-to-syncing")},tR=e=>{let{apiKey:t,secretKey:r,clientUat:n}=e,i=eH(r||t||"");if(i&&!n)return e7(e,"uat-missing")},tK=e=>{let{apiKey:t,secretKey:r,referrer:n,host:i,forwardedHost:o,forwardedProto:s}=e,a=n&&ti({originURL:new URL(n),host:i,forwardedHost:o,forwardedProto:s}),l=r||t||"";if(eH(l)&&a)return e7(e,"cross-origin-referrer")},tU=e=>{let{apiKey:t,secretKey:r,isSatellite:n,searchParams:i}=e,o=r||t||"";if(n&&tP(i)&&eH(o))return e7(e,"satellite-returns-from-primary")},tL=e=>{let{apiKey:t,secretKey:r,clientUat:n,cookieToken:i}=e,o=r||t||"";if(function(e){return e.startsWith("live_")||e.startsWith("sk_live_")}(o)&&!n&&!i)return e9(e,"cookie-and-uat-missing")},tj=e=>{let{clientUat:t}=e;if("0"===t)return e9(e,"standard-signed-out")},tM=e=>{let{clientUat:t,cookieToken:r}=e;if(t&&Number.parseInt(t)>0&&!r)return e7(e,"cookie-missing")},tD=async e=>{let{headerToken:t}=e,r=await t$(e,t);return await e5(e,r)},tH=async e=>{let{cookieToken:t,clientUat:r}=e,n=await t$(e,t),i=await e5(e,n),o=i.toAuth().sessionClaims,s=o.iat<Number.parseInt(r);return!r||s?e7(e,"cookie-outdated"):i};async function tq(e,t){for(let r of t){let t=await r(e);if(t)return t}return e9(e,"unexpected-error")}async function t$(e,t){let r;let{isSatellite:n,proxyUrl:i}=e;return r=n?null:i||(e=>e.startsWith("https://clerk.")||e.includes(".clerk.accounts")),tE(t,{...e,issuer:r})}var tz=e=>{let{clientUat:t,isSatellite:r,searchParams:n,userAgent:i}=e,o=!t||"0"===t;return r&&o&&!tx(i)?e9(e,"satellite-needs-syncing"):r&&o&&!tC(n)?e7(e,"satellite-needs-syncing"):void 0};async function tJ(e){let{cookies:t,headers:r,searchParams:n}=e0(e?.request);async function i(){try{let t=await tq(e,[tD]);return t}catch(e){return s(e,"header")}}async function o(){try{let t=await tq(e,[tN,tO,tz,tU,tI,tL,tR,tK,tM,tj,tH]);return t}catch(e){return s(e,"cookie")}}function s(t,r){if(t instanceof eV){t.tokenCarrier=r;let n=["token-expired","token-not-active-yet"].includes(t.reason);return n?"header"===r?function(e,t,r=""){let{frontendApi:n,publishableKey:i,isSatellite:o,domain:s,signInUrl:a,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:c}=e;return{status:"unknown",reason:t,message:r,frontendApi:n,publishableKey:i,isSatellite:o,domain:s,signInUrl:a,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:c,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null}}(e,t.reason,t.getFullMessage()):e7(e,t.reason,t.getFullMessage()):e9(e,t.reason,t.getFullMessage())}return e9(e,"unexpected-error",t.message)}return(en((e={...e,frontendApi:ez(e.publishableKey)?.frontendApi||e.frontendApi,apiUrl:e.apiUrl||Q,apiVersion:e.apiVersion||"v1",headerToken:e6(e.headerToken||r?.(er.Headers.Authorization)),cookieToken:e.cookieToken||t?.(er.Cookies.Session),clientUat:e.clientUat||t?.(er.Cookies.ClientUat),origin:e.origin||r?.(er.Headers.Origin),host:e.host||r?.(er.Headers.Host),forwardedHost:e.forwardedHost||r?.(er.Headers.ForwardedHost),forwardedPort:e.forwardedPort||r?.(er.Headers.ForwardedPort),forwardedProto:e.forwardedProto||r?.(er.Headers.ForwardedProto),referrer:e.referrer||r?.(er.Headers.Referrer),userAgent:e.userAgent||r?.(er.Headers.UserAgent),searchParams:e.searchParams||n||void 0}).secretKey||e.apiKey),e.isSatellite&&(function(e,t){if(!e&&eH(t))throw Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}(e.signInUrl,e.secretKey||e.apiKey),function(e){if(!e)throw Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}(e.proxyUrl||e.domain)),e.headerToken)?i():o()}var tV=e=>{let{frontendApi:t,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:o,message:s,publishableKey:a,isSatellite:l,domain:u}=e;return{frontendApi:t,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:o,message:s,publishableKey:a,isSatellite:l,domain:u}};function tF(e){let{apiClient:t}=e,{apiKey:r="",secretKey:n="",jwtKey:i="",apiUrl:o=Q,apiVersion:s="v1",frontendApi:a="",proxyUrl:l="",publishableKey:u="",isSatellite:c=!1,domain:h="",audience:f="",userAgent:d}=e.options;return{authenticateRequest:({apiKey:e,secretKey:t,audience:d,frontendApi:p,proxyUrl:y,publishableKey:g,jwtKey:m,isSatellite:b,domain:v,searchParams:w,...S})=>tJ({...S,apiKey:e||r,secretKey:t||n,audience:d||f,apiUrl:o,apiVersion:s,frontendApi:p||a,proxyUrl:y||l,publishableKey:g||u,isSatellite:b||c,domain:v||h,jwtKey:m||i,searchParams:w}),localInterstitial:({frontendApi:e,publishableKey:t,proxyUrl:r,isSatellite:n,domain:i,...o})=>eF({...o,frontendApi:e||a,proxyUrl:r||l,publishableKey:t||u,isSatellite:n||c,domain:i||h}),remotePublicInterstitial:({frontendApi:e,publishableKey:t,proxyUrl:r,isSatellite:n,domain:i,userAgent:s,...f})=>eW({...f,apiUrl:o,frontendApi:e||a,publishableKey:t||u,proxyUrl:r||l,isSatellite:n||c,domain:i||h,userAgent:s||d}),remotePrivateInterstitial:()=>t.interstitial.getInterstitial(),remotePublicInterstitialUrl:eG,debugRequestState:tV}}var tW=(e,t)=>{let r;if(e.startsWith("http"))r=new URL(e);else{if(!t||!t.startsWith("http"))throw Error("destination url or return back url should be an absolute path url!");let n=new URL(t);r=new URL(e,n.origin)}return t&&r.searchParams.set("redirect_url",t),r.toString()},tG="Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.";function tY({redirectAdapter:e,signUpUrl:t,signInUrl:r,frontendApi:n,publishableKey:i}){n||(n=ez(i)?.frontendApi);let o=function(e){if(!e)return"";let t=e.replace(/(clerk\.accountsstage\.)/,"accountsstage.").replace(/(clerk\.accounts\.|clerk\.)/,"accounts.");return`https://${t}`}(n);return{redirectToSignUp:({returnBackUrl:r}={})=>{if(!t&&!o)throw Error(tG);let n=`${o}/sign-up`;return e(tW(t||n,r))},redirectToSignIn:({returnBackUrl:t}={})=>{if(!r&&!o)throw Error(tG);let n=`${o}/sign-in`;return e(tW(r||n,t))}}}function tX(e){let t={...e},r=eN(t),n=tF({options:t,apiClient:r});return{...r,...n,__unstable_options:t}}},35788:(e,t,r)=>{let n;try{(n=r(6005).webcrypto)||(n=new(r(21604)).w)}catch(e){n=new(r(21604)).w}e.exports=n},86935:(e,t,r)=>{let{fetch:n,Blob:i,FormData:o,Headers:s,Request:a,Response:l,AbortController:u}=r(60013);e.exports=n,e.exports.RuntimeBlob=i,e.exports.RuntimeFormData=o,e.exports.RuntimeHeaders=s,e.exports.RuntimeRequest=a,e.exports.RuntimeResponse=l,e.exports.RuntimeAbortController=u},98620:(e,t,r)=>{r.d(t,{El:()=>q,CH:()=>$,ar:()=>z});var n=r(53830),i=r.n(n);let o=e=>({...e,frontendApi:e.frontendApi||process.env.NEXT_PUBLIC_CLERK_FRONTEND_API||"",publishableKey:e.publishableKey||"pk_test_aW50ZW5zZS13b2xmLTcyLmNsZXJrLmFjY291bnRzLmRldiQ",clerkJSUrl:e.clerkJSUrl||process.env.NEXT_PUBLIC_CLERK_JS,clerkJSVersion:e.clerkJSVersion||process.env.NEXT_PUBLIC_CLERK_JS_VERSION,proxyUrl:e.proxyUrl||process.env.NEXT_PUBLIC_CLERK_PROXY_URL||"",domain:e.domain||process.env.NEXT_PUBLIC_CLERK_DOMAIN||"",isSatellite:e.isSatellite||"true"===process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE,signInUrl:e.signInUrl||"/sign-in",signUpUrl:e.signUpUrl||"/sign-up",afterSignInUrl:e.afterSignInUrl||"/",afterSignUpUrl:e.afterSignUpUrl||"/onboarding"});var s=r(17536);let a=(0,s.createProxy)(String.raw`C:\Users\lynda\OneDrive\Desktop\GitHub2_Projects\threads\node_modules\@clerk\nextjs\dist\esm\app-router\client\ClerkProvider.js`),{__esModule:l,$$typeof:u}=a;a.default;let c=a.ClientClerkProvider,h=()=>"Clerk: auth() was called but it looks like you aren't using `authMiddleware` in your middleware file. Please use `authMiddleware` and make sure your middleware matcher is configured correctly and it matches this route or page. See https://clerk.com/docs/quickstarts/get-started-with-nextjs";var f=r(78912);let d=e=>{if(!e||"string"!=typeof e)return e;try{return(e||"").replace(/^(sk_(live|test)_)(.+?)(.{3})$/,"$1*********$4")}catch(e){return""}},p=e=>(Array.isArray(e)?e:[e]).map(e=>{if("string"==typeof e)return d(e);let t=Object.fromEntries(Object.entries(e).map(([e,t])=>[e,d(t)]));return JSON.stringify(t,null,2)}).join(", "),y=(e,t)=>()=>{let r=[],n=!1;return{enable:()=>{n=!0},debug:(...e)=>{n&&r.push(e.map(e=>"function"==typeof e?e():e))},commit:()=>{if(n){let n=`Clerk debug start :: ${e}
${r.map(e=>t(e)).map(e=>`-- ${e}
`).join("")}`;process.env.VERCEL?console.log(function(e,t){let r=new TextEncoder,n=new TextDecoder("utf-8"),i=r.encode(e),o=i.slice(0,4096);return n.decode(o).replace(/\uFFFD/g,"")}(n,0)):console.log(n)}}}},g=(e,t)=>(...r)=>{let n="string"==typeof e?y(e,p):e,i=n(),o=t(i);try{let e=o(...r);if("object"==typeof e&&"then"in e&&"function"==typeof e.then)return e.then(e=>(i.commit(),e)).catch(e=>{throw i.commit(),e});return i.commit(),e}catch(e){throw i.commit(),e}};process.env.CLERK_JS_VERSION,process.env.NEXT_PUBLIC_CLERK_JS_VERSION,process.env.NEXT_PUBLIC_CLERK_JS;let m=process.env.CLERK_API_URL||"https://api.clerk.dev",b=process.env.CLERK_API_VERSION||"v1",v=process.env.CLERK_API_KEY||"",w=process.env.CLERK_SECRET_KEY||"",S=process.env.NEXT_PUBLIC_CLERK_FRONTEND_API||"",A=process.env.NEXT_PUBLIC_CLERK_DOMAIN||"",_=process.env.NEXT_PUBLIC_CLERK_PROXY_URL||"",k="true"===process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE,E=(0,f.Clerk)({apiKey:v,secretKey:w,apiUrl:m,apiVersion:b,userAgent:"@clerk/nextjs",proxyUrl:_,domain:A,isSatellite:k});var B=r(66886);function C(e,t){var r;return((r=f.constants.Attributes[t])in e?e[r]:void 0)||P(e,f.constants.Headers[t])||("AuthStatus"===t?function(e,t){let r;if(T(e))return e.nextUrl.searchParams.get(t);if("query"in e&&(r=e.query[t]),!r){let n=(e.url||"").split("?")[1];r=new URLSearchParams(n).get(t)}return r}(e,f.constants.SearchParams.AuthStatus):void 0)}function P(e,t){return T(e)?e.headers.get(t):e.headers[t]||e.headers[t.toLowerCase()]||e.socket?._httpMessage?.getHeader(t)}function T(e){try{let{headers:t,nextUrl:r,cookies:n}=e||{};return"function"==typeof t?.get&&"function"==typeof r?.searchParams.get&&"function"==typeof n?.get}catch(e){return!1}}let x=(e,t)=>{let r={...t};return{...e,__clerk_ssr_state:r}},O=({debugLoggerName:e,noAuthStatusMessage:t})=>g(e,e=>(r,n)=>{let i="true"===P(r,f.constants.Headers.EnableDebug);i&&e.enable();let o=C(r,"AuthStatus"),s=C(r,"AuthMessage"),a=C(r,"AuthReason");if(e.debug("Headers debug",{authStatus:o,authMessage:s,authReason:a}),!o)throw Error(t);let l={apiKey:n?.apiKey||v,secretKey:n?.secretKey||w,apiUrl:m,apiVersion:b,authStatus:o,authMessage:s,authReason:a};if(e.debug("Options debug",l),o!==f.AuthStatus.SignedIn)return(0,f.signedOutAuthObject)(l);let u=I(r);return e.debug("JWT debug",u.raw.text),(0,f.signedInAuthObject)(u.payload,{...l,token:u.raw.text})});O({debugLoggerName:"getAuth()",noAuthStatusMessage:'You need to use "authMiddleware" (or the deprecated "withClerkMiddleware") in your Next.js middleware file. You also need to make sure that your middleware matcher is configured correctly and matches this route or page. See https://clerk.com/docs/quickstarts/get-started-with-nextjs'});let N=(e,t={})=>{let r;let n=C(e,"AuthStatus"),i=C(e,"AuthMessage"),o=C(e,"AuthReason"),s={apiKey:v,secretKey:w,apiUrl:m,apiVersion:b,authStatus:n,authMessage:i,authReason:o};if(n&&n===f.AuthStatus.SignedIn){let{payload:t,raw:n}=I(e);r=(0,f.signedInAuthObject)(t,{...s,token:n.text})}else r=(0,f.signedOutAuthObject)(s);let a=(0,f.makeAuthObjectSerializable)((0,f.sanitizeAuthObject)({...r,...t}));return x({},a)},I=e=>{let t=function(e,t){if(T(e)){let r=e.cookies.get(t);if(!r)return;return"string"==typeof r?r:r.value}return e.cookies[t]}(e,f.constants.Cookies.Session),r=P(e,"authorization")?.replace("Bearer ","");return(0,f.decodeJwt)(t||r||"")};var R=r(32160);let K=()=>{try{let{headers:e}=r(59859);return new R.Z("https://placeholder.com",{headers:e()})}catch(e){if(e&&"message"in e&&"string"==typeof e.message&&e.message.toLowerCase().includes("dynamic server usage"))throw e;throw Error(`Clerk: auth() and currentUser() are only supported in App Router (/app directory).
If you're using /pages, try getAuth() instead.
Original error: ${e}`)}},U=()=>O({debugLoggerName:"auth()",noAuthStatusMessage:h()})(K()),L=()=>N(K());async function j(){let{userId:e}=U();return e?E.users.getUser(e):null}let M=(e,t,r)=>(e.headers.set(t,r),e);r(18624);let{redirectToSignIn:D,redirectToSignUp:H}=(0,f.redirect)({redirectAdapter:e=>{let t=B.Z.redirect(e);return M(t,f.constants.Headers.ClerkRedirectTo,"true")},signInUrl:"/sign-in",signUpUrl:"/sign-up",publishableKey:"pk_test_aW50ZW5zZS13b2xmLTcyLmNsZXJrLmFjY291bnRzLmRldiQ",frontendApi:S}),q=function(e){let{children:t,...r}=e,n=L()?.__clerk_ssr_state;return i().createElement(c,{...o(r),initialState:n},t)},$=function(e){let{children:t}=e,{userId:r}=U();return r?i().createElement(i().Fragment,null,t):null},z=j},5213:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnConvert=void 0;let n=r(94549),i=r(81648),o=r(14969),s=r(67631);class a{static serialize(e){return s.AsnSerializer.serialize(e)}static parse(e,t){return o.AsnParser.parse(e,t)}static toString(e){let t=i.BufferSourceConverter.isBufferSource(e)?i.BufferSourceConverter.toArrayBuffer(e):a.serialize(e),r=n.fromBER(t);if(-1===r.offset)throw Error(`Cannot decode ASN.1 data. ${r.result.error}`);return r.result.toString()}}t.AsnConvert=a},16954:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultConverter=t.AsnNullConverter=t.AsnGeneralizedTimeConverter=t.AsnUTCTimeConverter=t.AsnCharacterStringConverter=t.AsnGeneralStringConverter=t.AsnVisibleStringConverter=t.AsnGraphicStringConverter=t.AsnIA5StringConverter=t.AsnVideotexStringConverter=t.AsnTeletexStringConverter=t.AsnPrintableStringConverter=t.AsnNumericStringConverter=t.AsnUniversalStringConverter=t.AsnBmpStringConverter=t.AsnUtf8StringConverter=t.AsnConstructedOctetStringConverter=t.AsnOctetStringConverter=t.AsnBooleanConverter=t.AsnObjectIdentifierConverter=t.AsnBitStringConverter=t.AsnIntegerBigIntConverter=t.AsnIntegerArrayBufferConverter=t.AsnEnumeratedConverter=t.AsnIntegerConverter=t.AsnAnyConverter=void 0;let n=r(94549),i=r(36348),o=r(38525);function s(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}t.AsnAnyConverter={fromASN:e=>e instanceof n.Null?null:e.valueBeforeDecodeView,toASN:e=>{if(null===e)return new n.Null;let t=n.fromBER(e);if(t.result.error)throw Error(t.result.error);return t.result}},t.AsnIntegerConverter={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new n.Integer({value:+e})},t.AsnEnumeratedConverter={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new n.Enumerated({value:e})},t.AsnIntegerArrayBufferConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new n.Integer({valueHex:e})},t.AsnIntegerBigIntConverter={fromASN:e=>e.toBigInt(),toASN:e=>n.Integer.fromBigInt(e)},t.AsnBitStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new n.BitString({valueHex:e})},t.AsnObjectIdentifierConverter={fromASN:e=>e.valueBlock.toString(),toASN:e=>new n.ObjectIdentifier({value:e})},t.AsnBooleanConverter={fromASN:e=>e.valueBlock.value,toASN:e=>new n.Boolean({value:e})},t.AsnOctetStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new n.OctetString({valueHex:e})},t.AsnConstructedOctetStringConverter={fromASN:e=>new o.OctetString(e.getValue()),toASN:e=>e.toASN()},t.AsnUtf8StringConverter=s(n.Utf8String),t.AsnBmpStringConverter=s(n.BmpString),t.AsnUniversalStringConverter=s(n.UniversalString),t.AsnNumericStringConverter=s(n.NumericString),t.AsnPrintableStringConverter=s(n.PrintableString),t.AsnTeletexStringConverter=s(n.TeletexString),t.AsnVideotexStringConverter=s(n.VideotexString),t.AsnIA5StringConverter=s(n.IA5String),t.AsnGraphicStringConverter=s(n.GraphicString),t.AsnVisibleStringConverter=s(n.VisibleString),t.AsnGeneralStringConverter=s(n.GeneralString),t.AsnCharacterStringConverter=s(n.CharacterString),t.AsnUTCTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new n.UTCTime({valueDate:e})},t.AsnGeneralizedTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new n.GeneralizedTime({valueDate:e})},t.AsnNullConverter={fromASN:()=>null,toASN:()=>new n.Null},t.defaultConverter=function(e){switch(e){case i.AsnPropTypes.Any:return t.AsnAnyConverter;case i.AsnPropTypes.BitString:return t.AsnBitStringConverter;case i.AsnPropTypes.BmpString:return t.AsnBmpStringConverter;case i.AsnPropTypes.Boolean:return t.AsnBooleanConverter;case i.AsnPropTypes.CharacterString:return t.AsnCharacterStringConverter;case i.AsnPropTypes.Enumerated:return t.AsnEnumeratedConverter;case i.AsnPropTypes.GeneralString:return t.AsnGeneralStringConverter;case i.AsnPropTypes.GeneralizedTime:return t.AsnGeneralizedTimeConverter;case i.AsnPropTypes.GraphicString:return t.AsnGraphicStringConverter;case i.AsnPropTypes.IA5String:return t.AsnIA5StringConverter;case i.AsnPropTypes.Integer:return t.AsnIntegerConverter;case i.AsnPropTypes.Null:return t.AsnNullConverter;case i.AsnPropTypes.NumericString:return t.AsnNumericStringConverter;case i.AsnPropTypes.ObjectIdentifier:return t.AsnObjectIdentifierConverter;case i.AsnPropTypes.OctetString:return t.AsnOctetStringConverter;case i.AsnPropTypes.PrintableString:return t.AsnPrintableStringConverter;case i.AsnPropTypes.TeletexString:return t.AsnTeletexStringConverter;case i.AsnPropTypes.UTCTime:return t.AsnUTCTimeConverter;case i.AsnPropTypes.UniversalString:return t.AsnUniversalStringConverter;case i.AsnPropTypes.Utf8String:return t.AsnUtf8StringConverter;case i.AsnPropTypes.VideotexString:return t.AsnVideotexStringConverter;case i.AsnPropTypes.VisibleString:return t.AsnVisibleStringConverter;default:return null}}},34629:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnProp=t.AsnSequenceType=t.AsnSetType=t.AsnChoiceType=t.AsnType=void 0;let n=r(16954),i=r(36348),o=r(39457);t.AsnType=e=>t=>{let r;o.schemaStorage.has(t)?r=o.schemaStorage.get(t):(r=o.schemaStorage.createDefault(t),o.schemaStorage.set(t,r)),Object.assign(r,e)},t.AsnChoiceType=()=>(0,t.AsnType)({type:i.AsnTypeTypes.Choice}),t.AsnSetType=e=>(0,t.AsnType)({type:i.AsnTypeTypes.Set,...e}),t.AsnSequenceType=e=>(0,t.AsnType)({type:i.AsnTypeTypes.Sequence,...e}),t.AsnProp=e=>(t,r)=>{let i;o.schemaStorage.has(t.constructor)?i=o.schemaStorage.get(t.constructor):(i=o.schemaStorage.createDefault(t.constructor),o.schemaStorage.set(t.constructor,i));let s=Object.assign({},e);if("number"==typeof s.type&&!s.converter){let i=n.defaultConverter(e.type);if(!i)throw Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`);s.converter=i}i.items[r]=s}},36348:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnPropTypes=t.AsnTypeTypes=void 0,function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"}(t.AsnTypeTypes||(t.AsnTypeTypes={})),function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"}(t.AsnPropTypes||(t.AsnPropTypes={}))},66374:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(15803);n.__exportStar(r(38042),t)},38042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnSchemaValidationError=void 0,t.AsnSchemaValidationError=class extends Error{constructor(){super(...arguments),this.schemas=[]}}},52174:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isArrayEqual=t.isTypeOfArray=t.isConvertible=void 0,t.isConvertible=function e(t){return"function"==typeof t&&t.prototype?!!t.prototype.toASN&&!!t.prototype.fromASN||e(t.prototype):!!(t&&"object"==typeof t&&"toASN"in t&&"fromASN"in t)},t.isTypeOfArray=function e(t){var r;if(t){let n=Object.getPrototypeOf(t);return(null===(r=null==n?void 0:n.prototype)||void 0===r?void 0:r.constructor)===Array||e(n)}return!1},t.isArrayEqual=function(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==n[t])return!1;return!0}},98763:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnSerializer=t.AsnParser=t.AsnPropTypes=t.AsnTypeTypes=t.AsnSetType=t.AsnSequenceType=t.AsnChoiceType=t.AsnType=t.AsnProp=void 0;let n=r(15803);n.__exportStar(r(16954),t),n.__exportStar(r(38525),t);var i=r(34629);Object.defineProperty(t,"AsnProp",{enumerable:!0,get:function(){return i.AsnProp}}),Object.defineProperty(t,"AsnType",{enumerable:!0,get:function(){return i.AsnType}}),Object.defineProperty(t,"AsnChoiceType",{enumerable:!0,get:function(){return i.AsnChoiceType}}),Object.defineProperty(t,"AsnSequenceType",{enumerable:!0,get:function(){return i.AsnSequenceType}}),Object.defineProperty(t,"AsnSetType",{enumerable:!0,get:function(){return i.AsnSetType}});var o=r(36348);Object.defineProperty(t,"AsnTypeTypes",{enumerable:!0,get:function(){return o.AsnTypeTypes}}),Object.defineProperty(t,"AsnPropTypes",{enumerable:!0,get:function(){return o.AsnPropTypes}});var s=r(14969);Object.defineProperty(t,"AsnParser",{enumerable:!0,get:function(){return s.AsnParser}});var a=r(67631);Object.defineProperty(t,"AsnSerializer",{enumerable:!0,get:function(){return a.AsnSerializer}}),n.__exportStar(r(66374),t),n.__exportStar(r(67656),t),n.__exportStar(r(5213),t)},67656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnArray=void 0,t.AsnArray=class extends Array{constructor(e=[]){if("number"==typeof e)super(e);else for(let t of(super(),e))this.push(t)}}},14969:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnParser=void 0;let n=r(94549),i=r(36348),o=r(16954),s=r(66374),a=r(52174),l=r(39457);t.AsnParser=class{static parse(e,t){let r=n.fromBER(e);if(r.result.error)throw Error(r.result.error);let i=this.fromASN(r.result,t);return i}static fromASN(e,t){var r;try{if((0,a.isConvertible)(t)){let r=new t;return r.fromASN(e)}let u=l.schemaStorage.get(t);l.schemaStorage.cache(t);let c=u.schema;if(e.constructor===n.Constructed&&u.type!==i.AsnTypeTypes.Choice)for(let t in c=new n.Constructed({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:u.schema.valueBlock.value}),u.items)delete e[t];let h=n.compareSchema({},e,c);if(!h.verified)throw new s.AsnSchemaValidationError(`Data does not match to ${t.name} ASN1 schema. ${h.result.error}`);let f=new t;if((0,a.isTypeOfArray)(t)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let r=u.itemType;if("number"!=typeof r)return t.from(e.valueBlock.value,e=>this.fromASN(e,r));{let n=o.defaultConverter(r);if(!n)throw Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`);return t.from(e.valueBlock.value,e=>n.fromASN(e))}}for(let e in u.items){let t=h.result[e];if(!t)continue;let o=u.items[e],s=o.type;if("number"==typeof s||(0,a.isConvertible)(s)){let l=null!==(r=o.converter)&&void 0!==r?r:(0,a.isConvertible)(s)?new s:null;if(!l)throw Error("Converter is empty");if(o.repeated){if(o.implicit){let r="sequence"===o.repeated?n.Sequence:n.Set,i=new r;i.valueBlock=t.valueBlock;let s=n.fromBER(i.toBER(!1));if(-1===s.offset)throw Error(`Cannot parse the child item. ${s.result.error}`);if(!("value"in s.result.valueBlock&&Array.isArray(s.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let a=s.result.valueBlock.value;f[e]=Array.from(a,e=>l.fromASN(e))}else f[e]=Array.from(t,e=>l.fromASN(e))}else{let r=t;if(o.implicit){let e;if((0,a.isConvertible)(s))e=new s().toSchema("");else{let t=i.AsnPropTypes[s],r=n[t];if(!r)throw Error(`Cannot get '${t}' class from asn1js module`);e=new r}e.valueBlock=r.valueBlock,r=n.fromBER(e.toBER(!1)).result}f[e]=l.fromASN(r)}}else if(o.repeated){if(!Array.isArray(t))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");f[e]=Array.from(t,e=>this.fromASN(e,s))}else f[e]=this.fromASN(t,s)}return f}catch(e){throw e instanceof s.AsnSchemaValidationError&&e.schemas.push(t.name),e}}}},43659:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnSchemaStorage=void 0;let n=r(94549),i=r(36348),o=r(52174);t.AsnSchemaStorage=class{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=!1){let r=this.items.get(e);if(!r)throw Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(t&&!r.schema)throw Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return r}cache(e){let t=this.get(e);t.schema||(t.schema=this.create(e,!0))}createDefault(e){let t={type:i.AsnTypeTypes.Sequence,items:{}},r=this.findParentSchema(e);return r&&(Object.assign(t,r),t.items=Object.assign({},t.items,r.items)),t}create(e,t){let r=this.items.get(e)||this.createDefault(e),s=[];for(let e in r.items){let a;let l=r.items[e],u=t?e:"";if("number"==typeof l.type){let e=i.AsnPropTypes[l.type],t=n[e];if(!t)throw Error(`Cannot get ASN1 class by name '${e}'`);a=new t({name:u})}else if((0,o.isConvertible)(l.type)){let e=new l.type;a=e.toSchema(u)}else if(l.optional){let e=this.get(l.type);e.type===i.AsnTypeTypes.Choice?a=new n.Any({name:u}):(a=this.create(l.type,!1)).name=u}else a=new n.Any({name:u});let c=!!l.optional||void 0!==l.defaultValue;if(l.repeated){a.name="";let e="set"===l.repeated?n.Set:n.Sequence;a=new e({name:"",value:[new n.Repeated({name:u,value:a})]})}if(null!==l.context&&void 0!==l.context){if(l.implicit){if("number"==typeof l.type||(0,o.isConvertible)(l.type)){let e=l.repeated?n.Constructed:n.Primitive;s.push(new e({name:u,optional:c,idBlock:{tagClass:3,tagNumber:l.context}}))}else{this.cache(l.type);let e=!!l.repeated,t=e?a:this.get(l.type,!0).schema;t="valueBlock"in t?t.valueBlock.value:t.value,s.push(new n.Constructed({name:e?"":u,optional:c,idBlock:{tagClass:3,tagNumber:l.context},value:t}))}}else s.push(new n.Constructed({optional:c,idBlock:{tagClass:3,tagNumber:l.context},value:[a]}))}else a.optional=c,s.push(a)}switch(r.type){case i.AsnTypeTypes.Sequence:return new n.Sequence({value:s,name:""});case i.AsnTypeTypes.Set:return new n.Set({value:s,name:""});case i.AsnTypeTypes.Choice:return new n.Choice({value:s,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=Object.getPrototypeOf(e);if(t){let e=this.items.get(t);return e||this.findParentSchema(t)}return null}}},67631:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AsnSerializer=void 0;let n=r(94549),i=r(16954),o=r(36348),s=r(52174),a=r(39457);class l{static serialize(e){return e instanceof n.BaseBlock?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){let t;if(e&&"object"==typeof e&&(0,s.isConvertible)(e))return e.toASN();if(!(e&&"object"==typeof e))throw TypeError("Parameter 1 should be type of Object.");let r=e.constructor,u=a.schemaStorage.get(r);a.schemaStorage.cache(r);let c=[];if(u.itemType){if(!Array.isArray(e))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof u.itemType){let t=i.defaultConverter(u.itemType);if(!t)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);c=e.map(e=>t.toASN(e))}else c=e.map(e=>this.toAsnItem({type:u.itemType},"[]",r,e))}else for(let t in u.items){let i=u.items[t],o=e[t];if(void 0===o||i.defaultValue===o||"object"==typeof i.defaultValue&&"object"==typeof o&&(0,s.isArrayEqual)(this.serialize(i.defaultValue),this.serialize(o)))continue;let a=l.toAsnItem(i,t,r,o);if("number"==typeof i.context){if(i.implicit){if(!i.repeated&&("number"==typeof i.type||(0,s.isConvertible)(i.type))){let e={};e.valueHex=a instanceof n.Null?a.valueBeforeDecodeView:a.valueBlock.toBER(),c.push(new n.Primitive({optional:i.optional,idBlock:{tagClass:3,tagNumber:i.context},...e}))}else c.push(new n.Constructed({optional:i.optional,idBlock:{tagClass:3,tagNumber:i.context},value:a.valueBlock.value}))}else c.push(new n.Constructed({optional:i.optional,idBlock:{tagClass:3,tagNumber:i.context},value:[a]}))}else i.repeated?c=c.concat(a):c.push(a)}switch(u.type){case o.AsnTypeTypes.Sequence:t=new n.Sequence({value:c});break;case o.AsnTypeTypes.Set:t=new n.Set({value:c});break;case o.AsnTypeTypes.Choice:if(!c[0])throw Error(`Schema '${r.name}' has wrong data. Choice cannot be empty.`);t=c[0]}return t}static toAsnItem(e,t,r,i){let s;if("number"==typeof e.type){let a=e.converter;if(!a)throw Error(`Property '${t}' doesn't have converter for type ${o.AsnPropTypes[e.type]} in schema '${r.name}'`);if(e.repeated){if(!Array.isArray(i))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(i,e=>a.toASN(e)),r="sequence"===e.repeated?n.Sequence:n.Set;s=new r({value:t})}else s=a.toASN(i)}else if(e.repeated){if(!Array.isArray(i))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(i,e=>this.toASN(e)),r="sequence"===e.repeated?n.Sequence:n.Set;s=new r({value:t})}else s=this.toASN(i);return s}}t.AsnSerializer=l},39457:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.schemaStorage=void 0;let n=r(43659);t.schemaStorage=new n.AsnSchemaStorage},98107:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BitString=void 0;let n=r(94549),i=r(81648);t.BitString=class{constructor(e,t=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e){if("number"==typeof e)this.fromNumber(e);else if(i.BufferSourceConverter.isBufferSource(e))this.unusedBits=t,this.value=i.BufferSourceConverter.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}}fromASN(e){if(!(e instanceof n.BitString))throw TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new n.BitString({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new n.BitString({name:e})}toNumber(){let e="",t=new Uint8Array(this.value);for(let r of t)e+=r.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let t=e.toString(2),r=t.length+7>>3;this.unusedBits=(r<<3)-t.length;let n=new Uint8Array(r);t=t.padStart(r<<3,"0").split("").reverse().join("");let i=0;for(;i<r;)n[i]=parseInt(t.slice(i<<3,(i<<3)+8),2),i++;this.value=n.buffer}}},38525:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(15803);n.__exportStar(r(98107),t),n.__exportStar(r(10095),t)},10095:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OctetString=void 0;let n=r(94549),i=r(81648);t.OctetString=class{constructor(e){"number"==typeof e?this.buffer=new ArrayBuffer(e):i.BufferSourceConverter.isBufferSource(e)?this.buffer=i.BufferSourceConverter.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}fromASN(e){if(!(e instanceof n.OctetString))throw TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new n.OctetString({valueHex:this.buffer})}toSchema(e){return new n.OctetString({name:e})}}},55632:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e),this.message=e,this.innerError=t}}class n extends r{constructor(e,t,r){super(t,r),this.schema=e}}class i extends n{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class o extends r{}class s extends r{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r),this.schemaName=e}}class a extends i{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema"),this.keys=t,this.errors=r}}function l(e,r){if(!function(e,r){switch(r){case t.JsonPropTypes.Boolean:return"boolean"==typeof e;case t.JsonPropTypes.Number:return"number"==typeof e;case t.JsonPropTypes.String:return"string"==typeof e}return!0}(e,r))throw TypeError(`Value must be ${t.JsonPropTypes[r]}`)}function u(e){return e&&e.prototype?!!e.prototype.toJSON&&!!e.prototype.fromJSON||u(e.prototype):!!(e&&e.toJSON&&e.fromJSON)}!function(e){e[e.Any=0]="Any",e[e.Boolean=1]="Boolean",e[e.Number=2]="Number",e[e.String=3]="String"}(t.JsonPropTypes||(t.JsonPropTypes={}));let c="default",h=new class{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){let t=this.items.get(e)||this.findParentSchema(e);if(!t)throw Error("Cannot get schema for current target");return t}create(e){let t={names:{}},r=this.findParentSchema(e);if(r)for(let e in Object.assign(t,r),t.names={},r.names)t.names[e]=Object.assign({},r.names[e]);return t.target=e,t}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=e.__proto__;if(t){let e=this.items.get(t);return e||this.findParentSchema(t)}return null}};class f{constructor(e){this.pattern=new RegExp(e)}validate(e){let t=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof e)throw new o("Incoming value must be string");if(!t.exec(e))throw new o(`Value doesn't match to pattern '${t.toString()}'`)}}class d{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(l(e,t.JsonPropTypes.Number),!(this.min<=e&&e<=this.max)){let e=this.min===Number.MIN_VALUE?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new o(`Value doesn't match to diapason [${e},${t}]`)}}}class p{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(l(e,t.JsonPropTypes.Number),!(this.min<e&&e<this.max)){let e=this.min===Number.MIN_VALUE?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new o(`Value doesn't match to diapason (${e},${t})`)}}}class y{constructor(e,t,r){this.length=e,this.minLength=t,this.maxLength=r}validate(e){if(void 0!==this.length){if(e.length!==this.length)throw new o(`Value length must be exactly ${this.length}.`);return}if(void 0!==this.minLength&&e.length<this.minLength)throw new o(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&e.length>this.maxLength)throw new o(`Value length must be less than ${this.maxLength}.`)}}class g{constructor(e){this.enumeration=e}validate(e){if(l(e,t.JsonPropTypes.String),!this.enumeration.includes(e))throw new o(`Value must be one of ${this.enumeration.map(e=>`'${e}'`).join(", ")}`)}}class m{static checkValues(e,t){let r=Array.isArray(e)?e:[e];for(let n of r)for(let r of t.validations)r instanceof y&&t.repeated?r.validate(e):r.validate(n)}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e))throw TypeError("Value must be Array");if("number"==typeof t.type){let r=Array.isArray(e)?e:[e];for(let e of r)l(e,t.type)}}static getSchemaByName(e,t=c){return{...e.names[c],...e.names[t]}}}class b extends m{static parse(e,t){let r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){let r=t.targetSchema,n=t.schemaName||c,o=new r;if(u(o))return o.fromJSON(e);let s=h.get(r),l=this.getSchemaByName(s,n),f={};for(let r in t.strictProperty&&!Array.isArray(e)&&b.checkStrictProperty(e,l,s),l)try{let a=l[r],u=a.name||r,c=e[u];if(void 0===c&&(a.optional||void 0!==a.defaultValue))continue;if(!a.optional&&void 0===c)throw new i(s,`Property '${u}' is required.`);if(this.checkTypes(c,a),this.checkValues(c,a),"number"==typeof a.type)a.converter?a.repeated?o[r]=c.map(e=>a.converter.fromJSON(e,o)):o[r]=a.converter.fromJSON(c,o):o[r]=c;else{let e={...t,targetSchema:a.type,schemaName:n};a.repeated?o[r]=c.map(t=>this.fromJSON(t,e)):o[r]=this.fromJSON(c,e)}}catch(e){if(e instanceof i||(e=new i(s,`Property '${r}' is wrong. ${e.message}`,e)),t.strictAllKeys)f[r]=e;else throw e}let d=Object.keys(f);if(d.length)throw new a(s,d,f);return o}static checkStrictProperty(e,t,r){let n=Object.keys(e),i=Object.keys(t),o=[];for(let e of n)-1===i.indexOf(e)&&o.push(e);if(o.length)throw new a(r,o)}}t.JsonError=r,t.JsonParser=b,t.JsonProp=(e={})=>(r,n)=>{let i;let o=`Cannot set type for ${n} property of ${r.constructor.name} schema`;h.has(r.constructor)?(i=h.get(r.constructor)).target!==r.constructor&&(i=h.create(r.constructor),h.set(r.constructor,i)):(i=h.create(r.constructor),h.set(r.constructor,i));let s={type:t.JsonPropTypes.Any,validations:[]},a=Object.assign(s,e);if(a.validations=function(e){let r=[];return e.pattern&&r.push(new f(e.pattern)),(e.type===t.JsonPropTypes.Number||e.type===t.JsonPropTypes.Any)&&((void 0!==e.minInclusive||void 0!==e.maxInclusive)&&r.push(new d(e.minInclusive,e.maxInclusive)),(void 0!==e.minExclusive||void 0!==e.maxExclusive)&&r.push(new p(e.minExclusive,e.maxExclusive)),void 0!==e.enumeration&&r.push(new g(e.enumeration))),(e.type===t.JsonPropTypes.String||e.repeated||e.type===t.JsonPropTypes.Any)&&(void 0!==e.length||void 0!==e.minLength||void 0!==e.maxLength)&&r.push(new y(e.length,e.minLength,e.maxLength)),r}(a),"number"!=typeof a.type&&!h.has(a.type)&&!u(a.type))throw Error(`${o}. Assigning type doesn't have schema.`);for(let t of Array.isArray(e.schema)?e.schema:[e.schema||c]){i.names[t]||(i.names[t]={});let e=i.names[t];e[n]=a}},t.JsonSerializer=class extends m{static serialize(e,t,r,n){let i=this.toJSON(e,t);return JSON.stringify(i,r,n)}static toJSON(e,t={}){let n;let i=t.targetSchema,o=t.schemaName||c;if(u(e))return e.toJSON();if(Array.isArray(e))for(let r of(n=[],e))n.push(this.toJSON(r,t));else if("object"==typeof e){if(i&&!h.has(i))throw new r("Cannot get schema for `targetSchema` param");if(i=i||e.constructor,h.has(i)){let t=h.get(i);n={};let r=this.getSchemaByName(t,o);for(let a in r)try{let t;let l=r[a],u=e[a];if(l.optional&&void 0===u||void 0!==l.defaultValue&&u===l.defaultValue)continue;if(!l.optional&&void 0===u)throw new s(i.name,`Property '${a}' is required.`);t="number"==typeof l.type?l.converter?l.repeated?u.map(t=>l.converter.toJSON(t,e)):l.converter.toJSON(u,e):u:l.repeated?u.map(e=>this.toJSON(e,{schemaName:o})):this.toJSON(u,{schemaName:o}),this.checkTypes(t,l),this.checkValues(t,l),n[l.name||a]=t}catch(e){if(e instanceof s)throw e;throw new s(t.target.name,`Property '${a}' is wrong. ${e.message}`,e)}}else for(let t in n={},e)n[t]=this.toJSON(e[t],{schemaName:o})}else n=e;return n}},t.KeyError=a,t.ParserError=i,t.SerializerError=s,t.TransformError=n,t.ValidationError=o},21604:(e,t,r)=>{/*!
 Copyright (c) Peculiar Ventures, LLC
*/var n=r(87713),i=r(6113),o=r(77282),s=r(15803),a=r(55632),l=r(81648),u=r(98763);function c(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var h=c(n),f=c(i),d=c(o);let p={fromJSON:e=>Buffer.from(l.Convert.FromBase64Url(e)),toJSON:e=>l.Convert.ToBase64Url(e)};class y extends h.CryptoKey{constructor(){super(...arguments),this.data=Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}}s.__decorate([a.JsonProp({name:"ext",type:a.JsonPropTypes.Boolean,optional:!0})],y.prototype,"extractable",void 0),s.__decorate([a.JsonProp({name:"key_ops",type:a.JsonPropTypes.String,repeated:!0,optional:!0})],y.prototype,"usages",void 0),s.__decorate([a.JsonProp({type:a.JsonPropTypes.String})],y.prototype,"kty",void 0),s.__decorate([a.JsonProp({type:a.JsonPropTypes.String,optional:!0})],y.prototype,"alg",void 0);class g extends y{constructor(){super(...arguments),this.kty="oct",this.type="secret"}}class m extends y{}class b extends g{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new h.AlgorithmError("Unsupported algorithm name")}}set alg(e){}}s.__decorate([a.JsonProp({name:"k",converter:p})],b.prototype,"data",void 0);let v=new WeakMap;function w(e){let t=v.get(e);if(!t)throw new h.OperationError("Cannot get CryptoKey from secure storage");return t}function S(e){let t=h.CryptoKey.create(e.algorithm,e.type,e.extractable,e.usages);return Object.freeze(t),v.set(t,e),t}class A{static async generateKey(e,t,r){let n=new b;return n.algorithm=e,n.extractable=t,n.usages=r,n.data=i.randomBytes(e.length>>3),n}static async exportKey(e,t){if(!(t instanceof b))throw Error("key: Is not AesCryptoKey");switch(e.toLowerCase()){case"jwk":return a.JsonSerializer.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new h.OperationError("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,n,i){let o;switch(e.toLowerCase()){case"jwk":o=a.JsonParser.fromJSON(t,{targetSchema:b});break;case"raw":(o=new b).data=Buffer.from(t);break;default:throw new h.OperationError("format: Must be 'jwk' or 'raw'")}switch(o.algorithm=r,o.algorithm.length=o.data.length<<3,o.extractable=n,o.usages=i,o.algorithm.length){case 128:case 192:case 256:break;default:throw new h.OperationError("keyData: Is wrong key length")}return o}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(e,t,Buffer.from(r));case"AES-CTR":return this.encryptAesCTR(e,t,Buffer.from(r));case"AES-GCM":return this.encryptAesGCM(e,t,Buffer.from(r));case"AES-KW":return this.encryptAesKW(e,t,Buffer.from(r));case"AES-ECB":return this.encryptAesECB(e,t,Buffer.from(r));default:throw new h.OperationError("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof b))throw Error("key: Is not AesCryptoKey");switch(e.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(e,t,Buffer.from(r));case"AES-CTR":return this.decryptAesCTR(e,t,Buffer.from(r));case"AES-GCM":return this.decryptAesGCM(e,t,Buffer.from(r));case"AES-KW":return this.decryptAesKW(e,t,Buffer.from(r));case"AES-ECB":return this.decryptAesECB(e,t,Buffer.from(r));default:throw new h.OperationError("algorithm: Is not recognized")}}static async encryptAesCBC(e,t,r){let n=i.createCipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv)),o=n.update(r);o=Buffer.concat([o,n.final()]);let s=new Uint8Array(o).buffer;return s}static async decryptAesCBC(e,t,r){let n=i.createDecipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv)),o=n.update(r);return o=Buffer.concat([o,n.final()]),new Uint8Array(o).buffer}static async encryptAesCTR(e,t,r){let n=i.createCipheriv(`aes-${t.algorithm.length}-ctr`,t.data,Buffer.from(e.counter)),o=n.update(r);o=Buffer.concat([o,n.final()]);let s=new Uint8Array(o).buffer;return s}static async decryptAesCTR(e,t,r){let n=i.createDecipheriv(`aes-${t.algorithm.length}-ctr`,t.data,new Uint8Array(e.counter)),o=n.update(r);return o=Buffer.concat([o,n.final()]),new Uint8Array(o).buffer}static async encryptAesGCM(e,t,r){let n=i.createCipheriv(`aes-${t.algorithm.length}-gcm`,t.data,Buffer.from(e.iv),{authTagLength:(e.tagLength||128)>>3});e.additionalData&&n.setAAD(Buffer.from(e.additionalData));let o=n.update(r);o=Buffer.concat([o,n.final(),n.getAuthTag()]);let s=new Uint8Array(o).buffer;return s}static async decryptAesGCM(e,t,r){let n=i.createDecipheriv(`aes-${t.algorithm.length}-gcm`,t.data,new Uint8Array(e.iv)),o=(e.tagLength||128)>>3,s=r.slice(0,r.length-o),a=r.slice(r.length-o);e.additionalData&&n.setAAD(Buffer.from(e.additionalData)),n.setAuthTag(a);let l=n.update(s);return l=Buffer.concat([l,n.final()]),new Uint8Array(l).buffer}static async encryptAesKW(e,t,r){let n=i.createCipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV),o=n.update(r);return o=Buffer.concat([o,n.final()]),new Uint8Array(o).buffer}static async decryptAesKW(e,t,r){let n=i.createDecipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV),o=n.update(r);return o=Buffer.concat([o,n.final()]),new Uint8Array(o).buffer}static async encryptAesECB(e,t,r){let n=i.createCipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0)),o=n.update(r);o=Buffer.concat([o,n.final()]);let s=new Uint8Array(o).buffer;return s}static async decryptAesECB(e,t,r){let n=i.createDecipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0)),o=n.update(r);return o=Buffer.concat([o,n.final()]),new Uint8Array(o).buffer}}A.AES_KW_IV=Buffer.from("A6A6A6A6A6A6A6A6","hex");class _ extends h.AesCbcProvider{async onGenerateKey(e,t,r){let n=await A.generateKey({name:this.name,length:e.length},t,r);return S(n)}async onEncrypt(e,t,r){return A.encrypt(e,w(t),new Uint8Array(r))}async onDecrypt(e,t,r){return A.decrypt(e,w(t),new Uint8Array(r))}async onExportKey(e,t){return A.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await A.importKey(e,t,{name:r.name},n,i);return S(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof b))throw TypeError("key: Is not a AesCryptoKey")}}let k=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),E=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);function B(e){let t=Buffer.alloc(e.length),r=e.length-1;for(let n=0;n<r;n++)t[n]=e[n]<<1,128&e[n+1]&&(t[n]+=1);return t[r]=e[r]<<1,t}function C(e,t){let r=Math.min(e.length,t.length),n=Buffer.alloc(r);for(let i=0;i<r;i++)n[i]=e[i]^t[i];return n}function P(e,t){let r=f.createCipheriv(`aes${e.length<<3}`,e,k),n=r.update(t);return r.final(),n}function T(e,t){let r=Buffer.alloc(16),n=16*t,i=n+16;return e.copy(r,0,n,i),r}class x extends h.AesCmacProvider{async onGenerateKey(e,t,r){let n=await A.generateKey({name:this.name,length:e.length},t,r);return S(n)}async onSign(e,t,r){let n=function(e,t){let r,n;let i=function(e){let t=P(e,k),r=B(t);128&t[0]&&(r=C(r,E));let n=B(r);return 128&r[0]&&(n=C(n,E)),{subkey1:r,subkey2:n}}(e),o=Math.ceil(t.length/16);0===o?(o=1,r=!1):r=t.length%16==0;let s=o-1;n=r?C(T(t,s),i.subkey1):C(function(e,t){let r=Buffer.alloc(16),n=16*t,i=e.length;return r.fill(0),e.copy(r,0,n,i),r[i-n]=128,r}(t,s),i.subkey2);let a=k;for(let r=0;r<s;r++)a=P(e,C(a,T(t,r)));return P(e,C(n,a))}(w(t).data,Buffer.from(r));return new Uint8Array(n).buffer}async onVerify(e,t,r,n){let i=await this.sign(e,t,n);return 0===Buffer.from(r).compare(Buffer.from(i))}async onExportKey(e,t){return A.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await A.importKey(e,t,{name:r.name},n,i);return S(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof b))throw TypeError("key: Is not a AesCryptoKey")}}class O extends h.AesCtrProvider{async onGenerateKey(e,t,r){let n=await A.generateKey({name:this.name,length:e.length},t,r);return S(n)}async onEncrypt(e,t,r){return A.encrypt(e,w(t),new Uint8Array(r))}async onDecrypt(e,t,r){return A.decrypt(e,w(t),new Uint8Array(r))}async onExportKey(e,t){return A.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await A.importKey(e,t,{name:r.name},n,i);return S(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof b))throw TypeError("key: Is not a AesCryptoKey")}}class N extends h.AesGcmProvider{async onGenerateKey(e,t,r){let n=await A.generateKey({name:this.name,length:e.length},t,r);return S(n)}async onEncrypt(e,t,r){return A.encrypt(e,w(t),new Uint8Array(r))}async onDecrypt(e,t,r){return A.decrypt(e,w(t),new Uint8Array(r))}async onExportKey(e,t){return A.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await A.importKey(e,t,{name:r.name},n,i);return S(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof b))throw TypeError("key: Is not a AesCryptoKey")}}class I extends h.AesKwProvider{async onGenerateKey(e,t,r){let n=await A.generateKey({name:this.name,length:e.length},t,r);return S(n)}async onExportKey(e,t){return A.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await A.importKey(e,t,{name:r.name},n,i);return S(o)}async onEncrypt(e,t,r){return A.encrypt(e,w(t),new Uint8Array(r))}async onDecrypt(e,t,r){return A.decrypt(e,w(t),new Uint8Array(r))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof b))throw TypeError("key: Is not a AesCryptoKey")}}class R extends h.AesEcbProvider{async onGenerateKey(e,t,r){let n=await A.generateKey({name:this.name,length:e.length},t,r);return S(n)}async onEncrypt(e,t,r){return A.encrypt(e,w(t),new Uint8Array(r))}async onDecrypt(e,t,r){return A.decrypt(e,w(t),new Uint8Array(r))}async onExportKey(e,t){return A.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await A.importKey(e,t,{name:r.name},n,i);return S(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof b))throw TypeError("key: Is not a AesCryptoKey")}}class K extends g{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new h.AlgorithmError("Unsupported algorithm name")}}set alg(e){}}s.__decorate([a.JsonProp({name:"k",converter:p})],K.prototype,"data",void 0);class U{static async generateKey(e,t,r){let n=new K;return n.algorithm=e,n.extractable=t,n.usages=r,n.data=i.randomBytes(e.length>>3),n}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return a.JsonSerializer.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new h.OperationError("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,n,i){let o;switch(e.toLowerCase()){case"jwk":o=a.JsonParser.fromJSON(t,{targetSchema:K});break;case"raw":(o=new K).data=Buffer.from(t);break;default:throw new h.OperationError("format: Must be 'jwk' or 'raw'")}return o.algorithm=r,o.extractable=n,o.usages=i,o}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(e,t,Buffer.from(r));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(e,t,Buffer.from(r));default:throw new h.OperationError("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof K))throw Error("key: Is not DesCryptoKey");switch(e.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(e,t,Buffer.from(r));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(e,t,Buffer.from(r));default:throw new h.OperationError("algorithm: Is not recognized")}}static async encryptDesCBC(e,t,r){let n=i.createCipheriv("des-cbc",t.data,new Uint8Array(e.iv)),o=n.update(r);o=Buffer.concat([o,n.final()]);let s=new Uint8Array(o).buffer;return s}static async decryptDesCBC(e,t,r){let n=i.createDecipheriv("des-cbc",t.data,new Uint8Array(e.iv)),o=n.update(r);return o=Buffer.concat([o,n.final()]),new Uint8Array(o).buffer}static async encryptDesEDE3CBC(e,t,r){let n=i.createCipheriv("des-ede3-cbc",t.data,Buffer.from(e.iv)),o=n.update(r);o=Buffer.concat([o,n.final()]);let s=new Uint8Array(o).buffer;return s}static async decryptDesEDE3CBC(e,t,r){let n=i.createDecipheriv("des-ede3-cbc",t.data,new Uint8Array(e.iv)),o=n.update(r);return o=Buffer.concat([o,n.final()]),new Uint8Array(o).buffer}}class L extends h.DesProvider{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(e,t,r){let n=await U.generateKey({name:this.name,length:this.keySizeBits},t,r);return S(n)}async onEncrypt(e,t,r){return U.encrypt(e,w(t),new Uint8Array(r))}async onDecrypt(e,t,r){return U.decrypt(e,w(t),new Uint8Array(r))}async onExportKey(e,t){return U.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await U.importKey(e,t,{name:this.name,length:this.keySizeBits},n,i);if(o.data.length!==this.keySizeBits>>3)throw new h.OperationError("keyData: Wrong key size");return S(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof K))throw TypeError("key: Is not a DesCryptoKey")}}class j extends h.DesProvider{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(e,t,r){let n=await U.generateKey({name:this.name,length:this.keySizeBits},t,r);return S(n)}async onEncrypt(e,t,r){return U.encrypt(e,w(t),new Uint8Array(r))}async onDecrypt(e,t,r){return U.decrypt(e,w(t),new Uint8Array(r))}async onExportKey(e,t){return U.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await U.importKey(e,t,{name:this.name,length:this.keySizeBits},n,i);if(o.data.length!==this.keySizeBits>>3)throw new h.OperationError("keyData: Wrong key size");return S(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof K))throw TypeError("key: Is not a DesCryptoKey")}}function M(e){switch(e.name.toUpperCase()){case"RSA-OAEP":{let t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${"1"!==t?`-${t}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new h.OperationError("algorithm: Is not recognized")}}class D extends m{constructor(){super(...arguments),this.type="private"}getKey(){let e=u.AsnParser.parse(this.data,h.asn1.PrivateKeyInfo);return u.AsnParser.parse(e.privateKey,h.asn1.RsaPrivateKey)}toJSON(){let e=this.getKey(),t={kty:"RSA",alg:M(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(t,a.JsonSerializer.toJSON(e))}fromJSON(e){let t=a.JsonParser.fromJSON(e,{targetSchema:h.asn1.RsaPrivateKey}),r=new h.asn1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.privateKeyAlgorithm.parameters=null,r.privateKey=u.AsnSerializer.serialize(t),this.data=Buffer.from(u.AsnSerializer.serialize(r))}}class H extends m{constructor(){super(...arguments),this.type="public"}getKey(){let e=u.AsnParser.parse(this.data,h.asn1.PublicKeyInfo);return u.AsnParser.parse(e.publicKey,h.asn1.RsaPublicKey)}toJSON(){let e=this.getKey(),t={kty:"RSA",alg:M(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(t,a.JsonSerializer.toJSON(e))}fromJSON(e){let t=a.JsonParser.fromJSON(e,{targetSchema:h.asn1.RsaPublicKey}),r=new h.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.publicKeyAlgorithm.parameters=null,r.publicKey=u.AsnSerializer.serialize(t),this.data=Buffer.from(u.AsnSerializer.serialize(r))}}class q{static async generateKey(e,t,r){let n=new D;n.algorithm=e,n.extractable=t,n.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let o=new H;o.algorithm=e,o.extractable=!0,o.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let s=Buffer.concat([Buffer.alloc(4-e.publicExponent.byteLength,0),Buffer.from(e.publicExponent)]).readInt32BE(0),a=i.generateKeyPairSync("rsa",{modulusLength:e.modulusLength,publicExponent:s,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=a.privateKey,o.data=a.publicKey,{privateKey:n,publicKey:o}}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return a.JsonSerializer.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;default:throw new h.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":if(t.d){let e=a.JsonParser.fromJSON(t,{targetSchema:h.asn1.RsaPrivateKey});return this.importPrivateKey(e,r,n,i)}{let e=a.JsonParser.fromJSON(t,{targetSchema:h.asn1.RsaPublicKey});return this.importPublicKey(e,r,n,i)}case"spki":{let e=u.AsnParser.parse(new Uint8Array(t),h.asn1.PublicKeyInfo),o=u.AsnParser.parse(e.publicKey,h.asn1.RsaPublicKey);return this.importPublicKey(o,r,n,i)}case"pkcs8":{let e=u.AsnParser.parse(new Uint8Array(t),h.asn1.PrivateKeyInfo),o=u.AsnParser.parse(e.privateKey,h.asn1.RsaPrivateKey);return this.importPrivateKey(o,r,n,i)}default:throw new h.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(e,t,r){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(e,t,r);default:throw new h.OperationError("algorithm: Is not recognized")}}static async verify(e,t,r,n){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(e,t,n,r);default:throw new h.OperationError("algorithm: Is not recognized")}}static async encrypt(e,t,r){if("RSA-OAEP"===e.name.toUpperCase())return this.encryptOAEP(e,t,r);throw new h.OperationError("algorithm: Is not recognized")}static async decrypt(e,t,r){if("RSA-OAEP"===e.name.toUpperCase())return this.decryptOAEP(e,t,r);throw new h.OperationError("algorithm: Is not recognized")}static importPrivateKey(e,t,r,n){let i=new h.asn1.PrivateKeyInfo;i.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",i.privateKeyAlgorithm.parameters=null,i.privateKey=u.AsnSerializer.serialize(e);let o=new D;return o.data=Buffer.from(u.AsnSerializer.serialize(i)),o.algorithm=Object.assign({},t),o.algorithm.publicExponent=new Uint8Array(e.publicExponent),o.algorithm.modulusLength=e.modulus.byteLength<<3,o.extractable=r,o.usages=n,o}static importPublicKey(e,t,r,n){let i=new h.asn1.PublicKeyInfo;i.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",i.publicKeyAlgorithm.parameters=null,i.publicKey=u.AsnSerializer.serialize(e);let o=new H;return o.data=Buffer.from(u.AsnSerializer.serialize(i)),o.algorithm=Object.assign({},t),o.algorithm.publicExponent=new Uint8Array(e.publicExponent),o.algorithm.modulusLength=e.modulus.byteLength<<3,o.extractable=r,o.usages=n,o}static getCryptoAlgorithm(e){switch(e.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new h.OperationError("algorithm.hash: Is not recognized")}}static signRsa(e,t,r){let n=this.getCryptoAlgorithm(t.algorithm),o=i.createSign(n);o.update(Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let s={key:t.pem};"RSA-PSS"===e.name.toUpperCase()&&(s.padding=i.constants.RSA_PKCS1_PSS_PADDING,s.saltLength=e.saltLength);let a=o.sign(s);return new Uint8Array(a).buffer}static verifySSA(e,t,r,n){let o=this.getCryptoAlgorithm(t.algorithm),s=i.createVerify(o);s.update(Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:t.pem};"RSA-PSS"===e.name.toUpperCase()&&(a.padding=i.constants.RSA_PKCS1_PSS_PADDING,a.saltLength=e.saltLength);let l=s.verify(a,n);return l}static encryptOAEP(e,t,r){let n={key:`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:i.constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(i.publicEncrypt(n,r)).buffer}static decryptOAEP(e,t,r){let n={key:`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:i.constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(i.privateDecrypt(n,r)).buffer}}q.publicKeyUsages=["verify","encrypt","wrapKey"],q.privateKeyUsages=["sign","decrypt","unwrapKey"];class $ extends h.RsaSsaProvider{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let n=await q.generateKey({...e,name:this.name},t,r);return{privateKey:S(n.privateKey),publicKey:S(n.publicKey)}}async onSign(e,t,r){return q.sign(e,w(t),new Uint8Array(r))}async onVerify(e,t,r,n){return q.verify(e,w(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return q.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await q.importKey(e,t,{...r,name:this.name},n,i);return S(o)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=w(e);if(!(r instanceof D||r instanceof H))throw TypeError("key: Is not RSA CryptoKey")}}class z extends h.RsaPssProvider{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let n=await q.generateKey({...e,name:this.name},t,r);return{privateKey:S(n.privateKey),publicKey:S(n.publicKey)}}async onSign(e,t,r){return q.sign(e,w(t),new Uint8Array(r))}async onVerify(e,t,r,n){return q.verify(e,w(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return q.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await q.importKey(e,t,{...r,name:this.name},n,i);return S(o)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=w(e);if(!(r instanceof D||r instanceof H))throw TypeError("key: Is not RSA CryptoKey")}}class J{static size(e){switch(e.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw Error("Unrecognized name")}}static getAlgorithmName(e){switch(e.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw Error("Unrecognized name")}}static digest(e,t){let r=this.getAlgorithmName(e),n=i.createHash(r).update(Buffer.from(t)).digest();return new Uint8Array(n).buffer}}class V extends h.RsaOaepProvider{async onGenerateKey(e,t,r){let n=await q.generateKey({...e,name:this.name},t,r);return{privateKey:S(n.privateKey),publicKey:S(n.publicKey)}}async onEncrypt(e,t,r){let n=w(t),o=new Uint8Array(r),s=Math.ceil(n.algorithm.modulusLength>>3),a=J.size(n.algorithm.hash)>>3,l=o.byteLength,u=s-l-2*a-2;if(l>s-2*a-2)throw Error("Data too large");let c=new Uint8Array(s),f=c.subarray(1,a+1),d=c.subarray(a+1);d.set(o,a+u+1);let p=i.createHash(n.algorithm.hash.name.replace("-","")).update(h.BufferSourceConverter.toUint8Array(e.label||new Uint8Array(0))).digest();d.set(p,0),d[a+u]=1,i.randomFillSync(f);let y=this.mgf1(n.algorithm.hash,f,d.length);for(let e=0;e<d.length;e++)d[e]^=y[e];let g=this.mgf1(n.algorithm.hash,d,f.length);for(let e=0;e<f.length;e++)f[e]^=g[e];n.pem||(n.pem=`-----BEGIN PUBLIC KEY-----
${n.data.toString("base64")}
-----END PUBLIC KEY-----`);let m=i.publicEncrypt({key:n.pem,padding:i.constants.RSA_NO_PADDING},Buffer.from(c));return new Uint8Array(m).buffer}async onDecrypt(e,t,r){let n=w(t),o=Math.ceil(n.algorithm.modulusLength>>3),s=J.size(n.algorithm.hash)>>3,a=r.byteLength;if(a!==o)throw Error("Bad data");n.pem||(n.pem=`-----BEGIN PRIVATE KEY-----
${n.data.toString("base64")}
-----END PRIVATE KEY-----`);let l=i.privateDecrypt({key:n.pem,padding:i.constants.RSA_NO_PADDING},Buffer.from(r)),u=l[0],c=l.subarray(1,s+1),f=l.subarray(s+1);if(0!==u)throw Error("Decryption failed");let d=this.mgf1(n.algorithm.hash,f,c.length);for(let e=0;e<c.length;e++)c[e]^=d[e];let p=this.mgf1(n.algorithm.hash,c,f.length);for(let e=0;e<f.length;e++)f[e]^=p[e];let y=i.createHash(n.algorithm.hash.name.replace("-","")).update(h.BufferSourceConverter.toUint8Array(e.label||new Uint8Array(0))).digest();for(let e=0;e<s;e++)if(y[e]!==f[e])throw Error("Decryption failed");let g=s;for(;g<f.length;g++){let e=f[g];if(1===e)break;if(0!==e)throw Error("Decryption failed")}if(g===f.length)throw Error("Decryption failed");return l=f.subarray(g+1),new Uint8Array(l).buffer}async onExportKey(e,t){return q.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await q.importKey(e,t,{...r,name:this.name},n,i);return S(o)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=w(e);if(!(r instanceof D||r instanceof H))throw TypeError("key: Is not RSA CryptoKey")}mgf1(e,t,r=0){let n=J.size(e)>>3,o=new Uint8Array(r),s=new Uint8Array(4),a=Math.ceil(r/n);for(let r=0;r<a;r++){s[0]=r>>>24,s[1]=r>>>16&255,s[2]=r>>>8&255,s[3]=255&r;let a=o.subarray(r*n),l=i.createHash(e.name.replace("-","")).update(t).update(s).digest();l.length>a.length&&(l=l.subarray(0,a.length)),a.set(l)}return o}}class F extends h.ProviderCrypto{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(e,t,r){let n=await q.generateKey({...e,name:this.name},t,r);return{privateKey:S(n.privateKey),publicKey:S(n.publicKey)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let t=l.Convert.ToBase64(e.publicExponent);if(!("Aw=="===t||"AQAB"===t))throw TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(e,t,r){let n=this.toCryptoOptions(t),i=f.publicEncrypt(n,new Uint8Array(r));return new Uint8Array(i).buffer}async onDecrypt(e,t,r){let n=this.toCryptoOptions(t),i=f.privateDecrypt(n,new Uint8Array(r));return new Uint8Array(i).buffer}async onExportKey(e,t){return q.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await q.importKey(e,t,{...r,name:this.name},n,i);return S(o)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=w(e);if(!(r instanceof D||r instanceof H))throw TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(e){let t=e.type.toUpperCase();return{key:`-----BEGIN ${t} KEY-----
${w(e).data.toString("base64")}
-----END ${t} KEY-----`,padding:f.constants.RSA_PKCS1_PADDING}}}let W={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function G(e){let t=W[e];if(!t)throw new h.OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class Y extends m{constructor(){super(...arguments),this.type="private"}getKey(){let e=u.AsnParser.parse(this.data,h.asn1.PrivateKeyInfo);return u.AsnParser.parse(e.privateKey,h.asn1.EcPrivateKey)}toJSON(){let e=this.getKey(),t={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,a.JsonSerializer.toJSON(e))}fromJSON(e){if(!e.crv)throw new h.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let t=new h.asn1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",t.privateKeyAlgorithm.parameters=u.AsnSerializer.serialize(new h.asn1.ObjectIdentifier(G(e.crv)));let r=a.JsonParser.fromJSON(e,{targetSchema:h.asn1.EcPrivateKey});return t.privateKey=u.AsnSerializer.serialize(r),this.data=Buffer.from(u.AsnSerializer.serialize(t)),this}}class X extends m{constructor(){super(...arguments),this.type="public"}getKey(){let e=u.AsnParser.parse(this.data,h.asn1.PublicKeyInfo);return new h.asn1.EcPublicKey(e.publicKey)}toJSON(){let e=this.getKey(),t={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,a.JsonSerializer.toJSON(e))}fromJSON(e){if(!e.crv)throw new h.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let t=a.JsonParser.fromJSON(e,{targetSchema:h.asn1.EcPublicKey}),r=new h.asn1.PublicKeyInfo;return r.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",r.publicKeyAlgorithm.parameters=u.AsnSerializer.serialize(new h.asn1.ObjectIdentifier(G(e.crv))),r.publicKey=u.AsnSerializer.toASN(t).valueHex,this.data=Buffer.from(u.AsnSerializer.serialize(r)),this}}class Z extends h.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(e,t){return J.digest(e,t)}}class Q extends h.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(e,t){return J.digest(e,t)}}class ee extends h.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(e,t){return J.digest(e,t)}}class et extends h.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(e,t){return J.digest(e,t)}}class er extends h.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(e,t){return J.digest(e,t)}}class en extends h.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(e,t){return J.digest(e,t)}}class ei extends h.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(e,t){return J.digest(e,t)}}class eo{static async generateKey(e,t,r){let n=new Y;n.algorithm=e,n.extractable=t,n.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let o=new X;o.algorithm=e,o.extractable=!0,o.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let s=i.generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(e.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=s.privateKey,o.data=s.publicKey,{privateKey:n,publicKey:o}}static async sign(e,t,r){let n=J.getAlgorithmName(e.hash),o=i.createSign(n);o.update(Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let s={key:t.pem},a=o.sign(s),l=u.AsnParser.parse(a,h.asn1.EcDsaSignature),c=h.EcUtils.encodeSignature(l,h.EcCurves.get(t.algorithm.namedCurve).size);return c.buffer}static async verify(e,t,r,n){let o=J.getAlgorithmName(e.hash),s=i.createVerify(o);s.update(Buffer.from(n)),t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:t.pem},c=new h.asn1.EcDsaSignature,f=h.EcCurves.get(t.algorithm.namedCurve),d=h.EcUtils.decodeSignature(r,f.size);c.r=l.BufferSourceConverter.toArrayBuffer(d.r),c.s=l.BufferSourceConverter.toArrayBuffer(d.s);let p=Buffer.from(u.AsnSerializer.serialize(c)),y=s.verify(a,p);return y}static async deriveBits(e,t,r){let n=this.getOpenSSLNamedCurve(t.algorithm.namedCurve),o=i.createECDH(n),s=u.AsnParser.parse(t.data,h.asn1.PrivateKeyInfo),a=u.AsnParser.parse(s.privateKey,h.asn1.EcPrivateKey);o.setPrivateKey(Buffer.from(a.privateKey));let l=u.AsnParser.parse(e.public.data,h.asn1.PublicKeyInfo),c=o.computeSecret(Buffer.from(l.publicKey));return null===r?c:new Uint8Array(c).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return a.JsonSerializer.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":{let e=u.AsnParser.parse(t.data,h.asn1.PublicKeyInfo);return e.publicKey}default:throw new h.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":if(t.d){let e=a.JsonParser.fromJSON(t,{targetSchema:h.asn1.EcPrivateKey});return this.importPrivateKey(e,r,n,i)}{let e=a.JsonParser.fromJSON(t,{targetSchema:h.asn1.EcPublicKey});return this.importPublicKey(e,r,n,i)}case"raw":{let e=new h.asn1.EcPublicKey(t);return this.importPublicKey(e,r,n,i)}case"spki":{let e=u.AsnParser.parse(new Uint8Array(t),h.asn1.PublicKeyInfo),o=new h.asn1.EcPublicKey(e.publicKey);return this.assertKeyParameters(e.publicKeyAlgorithm.parameters,r.namedCurve),this.importPublicKey(o,r,n,i)}case"pkcs8":{let e=u.AsnParser.parse(new Uint8Array(t),h.asn1.PrivateKeyInfo),o=u.AsnParser.parse(e.privateKey,h.asn1.EcPrivateKey);return this.assertKeyParameters(e.privateKeyAlgorithm.parameters,r.namedCurve),this.importPrivateKey(o,r,n,i)}default:throw new h.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(e,t){if(!e)throw new h.CryptoError("Key info doesn't have required parameters");let r="";try{r=u.AsnParser.parse(e,h.asn1.ObjectIdentifier).value}catch(e){throw new h.CryptoError("Cannot read key info parameters")}if(G(t)!==r)throw new h.CryptoError("Key info parameter doesn't match to named curve")}static async importPrivateKey(e,t,r,n){let i=new h.asn1.PrivateKeyInfo;i.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",i.privateKeyAlgorithm.parameters=u.AsnSerializer.serialize(new h.asn1.ObjectIdentifier(G(t.namedCurve))),i.privateKey=u.AsnSerializer.serialize(e);let o=new Y;return o.data=Buffer.from(u.AsnSerializer.serialize(i)),o.algorithm=Object.assign({},t),o.extractable=r,o.usages=n,o}static async importPublicKey(e,t,r,n){let i=new h.asn1.PublicKeyInfo;i.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let o=G(t.namedCurve);i.publicKeyAlgorithm.parameters=u.AsnSerializer.serialize(new h.asn1.ObjectIdentifier(o)),i.publicKey=e.value;let s=new X;return s.data=Buffer.from(u.AsnSerializer.serialize(i)),s.algorithm=Object.assign({},t),s.extractable=r,s.usages=n,s}static getOpenSSLNamedCurve(e){switch(e.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return e}}}eo.publicKeyUsages=["verify"],eo.privateKeyUsages=["sign","deriveKey","deriveBits"];class es extends h.EcdsaProvider{constructor(){super(...arguments),this.namedCurves=h.EcCurves.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let n=await eo.generateKey({...e,name:this.name},t,r);return{privateKey:S(n.privateKey),publicKey:S(n.publicKey)}}async onSign(e,t,r){return eo.sign(e,w(t),new Uint8Array(r))}async onVerify(e,t,r,n){return eo.verify(e,w(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return eo.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await eo.importKey(e,t,{...r,name:this.name},n,i);return S(o)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=w(e);if(!(r instanceof Y||r instanceof X))throw TypeError("key: Is not EC CryptoKey")}}class ea extends h.EcdhProvider{constructor(){super(...arguments),this.namedCurves=h.EcCurves.names}async onGenerateKey(e,t,r){let n=await eo.generateKey({...e,name:this.name},t,r);return{privateKey:S(n.privateKey),publicKey:S(n.publicKey)}}async onExportKey(e,t){return eo.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await eo.importKey(e,t,{...r,name:this.name},n,i);return S(o)}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=w(e);if(!(r instanceof Y||r instanceof X))throw TypeError("key: Is not EC CryptoKey")}async onDeriveBits(e,t,r){let n=await eo.deriveBits({...e,public:w(e.public)},w(t),r);return n}}let el={[h.asn1.idEd448]:"Ed448",ed448:h.asn1.idEd448,[h.asn1.idX448]:"X448",x448:h.asn1.idX448,[h.asn1.idEd25519]:"Ed25519",ed25519:h.asn1.idEd25519,[h.asn1.idX25519]:"X25519",x25519:h.asn1.idX25519};function eu(e){let t=el[e.toLowerCase()];if(!t)throw new h.OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class ec extends m{constructor(){super(...arguments),this.type="private"}getKey(){let e=u.AsnParser.parse(this.data,h.asn1.PrivateKeyInfo);return u.AsnParser.parse(e.privateKey,h.asn1.CurvePrivateKey)}toJSON(){let e=this.getKey(),t={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,a.JsonSerializer.toJSON(e))}fromJSON(e){if(!e.crv)throw new h.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let t=new h.asn1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=eu(e.crv);let r=a.JsonParser.fromJSON(e,{targetSchema:h.asn1.CurvePrivateKey});return t.privateKey=u.AsnSerializer.serialize(r),this.data=Buffer.from(u.AsnSerializer.serialize(t)),this}}class eh extends m{constructor(){super(...arguments),this.type="public"}getKey(){let e=u.AsnParser.parse(this.data,h.asn1.PublicKeyInfo);return e.publicKey}toJSON(){let e=this.getKey(),t={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(t,{x:l.Convert.ToBase64Url(e)})}fromJSON(e){if(!e.crv)throw new h.OperationError("Cannot get named curve from JWK. Property 'crv' is required");if(!e.x)throw new h.OperationError("Cannot get property from JWK. Property 'x' is required");let t=new h.asn1.PublicKeyInfo;return t.publicKeyAlgorithm.algorithm=eu(e.crv),t.publicKey=l.Convert.FromBase64Url(e.x),this.data=Buffer.from(u.AsnSerializer.serialize(t)),this}}class ef{static async generateKey(e,t,r){let n=new ec;n.algorithm=e,n.extractable=t,n.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let o=new eh;o.algorithm=e,o.extractable=!0,o.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let s=e.namedCurve.toLowerCase(),a=i.generateKeyPairSync(s,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=a.privateKey,o.data=a.publicKey,{privateKey:n,publicKey:o}}static async sign(e,t,r){t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let n={key:t.pem},o=i.sign(null,Buffer.from(r),n);return h.BufferSourceConverter.toArrayBuffer(o)}static async verify(e,t,r,n){t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let o={key:t.pem},s=i.verify(null,Buffer.from(n),o,Buffer.from(r));return s}static async deriveBits(e,t,r){let n=i.createPublicKey({key:e.public.data,format:"der",type:"spki"}),o=i.createPrivateKey({key:t.data,format:"der",type:"pkcs8"}),s=i.diffieHellman({publicKey:n,privateKey:o});return new Uint8Array(s).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return a.JsonSerializer.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":{let e=u.AsnParser.parse(t.data,h.asn1.PublicKeyInfo);return e.publicKey}default:throw new h.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":if(t.d){let e=a.JsonParser.fromJSON(t,{targetSchema:h.asn1.CurvePrivateKey});return this.importPrivateKey(e,r,n,i)}if(!t.x)throw TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(l.Convert.FromBase64Url(t.x),r,n,i);case"raw":return this.importPublicKey(t,r,n,i);case"spki":{let e=u.AsnParser.parse(new Uint8Array(t),h.asn1.PublicKeyInfo);return this.importPublicKey(e.publicKey,r,n,i)}case"pkcs8":{let e=u.AsnParser.parse(new Uint8Array(t),h.asn1.PrivateKeyInfo),o=u.AsnParser.parse(e.privateKey,h.asn1.CurvePrivateKey);return this.importPrivateKey(o,r,n,i)}default:throw new h.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(e,t,r,n){let i=new ec;return i.fromJSON({crv:t.namedCurve,d:l.Convert.ToBase64Url(e.d)}),i.algorithm=Object.assign({},t),i.extractable=r,i.usages=n,i}static async importPublicKey(e,t,r,n){let i=new eh;return i.fromJSON({crv:t.namedCurve,x:l.Convert.ToBase64Url(e)}),i.algorithm=Object.assign({},t),i.extractable=r,i.usages=n,i}}ef.publicKeyUsages=["verify"],ef.privateKeyUsages=["sign","deriveKey","deriveBits"];class ed extends h.EdDsaProvider{async onGenerateKey(e,t,r){let n=await ef.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,r);return{privateKey:S(n.privateKey),publicKey:S(n.publicKey)}}async onSign(e,t,r){return ef.sign(e,w(t),new Uint8Array(r))}async onVerify(e,t,r,n){return ef.verify(e,w(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return ef.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await ef.importKey(e,t,{...r,name:this.name},n,i);return S(o)}}class ep extends h.EcdhEsProvider{async onGenerateKey(e,t,r){let n=await ef.generateKey({name:this.name,namedCurve:e.namedCurve.toUpperCase()},t,r);return{privateKey:S(n.privateKey),publicKey:S(n.publicKey)}}async onDeriveBits(e,t,r){let n=await ef.deriveBits({...e,public:w(e.public)},w(t),r);return n}async onExportKey(e,t){return ef.exportKey(e,w(t))}async onImportKey(e,t,r,n,i){let o=await ef.importKey(e,t,{...r,name:this.name},n,i);return S(o)}}class ey extends y{}class eg extends h.Pbkdf2Provider{async onDeriveBits(e,t,r){return new Promise((n,o)=>{let s=h.BufferSourceConverter.toArrayBuffer(e.salt),a=e.hash.name.replace("-","");i.pbkdf2(w(t).data,Buffer.from(s),e.iterations,r>>3,a,(e,t)=>{e?o(e):n(new Uint8Array(t).buffer)})})}async onImportKey(e,t,r,n,i){if("raw"===e){let e=new ey;return e.data=Buffer.from(t),e.algorithm={name:this.name},e.extractable=!1,e.usages=i,S(e)}throw new h.OperationError("format: Must be 'raw'")}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof ey))throw TypeError("key: Is not PBKDF CryptoKey")}}class em extends y{get alg(){let e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}}s.__decorate([a.JsonProp({name:"k",converter:p})],em.prototype,"data",void 0);class eb extends h.HmacProvider{async onGenerateKey(e,t,r){let n=(e.length||this.getDefaultLength(e.hash.name))>>3<<3,o=new em;return o.algorithm={...e,length:n,name:this.name},o.extractable=t,o.usages=r,o.data=i.randomBytes(n>>3),S(o)}async onSign(e,t,r){let n=J.getAlgorithmName(t.algorithm.hash),o=i.createHmac(n,w(t).data).update(Buffer.from(r)).digest();return new Uint8Array(o).buffer}async onVerify(e,t,r,n){let o=J.getAlgorithmName(t.algorithm.hash),s=i.createHmac(o,w(t).data).update(Buffer.from(n)).digest();return 0===s.compare(Buffer.from(r))}async onImportKey(e,t,r,n,i){let o;switch(e.toLowerCase()){case"jwk":o=a.JsonParser.fromJSON(t,{targetSchema:em});break;case"raw":(o=new em).data=Buffer.from(t);break;default:throw new h.OperationError("format: Must be 'jwk' or 'raw'")}return o.algorithm={hash:{name:r.hash.name},name:this.name,length:o.data.length<<3},o.extractable=n,o.usages=i,S(o)}async onExportKey(e,t){switch(e.toLowerCase()){case"jwk":return a.JsonSerializer.toJSON(w(t));case"raw":return new Uint8Array(w(t).data).buffer;default:throw new h.OperationError("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof em))throw TypeError("key: Is not HMAC CryptoKey")}}class ev extends y{}class ew extends h.HkdfProvider{async onImportKey(e,t,r,n,i){if("raw"!==e.toLowerCase())throw new h.OperationError("Operation not supported");let o=new ev;return o.data=Buffer.from(t),o.algorithm={name:this.name},o.extractable=n,o.usages=i,S(o)}async onDeriveBits(e,t,r){let o=e.hash.name.replace("-",""),s=i.createHash(o).digest().length,a=r/8,l=n.BufferSourceConverter.toUint8Array(e.info),u=i.createHmac(o,n.BufferSourceConverter.toUint8Array(e.salt)).update(n.BufferSourceConverter.toUint8Array(w(t).data)).digest(),c=[Buffer.alloc(0)],h=Math.ceil(a/s)+1;for(let e=1;e<h;++e)c.push(i.createHmac(o,u).update(Buffer.concat([c[e-1],l,Buffer.from([e])])).digest());return Buffer.concat(c).slice(0,a)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(w(e) instanceof ev))throw TypeError("key: Is not HKDF CryptoKey")}}class eS{static digest(e,t){let r=i.createHash(e.name.toLowerCase(),{outputLength:e.length}).update(Buffer.from(t)).digest();return new Uint8Array(r).buffer}}class eA extends h.Shake128Provider{async onDigest(e,t){return eS.digest(e,t)}}class e_ extends h.Shake256Provider{async onDigest(e,t){return eS.digest(e,t)}}class ek extends h.SubtleCrypto{constructor(){var e;super(),this.providers.set(new _),this.providers.set(new O),this.providers.set(new N),this.providers.set(new x),this.providers.set(new I),this.providers.set(new R),this.providers.set(new L),this.providers.set(new j),this.providers.set(new $),this.providers.set(new z),this.providers.set(new V),this.providers.set(new F),this.providers.set(new es),this.providers.set(new ea),this.providers.set(new Z),this.providers.set(new Q),this.providers.set(new ee),this.providers.set(new et),this.providers.set(new eg),this.providers.set(new eb),this.providers.set(new ew);let t=null===(e=/^v(\d+)/.exec(d.version))||void 0===e?void 0:e[1];t&&parseInt(t,10)>=12&&(this.providers.set(new eA),this.providers.set(new e_));let r=f.getHashes();r.includes("sha3-256")&&this.providers.set(new er),r.includes("sha3-384")&&this.providers.set(new en),r.includes("sha3-512")&&this.providers.set(new ei),t&&parseInt(t,10)>=14&&(this.providers.set(new ed),this.providers.set(new ep))}}class eE extends h.Crypto{constructor(){super(...arguments),this.subtle=new ek}getRandomValues(e){if(!ArrayBuffer.isView(e))throw TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let t=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return i.randomFillSync(t),e}}t.w=eE},94549:(e,t,r)=>{/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */Object.defineProperty(t,"__esModule",{value:!0});var n=r(81648),i=r(47162);function o(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var s=o(n),a=o(i);function l(){if("undefined"==typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function u(e){let t=0,r=0;for(let r=0;r<e.length;r++){let n=e[r];t+=n.byteLength}let n=new Uint8Array(t);for(let t=0;t<e.length;t++){let i=e[t];n.set(new Uint8Array(i),r),r+=i.byteLength}return n.buffer}function c(e,t,r,n){return t instanceof Uint8Array?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class h{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return u(this.items)}}let f=[new Uint8Array([1])],d="0123456789",p="name",y="valueHexView",g=new ArrayBuffer(0),m=new Uint8Array(0),b="EndOfContent",v="OCTET STRING",w="BIT STRING";function S(e){var t;return(t=class extends e{constructor(...e){var t;super(...e);let r=e[0]||{};this.isHexOnly=null!==(t=r.isHexOnly)&&void 0!==t&&t,this.valueHexView=r.valueHex?s.BufferSourceConverter.toUint8Array(r.valueHex):m}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,r){let n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!c(this,n,t,r))return -1;let i=t+r;return(this.valueHexView=n.subarray(t,i),this.valueHexView.length)?(this.blockLength=r,i):(this.warnings.push("Zero buffer length"),t)}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",g)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:s.Convert.ToHex(this.valueHexView)}}}).NAME="hexBlock",t}class A{constructor({blockLength:e=0,error:t="",warnings:r=[],valueBeforeDecode:n=m}={}){this.blockLength=e,this.error=t,this.warnings=r,this.valueBeforeDecodeView=s.BufferSourceConverter.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:s.Convert.ToHex(this.valueBeforeDecodeView)}}}A.NAME="baseBlock";class _ extends A{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}_.NAME="valueBlock";class k extends S(A){constructor({idBlock:e={}}={}){var t,r,n,i;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?s.BufferSourceConverter.toUint8Array(e.valueHex):m,this.tagClass=null!==(r=e.tagClass)&&void 0!==r?r:-1,this.tagNumber=null!==(n=e.tagNumber)&&void 0!==n?n:-1,this.isConstructed=null!==(i=e.isConstructed)&&void 0!==i&&i):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",g}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){let r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,r[0]=t}return r.buffer}if(!this.isHexOnly){let r=a.utilToBase(this.tagNumber,7),n=new Uint8Array(r),i=r.byteLength,o=new Uint8Array(i+1);if(o[0]=31|t,!e){for(let e=0;e<i-1;e++)o[e+1]=128|n[e];o[i]=n[i-1]}return o.buffer}let r=new Uint8Array(this.valueHexView.byteLength+1);if(r[0]=31|t,!e){let e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=128|e[t];r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){let n=s.BufferSourceConverter.toUint8Array(e);if(!c(this,n,t,r))return -1;let i=n.subarray(t,t+r);if(0===i.length)return this.error="Zero buffer length",-1;let o=192&i[0];switch(o){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&i[0])==32,this.isHexOnly=!1;let l=31&i[0];if(31!==l)this.tagNumber=l,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),r=255;for(;128&i[e];){if(t[e-1]=127&i[e],++e>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(e===r){r+=255;let e=new Uint8Array(r);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1,t[e-1]=127&i[e];let n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t[r];(t=this.valueHexView=new Uint8Array(e)).set(n),this.blockLength<=9?this.tagNumber=a.utilFromBase(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}k.NAME="identificationBlock";class E extends A{constructor({lenBlock:e={}}={}){var t,r,n;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(r=e.longFormUsed)&&void 0!==r&&r,this.length=null!==(n=e.length)&&void 0!==n?n:0}fromBER(e,t,r){let n=s.BufferSourceConverter.toUint8Array(e);if(!c(this,n,t,r))return -1;let i=n.subarray(t,t+r);if(0===i.length)return this.error="Zero buffer length",-1;if(255===i[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===i[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&i[0]),!1===this.longFormUsed)return this.length=i[0],this.blockLength=1,t+this.blockLength;let o=127&i[0];if(o>8)return this.error="Too big integer",-1;if(o+1>i.length)return this.error="End of input reached before message was fully decoded",-1;let l=t+1,u=n.subarray(l,l+o);return 0===u[o-1]&&this.warnings.push("Needlessly long encoded length"),this.length=a.utilFromBase(u,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=o+1,t+this.blockLength}toBER(e=!1){let t,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=128),t;if(this.longFormUsed){let n=a.utilToBase(this.length,8);if(n.byteLength>127)return this.error="Too big length",g;if(t=new ArrayBuffer(n.byteLength+1),e)return t;let i=new Uint8Array(n);(r=new Uint8Array(t))[0]=128|n.byteLength;for(let e=0;e<n.byteLength;e++)r[e+1]=i[e];return t}return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}E.NAME="lengthBlock";let B={};class C extends A{constructor({name:e="",optional:t=!1,primitiveSchema:r,...n}={},i){super(n),this.name=e,this.optional=t,r&&(this.primitiveSchema=r),this.idBlock=new k(n),this.lenBlock=new E(n),this.valueBlock=i?new i(n):new _(n)}fromBER(e,t,r){let n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}toBER(e,t){let r=t||new h;t||function e(t){if(t instanceof B.Constructed)for(let r of t.valueBlock.value)e(r)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}(this);let n=this.idBlock.toBER(e);if(r.write(n),this.lenBlock.isIndefiniteForm)r.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,r),r.write(new ArrayBuffer(2));else{let t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;let n=this.lenBlock.toBER(e);r.write(n),r.write(t)}return t?g:r.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():s.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${s.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;let t=this.toBER(),r=e.toBER();return a.isEqualBuffer(t,r)}}C.NAME="BaseBlock";class P extends C{constructor({value:e="",...t}={},r){super(t,r),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,r){let n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}P.NAME="BaseStringBlock";class T extends S(_){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}T.NAME="PrimitiveValueBlock";class x extends C{constructor(e={}){super(e,T),this.idBlock.isConstructed=!1}}function O(e,t=0,r=e.length){let n=t,i=new C({},_),o=new A;if(!c(o,e,t,r))return i.error=o.error,{offset:-1,result:i};let s=e.subarray(t,t+r);if(!s.length)return i.error="Zero buffer length",{offset:-1,result:i};let a=i.idBlock.fromBER(e,t,r);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),-1===a)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=a,r-=i.idBlock.blockLength,a=i.lenBlock.fromBER(e,t,r),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),-1===a)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=a,r-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let l=C;if(1===i.idBlock.tagClass){if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};l=B.EndOfContent;break;case 1:l=B.Boolean;break;case 2:l=B.Integer;break;case 3:l=B.BitString;break;case 4:l=B.OctetString;break;case 5:l=B.Null;break;case 6:l=B.ObjectIdentifier;break;case 10:l=B.Enumerated;break;case 12:l=B.Utf8String;break;case 13:l=B.RelativeObjectIdentifier;break;case 14:l=B.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:l=B.Sequence;break;case 17:l=B.Set;break;case 18:l=B.NumericString;break;case 19:l=B.PrintableString;break;case 20:l=B.TeletexString;break;case 21:l=B.VideotexString;break;case 22:l=B.IA5String;break;case 23:l=B.UTCTime;break;case 24:l=B.GeneralizedTime;break;case 25:l=B.GraphicString;break;case 26:l=B.VisibleString;break;case 27:l=B.GeneralString;break;case 28:l=B.UniversalString;break;case 29:l=B.CharacterString;break;case 30:l=B.BmpString;break;case 31:l=B.DATE;break;case 32:l=B.TimeOfDay;break;case 33:l=B.DateTime;break;case 34:l=B.Duration;break;default:{let e=i.idBlock.isConstructed?new B.Constructed:new B.Primitive;e.idBlock=i.idBlock,e.lenBlock=i.lenBlock,e.warnings=i.warnings,i=e}}}else l=i.idBlock.isConstructed?B.Constructed:B.Primitive;return a=(i=function(e,t){if(e instanceof t)return e;let r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecodeView=e.valueBeforeDecodeView,r}(i,l)).fromBER(e,t,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecodeView=e.subarray(n,n+i.blockLength),{offset:a,result:i}}B.Primitive=x,x.NAME="PRIMITIVE";class N extends _{constructor({value:e=[],isIndefiniteForm:t=!1,...r}={}){super(r),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,r){var n,i;let o=s.BufferSourceConverter.toUint8Array(e);if(!c(this,o,t,r))return -1;if(this.valueBeforeDecodeView=o.subarray(t,t+r),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let a=t;for(;n=this.isIndefiniteForm,i=r,(n?1:i)>0;){let e=O(o,a,r);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(a=e.offset,this.blockLength+=e.result.blockLength,r-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===b)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===b?this.value.pop():this.warnings.push("No EndOfContent block encoded")),a}toBER(e,t){let r=t||new h;for(let t=0;t<this.value.length;t++)this.value[t].toBER(e,r);return t?g:r.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let t of this.value)e.value.push(t.toJSON());return e}}N.NAME="ConstructedValueBlock";class I extends C{constructor(e={}){super(e,N),this.idBlock.isConstructed=!0}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}onAsciiEncoding(){let e=[];for(let t of this.valueBlock.value)e.push(t.toString("ascii").split("\n").map(e=>`  ${e}`).join("\n"));let t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join("\n")}`:`${t} :`}}B.Constructed=I,I.NAME="CONSTRUCTED";class R extends _{fromBER(e,t,r){return t}toBER(e){return g}}R.override="EndOfContentValueBlock";class K extends C{constructor(e={}){super(e,R),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}B.EndOfContent=K,K.NAME=b;class U extends C{constructor(e={}){super(e,_),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,r){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e,t){let r=new ArrayBuffer(2);if(!e){let e=new Uint8Array(r);e[0]=5,e[1]=0}return t&&t.write(r),r}onAsciiEncoding(){return`${this.constructor.NAME}`}}B.Null=U,U.NAME="NULL";class L extends S(_){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=s.BufferSourceConverter.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,r){let n=s.BufferSourceConverter.toUint8Array(e);return c(this,n,t,r)?(this.valueHexView=n.subarray(t,t+r),r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,a.utilDecodeTC.call(this),this.blockLength=r,t+r):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}L.NAME="BooleanValueBlock";class j extends C{constructor(e={}){super(e,L),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}B.Boolean=j,j.NAME="BOOLEAN";class M extends S(N){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,r){let n=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(n=N.prototype.fromBER.call(this,e,t,r)))return n;for(let e=0;e<this.value.length;e++){let t=this.value[e].constructor.NAME;if(t===b){if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;break}if(t!==v)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(e,t,r),this.blockLength=r;return n}toBER(e,t){return this.isConstructed?N.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}M.NAME="OctetStringValueBlock";class D extends C{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;null!==(n=r.isConstructed)&&void 0!==n||(r.isConstructed=!!(null===(i=r.value)||void 0===i?void 0:i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},M),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){let n=e instanceof ArrayBuffer?new Uint8Array(e):e,i=n.subarray(t,t+r);try{if(i.byteLength){let e=O(i,0,i.byteLength);-1!==e.offset&&e.offset===r&&(this.valueBlock.value=[e.result])}}catch(e){}}return super.fromBER(e,t,r)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?I.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${s.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let t of this.valueBlock.value)t instanceof D&&e.push(t.valueBlock.valueHexView);return s.BufferSourceConverter.concat(e)}}B.OctetString=D,D.NAME=v;class H extends S(N){constructor({unusedBits:e=0,isConstructed:t=!1,...r}={}){super(r),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r)return t;let n=-1;if(this.isConstructed){if(-1===(n=N.prototype.fromBER.call(this,e,t,r)))return n;for(let e of this.value){let t=e.constructor.NAME;if(t===b){if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;break}if(t!==w)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=r.unusedBits}return n}let i=s.BufferSourceConverter.toUint8Array(e);if(!c(this,i,t,r))return -1;let o=i.subarray(t,t+r);if(this.unusedBits=o[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let e=o.subarray(1);try{if(e.byteLength){let t=O(e,0,e.byteLength);-1!==t.offset&&t.offset===r-1&&(this.value=[t.result])}}catch(e){}}return this.valueHexView=o.subarray(1),this.blockLength=o.length,t+r}toBER(e,t){if(this.isConstructed)return N.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return g;let r=new Uint8Array(this.valueHexView.length+1);return r[0]=this.unusedBits,r.set(this.valueHexView,1),r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}H.NAME="BitStringValueBlock";class q extends C{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;null!==(n=r.isConstructed)&&void 0!==n||(r.isConstructed=!!(null===(i=r.value)||void 0===i?void 0:i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},H),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return I.prototype.onAsciiEncoding.call(this);{let e=[],t=this.valueBlock.valueHexView;for(let r of t)e.push(r.toString(2).padStart(8,"0"));let r=e.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}}function $(e){if(e>=f.length)for(let t=f.length;t<=e;t++){let e=new Uint8Array([0]),r=f[t-1].slice(0);for(let t=r.length-1;t>=0;t--){let n=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=n[0]/10,r[t]=n[0]%10}e[0]>0&&(r=a.utilConcatView(e,r)),f.push(r)}return f[e]}B.BitString=q,q.NAME=w;class z extends S(_){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=a.utilDecodeTC.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(a.utilEncodeTC(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){let i=this.fromBER(e,t,r);if(-1===i)return i;let o=this.valueHexView;return 0===o[0]&&(128&o[1])!=0?this.valueHexView=o.subarray(1):0!==n&&o.length<n&&(n-o.length>1&&(n=o.length+1),this.valueHexView=o.subarray(n-o.length)),i}toDER(e=!1){let t=this.valueHexView;switch(!0){case(128&t[0])!=0:{let e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&(128&t[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,r){let n=super.fromBER(e,t,r);return -1===n||this.setValueHex(),n}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e;let t=8*this.valueHexView.length-1,r=new Uint8Array(8*this.valueHexView.length/3),n=0,i=this.valueHexView,o="",s=!1;for(let s=i.byteLength-1;s>=0;s--){e=i[s];for(let i=0;i<8;i++)(1&e)==1&&(n===t?(r=function(e,t){let r,n=0,i=new Uint8Array(e),o=new Uint8Array(t),s=i.slice(0),a=s.length-1,l=o.slice(0),u=l.length-1,c=0;for(let e=u;e>=0;e--,c++)!0==(r=s[a-c]-l[u-c]-n)<0?(n=1,s[a-c]=r+10):(n=0,s[a-c]=r);if(n>0)for(let e=a-u+1;e>=0;e--,c++)if((r=s[a-c]-n)<0)n=1,s[a-c]=r+10;else{n=0,s[a-c]=r;break}return s.slice()}($(n),r),o="-"):r=function(e,t){let r=new Uint8Array([0]),n=new Uint8Array(e),i=new Uint8Array(t),o=n.slice(0),s=o.length-1,l=i.slice(0),u=l.length-1,c=0,h=u<s?s:u,f=0;for(let e=h;e>=0;e--,f++)c=!0==f<l.length?o[s-f]+l[u-f]+r[0]:o[s-f]+r[0],(r[0]=c/10,!0==f>=o.length)?o=a.utilConcatView(new Uint8Array([c%10]),o):o[s-f]=c%10;return r[0]>0&&(o=a.utilConcatView(r,o)),o}(r,$(n))),n++,e>>=1}for(let e=0;e<r.length;e++)r[e]&&(s=!0),s&&(o+=d.charAt(r[e]));return!1===s&&(o+=d.charAt(0)),o}}z.NAME="IntegerValueBlock",Object.defineProperty(z.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class J extends C{constructor(e={}){super(e,z),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return l(),BigInt(this.valueBlock.toString())}static fromBigInt(e){l();let t=BigInt(e),r=new h,n=t.toString(16).replace(/^-/,""),i=new Uint8Array(s.Convert.FromHex(n));if(t<0){let e=new Uint8Array(i.length+(128&i[0]?1:0));e[0]|=128;let n=BigInt(`0x${s.Convert.ToHex(e)}`),o=s.BufferSourceConverter.toUint8Array(s.Convert.FromHex((n+t).toString(16)));o[0]|=128,r.write(o)}else 128&i[0]&&r.write(new Uint8Array([0])),r.write(i);let o=new J({valueHex:r.final()});return o}convertToDER(){let e=new J({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new J({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}B.Integer=J,J.NAME="INTEGER";class V extends J{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}B.Enumerated=V,V.NAME="ENUMERATED";class F extends S(_){constructor({valueDec:e=-1,isFirstSid:t=!1,...r}={}){super(r),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,r){if(!r)return t;let n=s.BufferSourceConverter.toUint8Array(e);if(!c(this,n,t,r))return -1;let i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&i[e],this.blockLength++,(128&i[e])!=0);e++);let o=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)o[e]=this.valueHexView[e];return(this.valueHexView=o,(128&i[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=a.utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){l();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;let r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++)r[e]=parseInt(t.slice(7*e,7*e+7),2)+(e+1<r.length?128:0);this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=a.utilToBase(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",g;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=128|e[t];r[n]=e[n]}return r}toString(){let e="";if(this.isHexOnly)e=s.Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}F.NAME="sidBlock";class W extends _{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let n=t;for(;r>0;){let t=new F;if(-1===(n=t.fromBER(e,n,r))){this.blockLength=0,this.error=t.error;break}0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e){let t=[];for(let r=0;r<this.value.length;r++){let n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,g;t.push(n)}return u(t)}fromString(e){this.value=[];let t=0,r=0,n="",i=!1;do if(n=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1,i){let e=this.value[0],t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}let r=parseInt(n,10);if(isNaN(r))return;e.valueDec=r+t,i=!1}else{let e=new F;if(n>Number.MAX_SAFE_INTEGER){l();let t=BigInt(n);e.valueBigInt=t}else if(e.valueDec=parseInt(n,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,i=!0),this.value.push(e)}while(-1!==r)}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e=`${e}.`),t?(n=`{${n}}`,this.value[r].isFirstSid?e=`2.{${n} - 80}`:e+=n):e+=n}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}W.NAME="ObjectIdentifierValueBlock";class G extends C{constructor(e={}){super(e,W),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}B.ObjectIdentifier=G,G.NAME="OBJECT IDENTIFIER";class Y extends S(A){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,r){if(0===r)return t;let n=s.BufferSourceConverter.toUint8Array(e);if(!c(this,n,t,r))return -1;let i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&i[e],this.blockLength++,(128&i[e])!=0);e++);let o=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)o[e]=this.valueHexView[e];return(this.valueHexView=o,(128&i[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=a.utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=a.utilToBase(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",g;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=128|e[t];r[n]=e[n]}return r.buffer}toString(){return this.isHexOnly?s.Convert.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Y.NAME="relativeSidBlock";class X extends _{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let n=t;for(;r>0;){let t=new Y;if(-1===(n=t.fromBER(e,n,r))){this.blockLength=0,this.error=t.error;break}this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e,t){let r=[];for(let t=0;t<this.value.length;t++){let n=this.value[t].toBER(e);if(0===n.byteLength)return this.error=this.value[t].error,g;r.push(n)}return u(r)}fromString(e){this.value=[];let t=0,r=0,n="";do{n=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1;let i=new Y;if(i.valueDec=parseInt(n,10),isNaN(i.valueDec))break;this.value.push(i)}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e=`${e}.`),t?e+=n=`{${n}}`:e+=n}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}X.NAME="RelativeObjectIdentifierValueBlock";class Z extends C{constructor(e={}){super(e,X),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}B.RelativeObjectIdentifier=Z,Z.NAME="RelativeObjectIdentifier";class Q extends I{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}B.Sequence=Q,Q.NAME="SEQUENCE";class ee extends I{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}B.Set=ee,ee.NAME="SET";class et extends S(_){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}}et.NAME="StringValueBlock";class er extends et{}er.NAME="SimpleStringValueBlock";class en extends P{constructor({...e}={}){super(e,er)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,s.BufferSourceConverter.toUint8Array(e))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}en.NAME="SIMPLE STRING";class ei extends en{fromBuffer(e){this.valueBlock.valueHexView=s.BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=s.Convert.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=s.Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(s.Convert.FromUtf8String(e)),this.valueBlock.value=e}}ei.NAME="Utf8StringValueBlock";class eo extends ei{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}B.Utf8String=eo,eo.NAME="UTF8String";class es extends en{fromBuffer(e){this.valueBlock.value=s.Convert.ToUtf16String(e),this.valueBlock.valueHexView=s.BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(s.Convert.FromUtf16String(e))}}es.NAME="BmpStringValueBlock";class ea extends es{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}B.BmpString=ea,ea.NAME="BMPString";class el extends en{fromBuffer(e){let t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),r=new Uint8Array(t);for(let e=0;e<r.length;e+=4)r[e]=r[e+3],r[e+1]=r[e+2],r[e+2]=0,r[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let n=0;n<t;n++){let t=a.utilToBase(e.charCodeAt(n),8),i=new Uint8Array(t);if(i.length>4)continue;let o=4-i.length;for(let e=i.length-1;e>=0;e--)r[4*n+e+o]=i[e]}this.valueBlock.value=e}}el.NAME="UniversalStringValueBlock";class eu extends el{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}B.UniversalString=eu,eu.NAME="UniversalString";class ec extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}B.NumericString=ec,ec.NAME="NumericString";class eh extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}B.PrintableString=eh,eh.NAME="PrintableString";class ef extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}B.TeletexString=ef,ef.NAME="TeletexString";class ed extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}B.VideotexString=ed,ed.NAME="VideotexString";class ep extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}B.IA5String=ep,ep.NAME="IA5String";class ey extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}B.GraphicString=ey,ey.NAME="GraphicString";class eg extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}B.VisibleString=eg,eg.NAME="VisibleString";class em extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}B.GeneralString=em,em.NAME="GeneralString";class eb extends en{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}B.CharacterString=eb,eb.NAME="CharacterString";class ev extends eg{constructor({value:e,valueDate:t,...r}={}){if(super(r),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,s.BufferSourceConverter.toUint8Array(e)))}toBuffer(){let e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(null===t){this.error="Wrong input string for conversion";return}let r=parseInt(t[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(e="iso"){if("iso"===e){let e=Array(7);return e[0]=a.padNumber(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=a.padNumber(this.month,2),e[2]=a.padNumber(this.day,2),e[3]=a.padNumber(this.hour,2),e[4]=a.padNumber(this.minute,2),e[5]=a.padNumber(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}B.UTCTime=ev,ev.NAME="UTCTime";class ew extends ev{constructor(e={}){var t;super(e),null!==(t=this.millisecond)&&void 0!==t||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,r=!1,n="",i="",o=0,s=0,a=0;if("Z"===e[e.length-1])n=e.substring(0,e.length-1),r=!0;else{let t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw Error("Wrong input string for conversion");n=e}if(r){if(-1!==n.indexOf("+")||-1!==n.indexOf("-"))throw Error("Wrong input string for conversion")}else{let e=1,t=n.indexOf("+"),r="";if(-1===t&&(t=n.indexOf("-"),e=-1),-1!==t){if(r=n.substring(t+1),n=n.substring(0,t),2!==r.length&&4!==r.length)throw Error("Wrong input string for conversion");let i=parseInt(r.substring(0,2),10);if(isNaN(i.valueOf()))throw Error("Wrong input string for conversion");if(s=e*i,4===r.length){if(isNaN((i=parseInt(r.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");a=e*i}}}let l=n.indexOf(".");if(-1===l&&(l=n.indexOf(",")),-1!==l){let e=new Number(`0${n.substring(l)}`);if(isNaN(e.valueOf()))throw Error("Wrong input string for conversion");o=e.valueOf(),i=n.substring(0,l)}else i=n;switch(!0){case 8===i.length:if(t=/(\d{4})(\d{2})(\d{2})/ig,-1!==l)throw Error("Wrong input string for conversion");break;case 10===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=60*o;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=60*o;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=1e3*o;this.millisecond=Math.floor(e)}break;default:throw Error("Wrong input string for conversion")}let u=t.exec(i);if(null===u)throw Error("Wrong input string for conversion");for(let e=1;e<u.length;e++)switch(e){case 1:this.year=parseInt(u[e],10);break;case 2:this.month=parseInt(u[e],10);break;case 3:this.day=parseInt(u[e],10);break;case 4:this.hour=parseInt(u[e],10)+s;break;case 5:this.minute=parseInt(u[e],10)+a;break;case 6:this.second=parseInt(u[e],10);break;default:throw Error("Wrong input string for conversion")}if(!1===r){let e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if("iso"===e){let e=[];return e.push(a.padNumber(this.year,4)),e.push(a.padNumber(this.month,2)),e.push(a.padNumber(this.day,2)),e.push(a.padNumber(this.hour,2)),e.push(a.padNumber(this.minute,2)),e.push(a.padNumber(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(a.padNumber(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}B.GeneralizedTime=ew,ew.NAME="GeneralizedTime";class eS extends eo{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}B.DATE=eS,eS.NAME="DATE";class eA extends eo{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}B.TimeOfDay=eA,eA.NAME="TimeOfDay";class e_ extends eo{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}B.DateTime=e_,e_.NAME="DateTime";class ek extends eo{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}B.Duration=ek,ek.NAME="Duration";class eE extends eo{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}B.TIME=eE,eE.NAME="TIME";class eB{constructor({name:e="",optional:t=!1}={}){this.name=e,this.optional=t}}class eC extends eB{constructor({value:e=[],...t}={}){super(t),this.value=e}}class eP extends eB{constructor({value:e=new eB,local:t=!1,...r}={}){super(r),this.value=e,this.local=t}}function eT(e,t,r){if(r instanceof eC){for(let n=0;n<r.value.length;n++){let i=eT(e,t,r.value[n]);if(i.verified)return{verified:!0,result:e}}{let e={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(p)&&(e.name=r.name),e}}if(r instanceof eB)return r.hasOwnProperty(p)&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1||"idBlock"in r==!1||"fromBER"in r.idBlock==!1||"toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let n=r.idBlock.toBER(!1);if(0===n.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};let i=r.idBlock.fromBER(n,0,n.byteLength);if(-1===i)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!("isHexOnly"in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly){if(y in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let n=r.idBlock.valueHexView,i=t.idBlock.valueHexView;if(n.length!==i.length)return{verified:!1,result:e};for(let t=0;t<n.length;t++)if(n[t]!==i[1])return{verified:!1,result:e}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(e[r.name]=t)),r instanceof B.Constructed){let n=0,i={verified:!1,result:{error:"Unknown error"}},o=r.valueBlock.value.length;if(o>0&&r.valueBlock.value[0]instanceof eP&&(o=t.valueBlock.value.length),0===o)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){let t=!0;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let s=0;s<o;s++)if(s-n>=t.valueBlock.value.length){if(!1===r.valueBlock.value[s].optional){let t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}}else if(r.valueBlock.value[0]instanceof eP){if(!1===(i=eT(e,t.valueBlock.value[s],r.valueBlock.value[0].value)).verified){if(!r.valueBlock.value[0].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),i;n++}if(p in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};void 0===(n="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(n[r.valueBlock.value[0].name]=[]),n[r.valueBlock.value[0].name].push(t.valueBlock.value[s])}}else if(!1===(i=eT(e,t.valueBlock.value[s-n],r.valueBlock.value[s])).verified){if(!r.valueBlock.value[s].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),i;n++}if(!1===i.verified){let t={verified:!1,result:e};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}return{verified:!0,result:e}}if(r.primitiveSchema&&y in t.valueBlock){let n=O(t.valueBlock.valueHexView);if(-1===n.offset){let t={verified:!1,result:n.result};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}return eT(e,n.result,r.primitiveSchema)}return{verified:!0,result:e}}t.Any=eB,t.BaseBlock=C,t.BaseStringBlock=P,t.BitString=q,t.BmpString=ea,t.Boolean=j,t.CharacterString=eb,t.Choice=eC,t.Constructed=I,t.DATE=eS,t.DateTime=e_,t.Duration=ek,t.EndOfContent=K,t.Enumerated=V,t.GeneralString=em,t.GeneralizedTime=ew,t.GraphicString=ey,t.HexBlock=S,t.IA5String=ep,t.Integer=J,t.Null=U,t.NumericString=ec,t.ObjectIdentifier=G,t.OctetString=D,t.Primitive=x,t.PrintableString=eh,t.RawData=class{constructor({data:e=m}={}){this.dataView=s.BufferSourceConverter.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=s.BufferSourceConverter.toUint8Array(e)}fromBER(e,t,r){let n=t+r;return this.dataView=s.BufferSourceConverter.toUint8Array(e).subarray(t,n),n}toBER(e){return this.dataView.slice().buffer}},t.RelativeObjectIdentifier=Z,t.Repeated=eP,t.Sequence=Q,t.Set=ee,t.TIME=eE,t.TeletexString=ef,t.TimeOfDay=eA,t.UTCTime=ev,t.UniversalString=eu,t.Utf8String=eo,t.ValueBlock=_,t.VideotexString=ed,t.ViewWriter=h,t.VisibleString=eg,t.compareSchema=eT,t.fromBER=function(e){if(!e.byteLength){let e=new C({},_);return e.error="Input buffer has zero length",{offset:-1,result:e}}return O(s.BufferSourceConverter.toUint8Array(e).slice(),0,e.byteLength)},t.verifySchema=function(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let r=O(s.BufferSourceConverter.toUint8Array(e));return -1===r.offset?{verified:!1,result:r.result}:eT(r.result,r.result,t)}},50002:(e,t)=>{/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=(t||{}).decode||i,o=0;o<e.length;){var s=e.indexOf("=",o);if(-1===s)break;var a=e.indexOf(";",o);if(-1===a)a=e.length;else if(a<s){o=e.lastIndexOf(";",s-1)+1;continue}var l=e.slice(o,s).trim();if(void 0===r[l]){var u=e.slice(s+1,a).trim();34===u.charCodeAt(0)&&(u=u.slice(1,-1)),r[l]=function(e,t){try{return t(e)}catch(t){return e}}(u,n)}o=a+1}return r},t.serialize=function(e,t,i){var s=i||{},a=s.encode||o;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var l=a(t);if(l&&!n.test(l))throw TypeError("argument val is invalid");var u=e+"="+l;if(null!=s.maxAge){var c=s.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(s.domain){if(!n.test(s.domain))throw TypeError("option domain is invalid");u+="; Domain="+s.domain}if(s.path){if(!n.test(s.path))throw TypeError("option path is invalid");u+="; Path="+s.path}if(s.expires){var h=s.expires;if("[object Date]"!==r.call(h)&&!(h instanceof Date)||isNaN(h.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+h.toUTCString()}if(s.httpOnly&&(u+="; HttpOnly"),s.secure&&(u+="; Secure"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():s.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var r=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function o(e){return encodeURIComponent(e)}},76196:e=>{var t=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==r},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a(Array.isArray(e)?[]:{},e,t):e}function i(e,t,r){return e.concat(t).map(function(e){return n(e,r)})}function o(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[])}function s(e,t){try{return t in e}catch(e){return!1}}function a(e,r,l){(l=l||{}).arrayMerge=l.arrayMerge||i,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=n;var u,c,h=Array.isArray(r);return h!==Array.isArray(e)?n(r,l):h?l.arrayMerge(e,r,l):(c={},(u=l).isMergeableObject(e)&&o(e).forEach(function(t){c[t]=n(e[t],u)}),o(r).forEach(function(t){(!s(e,t)||Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))&&(s(e,t)&&u.isMergeableObject(r[t])?c[t]=(function(e,t){if(!t.customMerge)return a;var r=t.customMerge(e);return"function"==typeof r?r:a})(t,u)(e[t],r[t],u):c[t]=n(r[t],u))}),c)}a.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,r){return a(e,r,t)},{})},e.exports=a},84639:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dotCase=void 0;var n=r(15803),i=r(29942);t.dotCase=function(e,t){return void 0===t&&(t={}),i.noCase(e,n.__assign({delimiter:"."},t))}},39998:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lowerCase=t.localeLowerCase=void 0;var r={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{:"i",I:"",I:"i"}},az:{regexp:/\u0130/g,map:{:"i",I:"",I:"i"}},lt:{regexp:/\u0049|\u004A|\u012E|\u00CC|\u00CD|\u0128/g,map:{I:"i",J:"j",:"",:"i",:"i",:"i"}}};function n(e){return e.toLowerCase()}t.localeLowerCase=function(e,t){var i=r[t.toLowerCase()];return i?n(e.replace(i.regexp,function(e){return i.map[e]})):n(e)},t.lowerCase=n},50104:e=>{let t=e=>"object"==typeof e&&null!==e,r=Symbol("skip"),n=e=>t(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),i=(e,t,o,s=new WeakMap)=>{if(o={deep:!1,target:{},...o},s.has(e))return s.get(e);s.set(e,o.target);let{target:a}=o;delete o.target;let l=e=>e.map(e=>n(e)?i(e,t,o,s):e);if(Array.isArray(e))return l(e);for(let[u,c]of Object.entries(e)){let h=t(u,c,e);if(h===r)continue;let[f,d,{shouldRecurse:p=!0}={}]=h;"__proto__"!==f&&(o.deep&&p&&n(d)&&(d=Array.isArray(d)?l(d):i(d,t,o,s)),a[f]=d)}return a};e.exports=(e,r,n)=>{if(!t(e))throw TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return i(e,r,n)},e.exports.mapObjectSkip=r},1468:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PageSignatureError:function(){return r},RemovedPageError:function(){return n},RemovedUAError:function(){return i}});class r extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class n extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class i extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},32160:(e,t,r)=>{Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return n.NextRequest}});let n=r(37021)},37021:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERNALS:function(){return a},NextRequest:function(){return l}});let n=r(65973),i=r(75746),o=r(1468),s=r(93497),a=Symbol("internal request");class l extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);(0,i.validateURL)(r),e instanceof Request?super(e,t):super(r,t);let o=new n.NextURL(r,{headers:(0,i.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig});this[a]={cookies:new s.RequestCookies(this.headers),geo:t.geo||{},ip:t.ip,nextUrl:o,url:o.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[a].cookies}get geo(){return this[a].geo}get ip(){return this[a].ip}get nextUrl(){return this[a].nextUrl}get page(){throw new o.RemovedPageError}get ua(){throw new o.RemovedUAError}get url(){return this[a].url}}},29942:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.noCase=void 0;var n=r(39998),i=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],o=/[^A-Z0-9]+/gi;function s(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(e,t){return e.replace(t,r)},e)}t.noCase=function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,a=t.stripRegexp,l=t.transform,u=void 0===l?n.lowerCase:l,c=t.delimiter,h=void 0===c?" ":c,f=s(s(e,void 0===r?i:r,"$1\x00$2"),void 0===a?o:a,"\x00"),d=0,p=f.length;"\x00"===f.charAt(d);)d++;for(;"\x00"===f.charAt(p-1);)p--;return f.slice(d,p).split("\x00").map(u).join(h)}},18624:(e,t)=>{function r(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function n(e){return e&&e.sensitive?"":"i"}t.Bo=void 0,t.Bo=function e(t,i,o){var s;return t instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,i=r.exec(e.source);i;)t.push({name:i[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),i=r.exec(e.source);return e}(t,i):Array.isArray(t)?(s=t.map(function(t){return e(t,i,o).source}),new RegExp("(?:".concat(s.join("|"),")"),n(o))):function(e,t,i){void 0===i&&(i={});for(var o=i.strict,s=void 0!==o&&o,a=i.start,l=i.end,u=i.encode,c=void 0===u?function(e){return e}:u,h=i.delimiter,f=i.endsWith,d="[".concat(r(void 0===f?"":f),"]|$"),p="[".concat(r(void 0===h?"/#?":h),"]"),y=void 0===a||a?"^":"",g=0;g<e.length;g++){var m=e[g];if("string"==typeof m)y+=r(c(m));else{var b=r(c(m.prefix)),v=r(c(m.suffix));if(m.pattern){if(t&&t.push(m),b||v){if("+"===m.modifier||"*"===m.modifier){var w="*"===m.modifier?"?":"";y+="(?:".concat(b,"((?:").concat(m.pattern,")(?:").concat(v).concat(b,"(?:").concat(m.pattern,"))*)").concat(v,")").concat(w)}else y+="(?:".concat(b,"(").concat(m.pattern,")").concat(v,")").concat(m.modifier)}else"+"===m.modifier||"*"===m.modifier?y+="((?:".concat(m.pattern,")").concat(m.modifier,")"):y+="(".concat(m.pattern,")").concat(m.modifier)}else y+="(?:".concat(b).concat(v,")").concat(m.modifier)}}if(void 0===l||l)s||(y+="".concat(p,"?")),y+=i.endsWith?"(?=".concat(d,")"):"$";else{var S=e[e.length-1],A="string"==typeof S?p.indexOf(S[S.length-1])>-1:void 0===S;s||(y+="(?:".concat(p,"(?=").concat(d,"))?")),A||(y+="(?=".concat(p,"|").concat(d,")"))}return new RegExp(y,n(i))}(function(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var i="",o=r+1;o<e.length;){var s=e.charCodeAt(o);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s){i+=e[o++];continue}break}if(!i)throw TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:i}),r=o;continue}if("("===n){var a=1,l="",o=r+1;if("?"===e[o])throw TypeError('Pattern cannot start with "?" at '.concat(o));for(;o<e.length;){if("\\"===e[o]){l+=e[o++]+e[o++];continue}if(")"===e[o]){if(0==--a){o++;break}}else if("("===e[o]&&(a++,"?"!==e[o+1]))throw TypeError("Capturing groups are not allowed at ".concat(o));l+=e[o++]}if(a)throw TypeError("Unbalanced pattern at ".concat(r));if(!l)throw TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:l}),r=o;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),i=t.prefixes,o=void 0===i?"./":i,s="[^".concat(r(t.delimiter||"/#?"),"]+?"),a=[],l=0,u=0,c="",h=function(e){if(u<n.length&&n[u].type===e)return n[u++].value},f=function(e){var t=h(e);if(void 0!==t)return t;var r=n[u],i=r.type,o=r.index;throw TypeError("Unexpected ".concat(i," at ").concat(o,", expected ").concat(e))},d=function(){for(var e,t="";e=h("CHAR")||h("ESCAPED_CHAR");)t+=e;return t};u<n.length;){var p=h("CHAR"),y=h("NAME"),g=h("PATTERN");if(y||g){var m=p||"";-1===o.indexOf(m)&&(c+=m,m=""),c&&(a.push(c),c=""),a.push({name:y||l++,prefix:m,suffix:"",pattern:g||s,modifier:h("MODIFIER")||""});continue}var b=p||h("ESCAPED_CHAR");if(b){c+=b;continue}if(c&&(a.push(c),c=""),h("OPEN")){var m=d(),v=h("NAME")||"",w=h("PATTERN")||"",S=d();f("CLOSE"),a.push({name:v||(w?l++:""),pattern:v&&!w?s:w,prefix:m,suffix:S,modifier:h("MODIFIER")||""});continue}f("END")}return a}(t,o),i,o)}},81648:(e,t)=>{class r{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){let n=r.toUint8Array(e),i=r.toUint8Array(t);if(n.length!==i.byteLength)return!1;for(let e=0;e<n.length;e++)if(n[e]!==i[e])return!1;return!0}static concat(...e){let t;t=!Array.isArray(e[0])||e[1]instanceof Function?Array.isArray(e[0])&&e[1]instanceof Function?e[0]:e[e.length-1]instanceof Function?e.slice(0,e.length-1):e:e[0];let r=0;for(let e of t)r+=e.byteLength;let n=new Uint8Array(r),i=0;for(let e of t){let t=this.toUint8Array(e);n.set(t,i),i+=t.length}return e[e.length-1]instanceof Function?this.toView(n,e[e.length-1]):n.buffer}}let n="string",i=/^[0-9a-f]+$/i,o=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,s=/^[a-zA-Z0-9-_]+$/;class a{static fromString(e){let t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}static toString(e){let t=r.toUint8Array(e),n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);let i=decodeURIComponent(escape(n));return i}}class l{static toString(e,t=!1){let n=r.toArrayBuffer(e),i=new DataView(n),o="";for(let e=0;e<n.byteLength;e+=2){let r=i.getUint16(e,t);o+=String.fromCharCode(r)}return o}static fromString(e,t=!1){let r=new ArrayBuffer(2*e.length),n=new DataView(r);for(let r=0;r<e.length;r++)n.setUint16(2*r,e.charCodeAt(r),t);return r}}class u{static isHex(e){return typeof e===n&&i.test(e)}static isBase64(e){return typeof e===n&&o.test(e)}static isBase64Url(e){return typeof e===n&&s.test(e)}static ToString(e,t="utf8"){let n=r.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return l.toString(n,!0);case"utf16":case"utf16be":return l.toString(n);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return l.fromString(e,!0);case"utf16":case"utf16be":return l.fromString(e);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){let t=r.toUint8Array(e);if("undefined"==typeof btoa)return Buffer.from(t).toString("base64");{let e=this.ToString(t,"binary");return btoa(e)}}static FromBase64(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!u.isBase64(t))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!u.isBase64Url(t))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=u.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return a.fromString(e);case"utf16":case"utf16be":return l.fromString(e);case"utf16le":case"usc2":return l.fromString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=u.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return a.toString(e);case"utf16":case"utf16be":return l.toString(e);case"utf16le":case"usc2":return l.toString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}static ToBinary(e){let t=r.toUint8Array(e),n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n}static ToHex(e){let t=r.toUint8Array(e),n="",i=t.length;for(let e=0;e<i;e++){let r=t[e];r<16&&(n+="0"),n+=r.toString(16)}return n}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!u.isHex(t))throw TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){let n=t.slice(e,e+2);r[e/2]=parseInt(n,16)}return r.buffer}static ToUtf16String(e,t=!1){return l.toString(e,t)}static FromUtf16String(e,t=!1){return l.fromString(e,t)}static Base64Padding(e){let t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}u.DEFAULT_UTF8_ENCODING="utf8",t.BufferSourceConverter=r,t.Convert=u,t.assign=function(e,...t){let r=arguments[0];for(let e=1;e<arguments.length;e++){let t=arguments[e];for(let e in t)r[e]=t[e]}return r},t.combine=function(...e){let t=e.map(e=>e.byteLength).reduce((e,t)=>e+t),r=new Uint8Array(t),n=0;return e.map(e=>new Uint8Array(e)).forEach(e=>{for(let t of e)r[n++]=t}),r.buffer},t.isEqual=function(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==n[t])return!1;return!0}},47162:(e,t)=>{function r(e,t){let r=0;if(1===e.length)return e[0];for(let n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function n(e,t,r=-1){let n=e,i=0,o=Math.pow(2,t);for(let s=1;s<8;s++){if(e<o){let e;if(r<0)e=new ArrayBuffer(s),i=s;else{if(r<s)return new ArrayBuffer(0);e=new ArrayBuffer(r),i=r}let o=new Uint8Array(e);for(let e=s-1;e>=0;e--){let r=Math.pow(2,e*t);o[i-e-1]=Math.floor(n/r),n-=o[i-e-1]*r}return e}o*=Math.pow(2,t)}return new ArrayBuffer(0)}/*!
 Copyright (c) Peculiar Ventures, LLC
*/Object.defineProperty(t,"__esModule",{value:!0});let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",s=Math.log(2);t.arrayBufferToString=function(e){let t="",r=new Uint8Array(e);for(let e of r)t+=String.fromCharCode(e);return t},t.bufferToHexCodes=function(e,t=0,r=e.byteLength-t,n=!1){let i="";for(let o of new Uint8Array(e,t,r)){let e=o.toString(16).toUpperCase();1===e.length&&(i+="0"),i+=e,n&&(i+=" ")}return i.trim()},t.checkBufferParams=function(e,t,r,n){return t instanceof ArrayBuffer?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1)},t.clearProps=function(e,t){for(let r of t)delete e[r]},t.fromBase64=function(e,t=!1,r=!1){let n=t?o:i;function s(e){for(let t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function a(e){return 64===e?0:e}let l=0,u="";for(;l<e.length;){let t=s(e.charAt(l++)),r=l>=e.length?0:s(e.charAt(l++)),n=l>=e.length?0:s(e.charAt(l++)),i=l>=e.length?0:s(e.charAt(l++)),o=a(t)<<2|a(r)>>4,c=(15&a(r))<<4|a(n)>>2,h=(3&a(n))<<6|a(i);u+=String.fromCharCode(o),64!==n&&(u+=String.fromCharCode(c)),64!==i&&(u+=String.fromCharCode(h))}if(r){let e=u.length,t=-1;for(let r=e-1;r>=0;r--)if(0!==u.charCodeAt(r)){t=r;break}u=-1!==t?u.slice(0,t+1):""}return u},t.getParametersValue=function(e,t,r){var n;return e instanceof Object==!1?r:null!==(n=e[t])&&void 0!==n?n:r},t.getUTCDate=function(e){return new Date(e.getTime()+6e4*e.getTimezoneOffset())},t.isEqualBuffer=function(e,t){if(e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),n=new Uint8Array(t);for(let e=0;e<r.length;e++)if(r[e]!==n[e])return!1;return!0},t.nearestPowerOf2=function(e){let t=Math.log(e)/s,r=Math.floor(t),n=Math.round(t);return r===n?r:n},t.padNumber=function(e,t){let r=e.toString(10);if(t<r.length)return"";let n=t-r.length,i=Array(n);for(let e=0;e<n;e++)i[e]="0";let o=i.join("");return o.concat(r)},t.stringToArrayBuffer=function(e){let t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return r},t.toBase64=function(e,t=!1,r=!1,n=!1){let s=0,a=0,l=0,u="",c=t?o:i;if(n){let t=0;for(let r=0;r<e.length;r++)if(0!==e.charCodeAt(r)){t=r;break}e=e.slice(t)}for(;s<e.length;){let t=e.charCodeAt(s++);s>=e.length&&(a=1);let n=e.charCodeAt(s++);s>=e.length&&(l=1);let i=e.charCodeAt(s++),o=t>>2,h=(3&t)<<4|n>>4,f=(15&n)<<2|i>>6,d=63&i;1===a?f=d=64:1===l&&(d=64),r?64===f?u+=`${c.charAt(o)}${c.charAt(h)}`:64===d?u+=`${c.charAt(o)}${c.charAt(h)}${c.charAt(f)}`:u+=`${c.charAt(o)}${c.charAt(h)}${c.charAt(f)}${c.charAt(d)}`:u+=`${c.charAt(o)}${c.charAt(h)}${c.charAt(f)}${c.charAt(d)}`}return u},t.utilConcatBuf=function(...e){let t=0,r=0;for(let r of e)t+=r.byteLength;let n=new ArrayBuffer(t),i=new Uint8Array(n);for(let t of e)i.set(new Uint8Array(t),r),r+=t.byteLength;return n},t.utilConcatView=function(...e){let t=0,r=0;for(let r of e)t+=r.length;let n=new ArrayBuffer(t),i=new Uint8Array(n);for(let t of e)i.set(t,r),r+=t.length;return i},t.utilDecodeTC=function(){let e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let t=255===e[0]&&128&e[1],r=0===e[0]&&(128&e[1])==0;(t||r)&&this.warnings.push("Needlessly long format")}let t=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++)n[e]=0;n[0]=128&e[0];let i=r(n,8),o=new ArrayBuffer(this.valueHex.byteLength),s=new Uint8Array(o);for(let t=0;t<this.valueHex.byteLength;t++)s[t]=e[t];s[0]&=127;let a=r(s,8);return a-i},t.utilEncodeTC=function(e){let t=e<0?-1*e:e,r=128;for(let i=1;i<8;i++){if(t<=r){if(e<0){let e=r-t,o=n(e,8,i),s=new Uint8Array(o);return s[0]|=128,o}let o=n(t,8,i),s=new Uint8Array(o);if(128&s[0]){let e=o.slice(0),t=new Uint8Array(e);o=new ArrayBuffer(o.byteLength+1),s=new Uint8Array(o);for(let r=0;r<e.byteLength;r++)s[r+1]=t[r];s[0]=0}return o}r*=256}return new ArrayBuffer(0)},t.utilFromBase=r,t.utilToBase=n},46652:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.snakeCase=void 0;var n=r(15803),i=r(84639);t.snakeCase=function(e,t){return void 0===t&&(t={}),i.dotCase(e,n.__assign({delimiter:"_"},t))}},53918:(e,t,r)=>{let n=r(50104),{snakeCase:i}=r(46652);e.exports=function(e,t){return n(e,function(e,r){return[t.exclude.some(function(t){return"string"==typeof t?t===e:t.test(e)})?e:i(e,t.parsingOptions),r]},t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t))}},87713:(e,t,r)=>{/*!
 Copyright (c) Peculiar Ventures, LLC
*/var n=r(81648),i=r(98763),o=r(15803),s=r(55632),a=function(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}(r(94549));class l extends Error{}class u extends l{}class c extends l{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}}class h extends l{}class f extends l{constructor(e){super(`${e}: Missing required property`)}}function d(e){return"object"==typeof e&&"kty"in e}class p{async digest(...e){return this.checkDigest.apply(this,e),this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new c("digest")}async generateKey(...e){return this.checkGenerateKey.apply(this,e),this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r,...n){let i;if(this.checkAlgorithmName(e),this.checkGenerateKeyParams(e),!(r&&r.length))throw TypeError("Usages cannot be empty when creating a key.");i=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(r,i)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r,...n){throw new c("generateKey")}async sign(...e){return this.checkSign.apply(this,e),this.onSign.apply(this,e)}checkSign(e,t,r,...n){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"sign")}async onSign(e,t,r,...n){throw new c("sign")}async verify(...e){return this.checkVerify.apply(this,e),this.onVerify.apply(this,e)}checkVerify(e,t,r,n,...i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,n,...i){throw new c("verify")}async encrypt(...e){return this.checkEncrypt.apply(this,e),this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,n={},...i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r,...n){throw new c("encrypt")}async decrypt(...e){return this.checkDecrypt.apply(this,e),this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,n={},...i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r,...n){throw new c("decrypt")}async deriveBits(...e){return this.checkDeriveBits.apply(this,e),this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,n={},...i){if(this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"deriveBits":void 0),r%8!=0)throw new h("length: Is not multiple of 8")}async onDeriveBits(e,t,r,...n){throw new c("deriveBits")}async exportKey(...e){return this.checkExportKey.apply(this,e),this.onExportKey.apply(this,e)}checkExportKey(e,t,...r){if(this.checkKeyFormat(e),this.checkCryptoKey(t),!t.extractable)throw new l("key: Is not extractable")}async onExportKey(e,t,...r){throw new c("exportKey")}async importKey(...e){return this.checkImportKey.apply(this,e),this.onImportKey.apply(this,e)}checkImportKey(e,t,r,n,i,...o){this.checkKeyFormat(e),this.checkKeyData(e,t),this.checkAlgorithmName(r),this.checkImportParams(r),Array.isArray(this.usages)&&this.checkKeyUsages(i,this.usages)}async onImportKey(e,t,r,n,i,...o){throw new c("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase())throw new u("Unrecognized name")}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(let r of e)if(-1===t.indexOf(r))throw TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(e,t){if(this.checkAlgorithmName(e.algorithm),t&&-1===e.usages.indexOf(t))throw new l("key does not match that of operation")}checkRequiredProperty(e,t){if(!(t in e))throw new f(t)}checkHashAlgorithm(e,t){for(let r of t)if(r.toLowerCase()===e.name.toLowerCase())return;throw new h(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t)throw TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===e){if(!d(t))throw TypeError("keyData: Is not JsonWebToken")}else if(!n.BufferSourceConverter.isBufferSource(t))throw TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(e){return n.BufferSourceConverter.toArrayBuffer(e)}}class y extends p{checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not of type Number");switch(e.length){case 128:case 192:case 256:break;default:throw TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class g extends p{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let t=n.Convert.ToBase64(e.publicExponent);if(!("Aw=="===t||"AQAB"===t))throw TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384)throw TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class m extends p{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve"),this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(let t of this.namedCurves)if(t.toLowerCase()===e.toLowerCase())return;throw new h(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}let b=["secret","private","public"];class v{static create(e,t,r,n){let i=new this;return i.algorithm=e,i.type=t,i.extractable=r,i.usages=n,i}static isKeyType(e){return -1!==b.indexOf(e)}get[Symbol.toStringTag](){return"CryptoKey"}}class w extends m{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"public"),!(e.public instanceof v))throw TypeError("public: Is not a CryptoKey");if("public"!==e.public.type)throw new h("public: Is not a public key");if(e.public.algorithm.name!==this.name)throw new h(`public: Is not ${this.name} key`)}}let S=class{constructor(e){e&&(this.value=e)}};o.__decorate([i.AsnProp({type:i.AsnPropTypes.ObjectIdentifier})],S.prototype,"value",void 0),S=o.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],S);class A{constructor(e){Object.assign(this,e)}}o.__decorate([i.AsnProp({type:i.AsnPropTypes.ObjectIdentifier})],A.prototype,"algorithm",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Any,optional:!0})],A.prototype,"parameters",void 0);class _{constructor(){this.version=0,this.privateKeyAlgorithm=new A,this.privateKey=new ArrayBuffer(0)}}o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer})],_.prototype,"version",void 0),o.__decorate([i.AsnProp({type:A})],_.prototype,"privateKeyAlgorithm",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString})],_.prototype,"privateKey",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Any,optional:!0})],_.prototype,"attributes",void 0);class k{constructor(){this.publicKeyAlgorithm=new A,this.publicKey=new ArrayBuffer(0)}}o.__decorate([i.AsnProp({type:A})],k.prototype,"publicKeyAlgorithm",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.BitString})],k.prototype,"publicKey",void 0);let E={fromJSON:e=>n.Convert.FromBase64Url(e),toJSON:e=>n.Convert.ToBase64Url(new Uint8Array(e))},B={fromASN:e=>{let t=e.valueBlock.valueHex;return new Uint8Array(t)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1)},toASN:e=>{let t=new Uint8Array(e)[0]>127?n.combine(new Uint8Array([0]).buffer,e):e;return new a.Integer({valueHex:t})}};var C=Object.freeze({__proto__:null,AsnIntegerArrayBufferConverter:B,JsonBase64UrlArrayBufferConverter:E});class P{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}}o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerConverter})],P.prototype,"version",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"n",converter:E})],P.prototype,"modulus",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"e",converter:E})],P.prototype,"publicExponent",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"d",converter:E})],P.prototype,"privateExponent",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"p",converter:E})],P.prototype,"prime1",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"q",converter:E})],P.prototype,"prime2",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"dp",converter:E})],P.prototype,"exponent1",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"dq",converter:E})],P.prototype,"exponent2",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"qi",converter:E})],P.prototype,"coefficient",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Any,optional:!0})],P.prototype,"otherPrimeInfos",void 0);class T{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}}o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"n",converter:E})],T.prototype,"modulus",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:B}),s.JsonProp({name:"e",converter:E})],T.prototype,"publicExponent",void 0);let x=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){let e=new Uint8Array(this.value);if(4!==e[0])throw new l("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");e=new Uint8Array(this.value.slice(1));let t=e.length/2,r={x:n.Convert.ToBase64Url(e.buffer.slice(0,0+t)),y:n.Convert.ToBase64Url(e.buffer.slice(0+t,0+t+t))};return r}fromJSON(e){if(!("x"in e))throw Error("x: Missing required property");if(!("y"in e))throw Error("y: Missing required property");let t=n.Convert.FromBase64Url(e.x),r=n.Convert.FromBase64Url(e.y),i=n.combine(new Uint8Array([4]).buffer,t,r);return this.value=new Uint8Array(i).buffer,this}};o.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString})],x.prototype,"value",void 0),x=o.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],x);class O{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e))throw Error("d: Missing required property");if(this.privateKey=n.Convert.FromBase64Url(e.d),"x"in e){let t=new x;t.fromJSON(e);let r=i.AsnSerializer.toASN(t);"valueHex"in r.valueBlock&&(this.publicKey=r.valueBlock.valueHex)}return this}toJSON(){let e={};return e.d=n.Convert.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new x(this.publicKey).toJSON()),e}}o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:i.AsnIntegerConverter})],O.prototype,"version",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString})],O.prototype,"privateKey",void 0),o.__decorate([i.AsnProp({context:0,type:i.AsnPropTypes.Any,optional:!0})],O.prototype,"parameters",void 0),o.__decorate([i.AsnProp({context:1,type:i.AsnPropTypes.BitString,optional:!0})],O.prototype,"publicKey",void 0);let N={fromASN:e=>{let t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:e=>{let t=new Uint8Array(e);if(t[0]>127){let e=new Uint8Array(t.length+1);return e.set(t,1),new a.Integer({valueHex:e.buffer})}return new a.Integer({valueHex:e})}};var I=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:N});class R{static decodePoint(e,t){let r=n.BufferSourceConverter.toUint8Array(e);if(0===r.length||4!==r[0])throw Error("Only uncompressed point format supported");let i=(r.length-1)/2;if(i!==Math.ceil(t/8))throw Error("Point does not match field size");let o=r.slice(1,i+1),s=r.slice(i+1,i+1+i);return{x:o,y:s}}static encodePoint(e,t){let r=Math.ceil(t/8);if(e.x.byteLength!==r||e.y.byteLength!==r)throw Error("X,Y coordinates don't match point size criteria");let i=n.BufferSourceConverter.toUint8Array(e.x),o=n.BufferSourceConverter.toUint8Array(e.y),s=new Uint8Array(2*r+1);return s[0]=4,s.set(i,1),s.set(o,r+1),s}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,t){let r=this.getSize(t),i=n.BufferSourceConverter.toUint8Array(e.r),o=n.BufferSourceConverter.toUint8Array(e.s),s=new Uint8Array(2*r);return s.set(this.padStart(i,r)),s.set(this.padStart(o,r),r),s}static decodeSignature(e,t){let r=this.getSize(t),i=n.BufferSourceConverter.toUint8Array(e);if(i.length!==2*r)throw Error("Incorrect size of the signature");let o=i.slice(0,r),s=i.slice(r);return{r:this.trimStart(o),s:this.trimStart(s)}}static trimStart(e){let t=0;for(;t<e.length-1&&0===e[t];)t++;return 0===t?e:e.slice(t,e.length)}static padStart(e,t){if(t===e.length)return e;let r=new Uint8Array(t);return r.set(e,t-e.length),r}}class K{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){let t=e.byteLength/2,r=R.decodeSignature(e,8*t),i=new K;return i.r=n.BufferSourceConverter.toArrayBuffer(r.r),i.s=n.BufferSourceConverter.toArrayBuffer(r.s),i}toWebCryptoSignature(e){null!=e||(e=8*Math.max(this.r.byteLength,this.s.byteLength));let t=R.encodeSignature(this,e);return t.buffer}}o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:N})],K.prototype,"r",void 0),o.__decorate([i.AsnProp({type:i.AsnPropTypes.Integer,converter:N})],K.prototype,"s",void 0);class U extends _{}o.__decorate([i.AsnProp({context:1,implicit:!0,type:i.AsnPropTypes.BitString,optional:!0})],U.prototype,"publicKey",void 0);let L=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d)throw Error("d: Missing required property");return this.value=n.Convert.FromBase64Url(e.d),this}toJSON(){let e={d:n.Convert.ToBase64Url(this.value)};return e}};o.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString})],L.prototype,"value",void 0),L=o.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],L);let j=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){let e={x:n.Convert.ToBase64Url(this.value)};return e}fromJSON(e){if(!("x"in e))throw Error("x: Missing required property");return this.value=n.Convert.FromBase64Url(e.x),this}};o.__decorate([i.AsnProp({type:i.AsnPropTypes.BitString})],j.prototype,"value",void 0),j=o.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],j);let M=class{};o.__decorate([i.AsnProp({type:i.AsnPropTypes.OctetString}),s.JsonProp({type:s.JsonPropTypes.String,converter:E})],M.prototype,"d",void 0),M=o.__decorate([i.AsnType({type:i.AsnTypeTypes.Choice})],M);let D="1.2.840.10045.3.1.7",H="1.3.132.0",q=`${H}.34`,$=`${H}.35`,z=`${H}.10`,J="1.3.36.3.3.2.8.1.1",V=`${J}.1`,F=`${J}.2`,W=`${J}.3`,G=`${J}.4`,Y=`${J}.5`,X=`${J}.6`,Z=`${J}.7`,Q=`${J}.8`,ee=`${J}.9`,et=`${J}.10`,er=`${J}.11`,en=`${J}.12`,ei=`${J}.13`,eo=`${J}.14`;var es=Object.freeze({__proto__:null,AlgorithmIdentifier:A,get CurvePrivateKey(){return M},EcDsaSignature:K,EcPrivateKey:O,get EcPublicKey(){return x},get EdPrivateKey(){return L},get EdPublicKey(){return j},get ObjectIdentifier(){return S},OneAsymmetricKey:U,PrivateKeyInfo:_,PublicKeyInfo:k,RsaPrivateKey:P,RsaPublicKey:T,converters:I,idBrainpoolP160r1:V,idBrainpoolP160t1:F,idBrainpoolP192r1:W,idBrainpoolP192t1:G,idBrainpoolP224r1:Y,idBrainpoolP224t1:X,idBrainpoolP256r1:Z,idBrainpoolP256t1:Q,idBrainpoolP320r1:ee,idBrainpoolP320t1:et,idBrainpoolP384r1:er,idBrainpoolP384t1:en,idBrainpoolP512r1:ei,idBrainpoolP512t1:eo,idEd25519:"1.3.101.112",idEd448:"1.3.101.113",idEllipticCurve:H,idSecp256k1:z,idSecp256r1:D,idSecp384r1:q,idSecp521r1:$,idVersionOne:J,idX25519:"1.3.101.110",idX448:"1.3.101.111"});class ea{constructor(){}static register(e){let t=new S;t.value=e.id;let r=i.AsnConvert.serialize(t);this.items.push({...e,raw:r}),this.names.push(e.name)}static find(e){for(let t of(e=e.toUpperCase(),this.items))if(t.name.toUpperCase()===e||t.id.toUpperCase()===e)return t;return null}static get(e){let t=this.find(e);if(!t)throw Error(`Unsupported EC named curve '${e}'`);return t}}ea.items=[],ea.names=[],ea.register({name:"P-256",id:D,size:256}),ea.register({name:"P-384",id:q,size:384}),ea.register({name:"P-521",id:$,size:521}),ea.register({name:"K-256",id:z,size:256}),ea.register({name:"brainpoolP160r1",id:V,size:160}),ea.register({name:"brainpoolP160t1",id:F,size:160}),ea.register({name:"brainpoolP192r1",id:W,size:192}),ea.register({name:"brainpoolP192t1",id:G,size:192}),ea.register({name:"brainpoolP224r1",id:Y,size:224}),ea.register({name:"brainpoolP224t1",id:X,size:224}),ea.register({name:"brainpoolP256r1",id:Z,size:256}),ea.register({name:"brainpoolP256t1",id:Q,size:256}),ea.register({name:"brainpoolP320r1",id:ee,size:320}),ea.register({name:"brainpoolP320t1",id:et,size:320}),ea.register({name:"brainpoolP384r1",id:er,size:384}),ea.register({name:"brainpoolP384t1",id:en,size:384}),ea.register({name:"brainpoolP512r1",id:ei,size:512}),ea.register({name:"brainpoolP512t1",id:eo,size:512});class el extends p{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...e){return e[0]={length:this.defaultLength,...e[0]},super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);let r=e.length||0;if("number"!=typeof r)throw TypeError("length: Is not a Number");if(r<0)throw TypeError("length: Is negative")}}class eu{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let e=this.getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=n.Convert.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-${t.substring(20)}`}}class ec{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){let t=this.get(e.toLowerCase());return t&&delete this.items[e],t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){let e=[];for(let t in this.items){let r=this.items[t];e.push(r.name)}return e.sort()}}class eh{constructor(){this.providers=new ec}static isHashedAlgorithm(e){return!!e&&"object"==typeof e&&"name"in e&&"hash"in e}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");let[t,r,...i]=e,o=this.prepareAlgorithm(t),s=n.BufferSourceConverter.toArrayBuffer(r),a=this.getProvider(o.name),l=await a.digest(o,s,...i);return l}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");let[t,r,n,...i]=e,o=this.prepareAlgorithm(t),s=this.getProvider(o.name),a=await s.generateKey({...o,name:s.name},r,n,...i);return a}async sign(...e){this.checkRequiredArguments(e,3,"sign");let[t,r,i,...o]=e;this.checkCryptoKey(r);let s=this.prepareAlgorithm(t),a=n.BufferSourceConverter.toArrayBuffer(i),l=this.getProvider(s.name),u=await l.sign({...s,name:l.name},r,a,...o);return u}async verify(...e){this.checkRequiredArguments(e,4,"verify");let[t,r,i,o,...s]=e;this.checkCryptoKey(r);let a=this.prepareAlgorithm(t),l=n.BufferSourceConverter.toArrayBuffer(o),u=n.BufferSourceConverter.toArrayBuffer(i),c=this.getProvider(a.name),h=await c.verify({...a,name:c.name},r,u,l,...s);return h}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");let[t,r,i,...o]=e;this.checkCryptoKey(r);let s=this.prepareAlgorithm(t),a=n.BufferSourceConverter.toArrayBuffer(i),l=this.getProvider(s.name),u=await l.encrypt({...s,name:l.name},r,a,{keyUsage:!0},...o);return u}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");let[t,r,i,...o]=e;this.checkCryptoKey(r);let s=this.prepareAlgorithm(t),a=n.BufferSourceConverter.toArrayBuffer(i),l=this.getProvider(s.name),u=await l.decrypt({...s,name:l.name},r,a,{keyUsage:!0},...o);return u}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");let[t,r,n,...i]=e;this.checkCryptoKey(r);let o=this.prepareAlgorithm(t),s=this.getProvider(o.name),a=await s.deriveBits({...o,name:s.name},r,n,{keyUsage:!0},...i);return a}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");let[t,r,n,i,o,...s]=e,a=this.prepareAlgorithm(n),l=this.getProvider(a.name);l.checkDerivedKeyParams(a);let u=this.prepareAlgorithm(t),c=this.getProvider(u.name);c.checkCryptoKey(r,"deriveKey");let h=await c.deriveBits({...u,name:c.name},r,n.length||512,{keyUsage:!1},...s);return this.importKey("raw",h,n,i,o,...s)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");let[t,r,...n]=e;this.checkCryptoKey(r);let i=this.getProvider(r.algorithm.name),o=await i.exportKey(t,r,...n);return o}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");let[t,r,i,o,s,...a]=e,l=this.prepareAlgorithm(i),u=this.getProvider(l.name);if(-1!==["pkcs8","spki","raw"].indexOf(t)){let e=n.BufferSourceConverter.toArrayBuffer(r);return u.importKey(t,e,{...l,name:u.name},o,s,...a)}if(!r.kty)throw TypeError("keyData: Is not JSON");return u.importKey(t,r,{...l,name:u.name},o,s,...a)}async wrapKey(e,t,r,i,...o){let s=await this.exportKey(e,t,...o);if("jwk"===e){let e=JSON.stringify(s);s=n.Convert.FromUtf8String(e)}let a=this.prepareAlgorithm(i),l=n.BufferSourceConverter.toArrayBuffer(s),u=this.getProvider(a.name);return u.encrypt({...a,name:u.name},r,l,{keyUsage:!1},...o)}async unwrapKey(e,t,r,i,o,s,a,...l){let u=this.prepareAlgorithm(i),c=n.BufferSourceConverter.toArrayBuffer(t),h=this.getProvider(u.name),f=await h.decrypt({...u,name:h.name},r,c,{keyUsage:!1},...l);if("jwk"===e)try{f=JSON.parse(n.Convert.ToUtf8String(f))}catch(t){let e=TypeError("wrappedKey: Is not a JSON");throw e.internal=t,e}return this.importKey(e,f,o,s,a,...l)}checkRequiredArguments(e,t,r){if(e.length<t)throw TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}prepareAlgorithm(e){if("string"==typeof e)return{name:e};if(eh.isHashedAlgorithm(e)){let t={...e};return t.hash=this.prepareAlgorithm(e.hash),t}return{...e}}getProvider(e){let t=this.providers.get(e);if(!t)throw new u("Unrecognized name");return t}checkCryptoKey(e){if(!(e instanceof v))throw TypeError("Key is not of type 'CryptoKey'")}}var ef=Object.freeze({__proto__:null,converters:C});let ed=["crv","e","k","kty","n","x","y"];Object.defineProperty(t,"BufferSourceConverter",{enumerable:!0,get:function(){return n.BufferSourceConverter}}),t.AesCbcProvider=class extends y{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.iv.byteLength)throw TypeError("iv: Must have length 16 bytes")}},t.AesCmacProvider=class extends y{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw new h("length: Must be more than 0")}},t.AesCtrProvider=class extends y{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"counter"),!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter)))throw TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.counter.byteLength)throw TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw new h("length: Must be more than 0")}},t.AesEcbProvider=class extends y{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}},t.AesGcmProvider=class extends y{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength<1)throw new h("iv: Must have length more than 0 and less than 2^64 - 1");switch("tagLength"in e||(e.tagLength=128),e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new h("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}},t.AesKwProvider=class extends y{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}},t.AesProvider=y,t.AlgorithmError=u,t.Crypto=eu,t.CryptoError=l,t.CryptoKey=v,t.DesProvider=class extends p{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength!==this.ivSize)throw TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not of type Number");if(e.length!==this.keySizeBits)throw new h(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}},t.EcCurves=ea,t.EcUtils=R,t.EcdhEsProvider=class extends w{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}},t.EcdhProvider=w,t.EcdsaProvider=class extends m{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}},t.EdDsaProvider=class extends m{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}},t.EllipticProvider=m,t.HkdfProvider=class extends p{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!n.BufferSourceConverter.isBufferSource(e.salt)||(this.checkRequiredProperty(e,"info"),!n.BufferSourceConverter.isBufferSource(e.info)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(e,t,r,n,i,...o){if(super.checkImportKey(e,t,r,n,i),n)throw SyntaxError("extractable: Must be 'false'")}},t.HmacProvider=class extends p{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),"length"in e){if("number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw RangeError("length: Number is out of range")}}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}},t.JwkUtils=class{static async thumbprint(e,t,r){let i=this.format(t,!0);return r.subtle.digest(e,n.Convert.FromBinary(JSON.stringify(i)))}static format(e,t=!1){let r=Object.entries(e);return t&&(r=r.filter(e=>ed.includes(e[0]))),Object.fromEntries(r=r.sort(([e],[t])=>e>t?1:e<t?-1:0))}},t.OperationError=h,t.Pbkdf2Provider=class extends p{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(e,"iterations"),"number"!=typeof e.iterations)throw TypeError("iterations: Is not a Number");if(e.iterations<1)throw TypeError("iterations: Is less than 1")}checkImportKey(e,t,r,n,i,...o){if(super.checkImportKey(e,t,r,n,i),n)throw SyntaxError("extractable: Must be 'false'")}},t.PemConverter=class{static toArrayBuffer(e){let t=e.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return n.Convert.FromBase64(t)}static toUint8Array(e){let t=this.toArrayBuffer(e);return new Uint8Array(t)}static fromBufferSource(e,t){let r;let i=n.Convert.ToBase64(e),o=0,s=[];for(;;)if((r=i.slice(o,o+=64)).length){if(s.push(r),r.length<64)break}else break;let a=t.toUpperCase();return`-----BEGIN ${a}-----
${s.join("\n")}
-----END ${a}-----`}static isPEM(e){return/-----BEGIN .+-----[A-Za-z0-9+\/\+\=\s\n]+-----END .+-----/i.test(e)}static getTagName(e){if(!this.isPEM(e))throw Error("Bad parameter. Incoming data is not right PEM");let t=/-----BEGIN (.+)-----/.exec(e);if(!t)throw Error("Cannot get tag from PEM");return t[1]}static hasTagName(e,t){let r=this.getTagName(e);return t.toLowerCase()===r.toLowerCase()}static isCertificate(e){return this.hasTagName(e,"certificate")}static isCertificateRequest(e){return this.hasTagName(e,"certificate request")}static isCRL(e){return this.hasTagName(e,"x509 crl")}static isPublicKey(e){return this.hasTagName(e,"public key")}},t.ProviderCrypto=p,t.ProviderStorage=ec,t.RequiredPropertyError=f,t.RsaOaepProvider=class extends g{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label)))throw TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}},t.RsaProvider=g,t.RsaPssProvider=class extends g{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"saltLength"),"number"!=typeof e.saltLength)throw TypeError("saltLength: Is not a Number");if(e.saltLength<0)throw RangeError("saltLength: Must be positive number")}},t.RsaSsaProvider=class extends g{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}},t.Shake128Provider=class extends el{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}},t.Shake256Provider=class extends el{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}},t.ShakeProvider=el,t.SubtleCrypto=eh,t.UnsupportedOperationError=c,t.asn1=es,t.isJWK=d,t.json=ef},13284:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});let n=r(64955),i=r(87561),o=r(49411);r(88849),r(22286),r(65628),r(84492),r(72254),r(47261),r(41041),r(87503);let{stat:s}=i.promises,a=(e,t,r="")=>new n._Blob([new u({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:r}),l=(e,t,r="")=>new n.File([new u({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],o.basename(t),{type:r,lastModified:e.mtimeMs});class u{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified,this.originalSize=void 0===e.originalSize?e.size:e.originalSize}slice(e,t){return new u({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:t-e,start:this.#t+e})}async *stream(){let{mtimeMs:e,size:t}=await s(this.#e);if(e>this.lastModified||this.originalSize!==t)throw new n.nodeDomexception("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*i.createReadStream(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}let c=globalThis.fetch||n.fetch,h=globalThis.Blob||n._Blob,f=globalThis.File||n.File,d=globalThis.FormData||n.FormData,p=globalThis.Headers||n.Headers,y=globalThis.Request||n.Request,g=globalThis.Response||n.Response,m=globalThis.AbortController||n.AbortController;t.AbortError=n.AbortError,t.FetchError=n.FetchError,t.isRedirect=n.isRedirect,t.AbortController=m,t.Blob=h,t.File=f,t.FormData=d,t.Headers=p,t.Request=y,t.Response=g,t.blobFrom=(e,t)=>s(e).then(r=>a(r,e,t)),t.blobFromSync=(e,t)=>a(i.statSync(e),e,t),t.default=c,t.fetch=c,t.fileFrom=(e,t)=>s(e).then(r=>l(r,e,t)),t.fileFromSync=(e,t)=>l(i.statSync(e),e,t)},64955:(e,t,r)=>{let n=r(88849),i=r(22286),o=r(65628),s=r(84492),a=r(72254),l=r(47261),u=r(41041),c=r(87503);r(87561),r(49411);var h,f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},d={exports:{}};if(!globalThis.ReadableStream)try{let e=r(97742),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,r(72477)),e.emitWarning=t}catch(r){throw e.emitWarning=t,r}}catch(e){Object.assign(globalThis,(h||(h=1,function(e){let t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function r(){}let n="undefined"!=typeof self?self:void 0!==f?f:void 0;function i(e){return"object"==typeof e&&null!==e||"function"==typeof e}let o=Promise,s=Promise.prototype.then,a=Promise.resolve.bind(o),l=Promise.reject.bind(o);function u(e){return new o(e)}function c(e,t,r){return s.call(e,t,r)}function h(e,t,n){c(c(e,t,n),void 0,r)}function d(e,t){h(e,void 0,t)}function p(e){c(e,void 0,r)}let y=(()=>{let e=n&&n.queueMicrotask;if("function"==typeof e)return e;let t=a(void 0);return e=>c(t,e)})();function g(e,t,r){if("function"!=typeof e)throw TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function m(e,t,r){try{var n;return n=g(e,t,r),a(n)}catch(e){return l(e)}}class b{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){let t=this._back,r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){let e=this._front,t=e,r=this._cursor,n=r+1,i=e._elements,o=i[r];return 16384===n&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),i[r]=void 0,o}forEach(e){let t=this._cursor,r=this._front,n=r._elements;for(;(t!==n.length||void 0!==r._next)&&(t!==n.length||(n=(r=r._next)._elements,t=0,0!==n.length));)e(n[t]),++t}peek(){let e=this._front,t=this._cursor;return e._elements[t]}}function v(e,t){var r;e._ownerReadableStream=t,t._reader=e,"readable"===t._state?_(e):"closed"===t._state?(_(e),E(e)):(r=t._storedError,_(e),k(e,r))}function w(e,t){let r=e._ownerReadableStream;return tz(r,t)}function S(e){var t,r;"readable"===e._ownerReadableStream._state?k(e,TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):(t=e,r=TypeError("Reader was released and can no longer be used to monitor the stream's closedness"),_(t),k(t,r)),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function A(e){return TypeError("Cannot "+e+" a stream using a released reader")}function _(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function k(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function E(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let B=t("[[AbortSteps]]"),C=t("[[ErrorSteps]]"),P=t("[[CancelSteps]]"),T=t("[[PullSteps]]"),x=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},O=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function N(e,t){if(void 0!==e&&!("object"==typeof e||"function"==typeof e))throw TypeError(`${t} is not an object.`)}function I(e,t){if("function"!=typeof e)throw TypeError(`${t} is not a function.`)}function R(e,t){if(!("object"==typeof e&&null!==e||"function"==typeof e))throw TypeError(`${t} is not an object.`)}function K(e,t,r){if(void 0===e)throw TypeError(`Parameter ${t} is required in '${r}'.`)}function U(e,t,r){if(void 0===e)throw TypeError(`${t} is required in '${r}'.`)}function L(e){return Number(e)}function j(e,t){var r,n;let i=Number.MAX_SAFE_INTEGER,o=Number(e);if(!x(o=0===(r=o)?0:r))throw TypeError(`${t} is not a finite number`);if((o=0===(n=O(o))?0:n)<0||o>i)throw TypeError(`${t} is outside the accepted range of 0 to ${i}, inclusive`);return x(o)&&0!==o?o:0}function M(e,t){if(!tq(e))throw TypeError(`${t} is not a ReadableStream.`)}function D(e){return new J(e)}function H(e,t){e._reader._readRequests.push(t)}function q(e,t,r){let n=e._reader,i=n._readRequests.shift();r?i._closeSteps():i._chunkSteps(t)}function $(e){return e._reader._readRequests.length}function z(e){let t=e._reader;return!!(void 0!==t&&V(t))}class J{constructor(e){if(K(e,1,"ReadableStreamDefaultReader"),M(e,"First parameter"),t$(e))throw TypeError("This stream has already been locked for exclusive reading by another reader");v(this,e),this._readRequests=new b}get closed(){return V(this)?this._closedPromise:l(W("closed"))}cancel(e){return V(this)?void 0===this._ownerReadableStream?l(A("cancel")):w(this,e):l(W("cancel"))}read(){let e,t;if(!V(this))return l(W("read"));if(void 0===this._ownerReadableStream)return l(A("read from"));let r=u((r,n)=>{e=r,t=n});return F(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!V(this))throw W("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");S(this)}}}function V(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_readRequests"))&&e instanceof J}function F(e,t){let r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[T](t)}function W(e){return TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(J.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(J.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});let G=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Y{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){let e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?c(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){let t=()=>this._returnSteps(e);return this._ongoingPromise?c(this._ongoingPromise,t,t):t()}_nextSteps(){let e,t;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let r=this._reader;if(void 0===r._ownerReadableStream)return l(A("iterate"));let n=u((r,n)=>{e=r,t=n});return F(r,{_chunkSteps:t=>{this._ongoingPromise=void 0,y(()=>e({value:t,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,S(r),e({value:void 0,done:!0})},_errorSteps:e=>{this._ongoingPromise=void 0,this._isFinished=!0,S(r),t(e)}}),n}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;let t=this._reader;if(void 0===t._ownerReadableStream)return l(A("finish iterating"));if(!this._preventCancel){let r=w(t,e);return S(t),c(r,()=>({value:e,done:!0}),void 0)}return S(t),a({value:e,done:!0})}}let X={next(){return Z(this)?this._asyncIteratorImpl.next():l(Q("next"))},return(e){return Z(this)?this._asyncIteratorImpl.return(e):l(Q("return"))}};function Z(e){if(!i(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Y}catch(e){return!1}}function Q(e){return TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==G&&Object.setPrototypeOf(X,G);let ee=Number.isNaN||function(e){return e!=e};function et(e){return e.slice()}function er(e,t,r,n,i){new Uint8Array(e).set(new Uint8Array(r,n,i),t)}function en(e,t,r){if(e.slice)return e.slice(t,r);let n=r-t,i=new ArrayBuffer(n);return er(i,0,e,t,n),i}function ei(e){let t=en(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function eo(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function es(e,t,r){if(!(!("number"!=typeof r||ee(r))&&!(r<0))||r===1/0)throw RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function ea(e){e._queue=new b,e._queueTotalSize=0}class el{constructor(){throw TypeError("Illegal constructor")}get view(){if(!eh(this))throw eI("view");return this._view}respond(e){if(!eh(this))throw eI("respond");if(K(e,1,"respond"),e=j(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");this._view.buffer,ex(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!eh(this))throw eI("respondWithNewView");if(K(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");e.buffer,eO(this._associatedReadableByteStreamController,e)}}Object.defineProperties(el.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(el.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class eu{constructor(){throw TypeError("Illegal constructor")}get byobRequest(){if(!ec(this))throw eR("byobRequest");return eP(this)}get desiredSize(){if(!ec(this))throw eR("desiredSize");return eT(this)}close(){if(!ec(this))throw eR("close");if(this._closeRequested)throw TypeError("The stream has already been closed; do not close it again!");let e=this._controlledReadableByteStream._state;if("readable"!==e)throw TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);eE(this)}enqueue(e){if(!ec(this))throw eR("enqueue");if(K(e,1,"enqueue"),!ArrayBuffer.isView(e))throw TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw TypeError("stream is closed or draining");let t=this._controlledReadableByteStream._state;if("readable"!==t)throw TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);eB(this,e)}error(e){if(!ec(this))throw eR("error");eC(this,e)}[P](e){ed(this),ea(this);let t=this._cancelAlgorithm(e);return ek(this),t}[T](e){let t=this._controlledReadableByteStream;if(this._queueTotalSize>0){let t=this._queue.shift();this._queueTotalSize-=t.byteLength,ev(this);let r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);e._chunkSteps(r);return}let r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){e._errorSteps(t);return}let n={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(n)}H(t,e),ef(this)}}function ec(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream"))&&e instanceof eu}function eh(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController"))&&e instanceof el}function ef(e){let t=function(e){let t=e._controlledReadableByteStream;if("readable"!==t._state||e._closeRequested||!e._started)return!1;if(z(t)&&$(t)>0||eL(t)&&eU(t)>0)return!0;let r=eT(e);return r>0}(e);if(!t)return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let r=e._pullAlgorithm();h(r,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ef(e))},t=>{eC(e,t)})}function ed(e){ew(e),e._pendingPullIntos=new b}function ep(e,t){let r=!1;"closed"===e._state&&(r=!0);let n=ey(t);"default"===t.readerType?q(e,n,r):function(e,t,r){let n=e._reader,i=n._readIntoRequests.shift();r?i._closeSteps(t):i._chunkSteps(t)}(e,n,r)}function ey(e){let t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function eg(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function em(e,t){let r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,i=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),o=t.bytesFilled+i,s=o-o%r,a=i,l=!1;s>n&&(a=s-t.bytesFilled,l=!0);let u=e._queue;for(;a>0;){let r=u.peek(),n=Math.min(a,r.byteLength),i=t.byteOffset+t.bytesFilled;er(t.buffer,i,r.buffer,r.byteOffset,n),r.byteLength===n?u.shift():(r.byteOffset+=n,r.byteLength-=n),e._queueTotalSize-=n,eb(e,n,t),a-=n}return l}function eb(e,t,r){r.bytesFilled+=t}function ev(e){0===e._queueTotalSize&&e._closeRequested?(ek(e),tJ(e._controlledReadableByteStream)):ef(e)}function ew(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function eS(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;let t=e._pendingPullIntos.peek();em(e,t)&&(e_(e),ep(e._controlledReadableByteStream,t))}}function eA(e,t){let r=e._pendingPullIntos.peek();ew(e);let n=e._controlledReadableByteStream._state;"closed"===n?function(e,t){let r=e._controlledReadableByteStream;if(eL(r))for(;eU(r)>0;){let t=e_(e);ep(r,t)}}(e):function(e,t,r){if(eb(e,t,r),r.bytesFilled<r.elementSize)return;e_(e);let n=r.bytesFilled%r.elementSize;if(n>0){let t=r.byteOffset+r.bytesFilled,i=en(r.buffer,t-n,t);eg(e,i,0,i.byteLength)}r.bytesFilled-=n,ep(e._controlledReadableByteStream,r),eS(e)}(e,t,r),ef(e)}function e_(e){let t=e._pendingPullIntos.shift();return t}function ek(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function eE(e){let t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek();if(t.bytesFilled>0){let t=TypeError("Insufficient bytes to fill elements in the given buffer");throw eC(e,t),t}}ek(e),tJ(t)}}function eB(e,t){let r=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==r._state)return;let n=t.buffer,i=t.byteOffset,o=t.byteLength;if(e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}if(ew(e),z(r)){if(0===$(r))eg(e,n,i,o);else{e._pendingPullIntos.length>0&&e_(e);let t=new Uint8Array(n,i,o);q(r,t,!1)}}else eL(r)?(eg(e,n,i,o),eS(e)):eg(e,n,i,o);ef(e)}function eC(e,t){let r=e._controlledReadableByteStream;"readable"===r._state&&(ed(e),ea(e),ek(e),tV(r,t))}function eP(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(el.prototype);n._associatedReadableByteStreamController=e,n._view=r,e._byobRequest=n}return e._byobRequest}function eT(e){let t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function ex(e,t){let r=e._pendingPullIntos.peek(),n=e._controlledReadableByteStream._state;if("closed"===n){if(0!==t)throw TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw RangeError("bytesWritten out of range")}r.buffer=r.buffer,eA(e,t)}function eO(e,t){let r=e._pendingPullIntos.peek(),n=e._controlledReadableByteStream._state;if("closed"===n){if(0!==t.byteLength)throw TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw RangeError("The region specified by view is larger than byobRequest");let i=t.byteLength;r.buffer=t.buffer,eA(e,i)}function eN(e,t,r,n,i,o,s){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,ea(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=o,t._pullAlgorithm=n,t._cancelAlgorithm=i,t._autoAllocateChunkSize=s,t._pendingPullIntos=new b,e._readableStreamController=t;let l=r();h(a(l),()=>{t._started=!0,ef(t)},e=>{eC(t,e)})}function eI(e){return TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function eR(e){return TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function eK(e,t){e._reader._readIntoRequests.push(t)}function eU(e){return e._reader._readIntoRequests.length}function eL(e){let t=e._reader;return!!(void 0!==t&&eM(t))}Object.defineProperties(eu.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(eu.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class ej{constructor(e){if(K(e,1,"ReadableStreamBYOBReader"),M(e,"First parameter"),t$(e))throw TypeError("This stream has already been locked for exclusive reading by another reader");if(!ec(e._readableStreamController))throw TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");v(this,e),this._readIntoRequests=new b}get closed(){return eM(this)?this._closedPromise:l(eH("closed"))}cancel(e){return eM(this)?void 0===this._ownerReadableStream?l(A("cancel")):w(this,e):l(eH("cancel"))}read(e){let t,r;if(!eM(this))return l(eH("read"));if(!ArrayBuffer.isView(e))return l(TypeError("view must be an array buffer view"));if(0===e.byteLength)return l(TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return l(TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return l(A("read from"));let n=u((e,n)=>{t=e,r=n});return eD(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>r(e)}),n}releaseLock(){if(!eM(this))throw eH("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");S(this)}}}function eM(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_readIntoRequests"))&&e instanceof ej}function eD(e,t,r){let n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?r._errorSteps(n._storedError):function(e,t,r){let n=e._controlledReadableByteStream,i=1;t.constructor!==DataView&&(i=t.constructor.BYTES_PER_ELEMENT);let o=t.constructor,s=t.buffer,a={buffer:s,bufferByteLength:s.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:i,viewConstructor:o,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(a),eK(n,r);return}if("closed"===n._state){let e=new o(a.buffer,a.byteOffset,0);r._closeSteps(e);return}if(e._queueTotalSize>0){if(em(e,a)){let t=ey(a);ev(e),r._chunkSteps(t);return}if(e._closeRequested){let t=TypeError("Insufficient bytes to fill elements in the given buffer");eC(e,t),r._errorSteps(t);return}}e._pendingPullIntos.push(a),eK(n,r),ef(e)}(n._readableStreamController,t,r)}function eH(e){return TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function eq(e,t){let{highWaterMark:r}=e;if(void 0===r)return t;if(ee(r)||r<0)throw RangeError("Invalid highWaterMark");return r}function e$(e){let{size:t}=e;return t||(()=>1)}function ez(e,t){N(e,t);let r=null==e?void 0:e.highWaterMark,n=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:L(r),size:void 0===n?void 0:(I(n,`${t} has member 'size' that`),e=>L(n(e)))}}function eJ(e,t){if(!eG(e))throw TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(ej.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ej.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});let eV="function"==typeof AbortController;class eF{constructor(e={},t={}){void 0===e?e=null:R(e,"First parameter");let r=ez(t,"Second parameter"),n=function(e,t){N(e,t);let r=null==e?void 0:e.abort,n=null==e?void 0:e.close,i=null==e?void 0:e.start,o=null==e?void 0:e.type,s=null==e?void 0:e.write;return{abort:void 0===r?void 0:(I(r,`${t} has member 'abort' that`),t=>m(r,e,[t])),close:void 0===n?void 0:(I(n,`${t} has member 'close' that`),()=>m(n,e,[])),start:void 0===i?void 0:(I(i,`${t} has member 'start' that`),t=>g(i,e,[t])),write:void 0===s?void 0:(I(s,`${t} has member 'write' that`),(t,r)=>m(s,e,[t,r])),type:o}}(e,"First parameter");eW(this);let i=n.type;if(void 0!==i)throw RangeError("Invalid type is specified");let o=e$(r),s=eq(r,1);(function(e,t,r,n){let i=Object.create(tr.prototype),o=()=>void 0,s=()=>a(void 0),l=()=>a(void 0),u=()=>a(void 0);void 0!==t.start&&(o=()=>t.start(i)),void 0!==t.write&&(s=e=>t.write(e,i)),void 0!==t.close&&(l=()=>t.close()),void 0!==t.abort&&(u=e=>t.abort(e)),ti(e,i,o,s,l,u,r,n)})(this,n,s,o)}get locked(){if(!eG(this))throw th("locked");return eY(this)}abort(e){return eG(this)?eY(this)?l(TypeError("Cannot abort a stream that already has a writer")):eX(this,e):l(th("abort"))}close(){return eG(this)?eY(this)?l(TypeError("Cannot close a stream that already has a writer")):e8(this)?l(TypeError("Cannot close an already-closing stream")):eZ(this):l(th("close"))}getWriter(){if(!eG(this))throw th("getWriter");return new e6(this)}}function eW(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new b,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function eG(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_writableStreamController"))&&e instanceof eF}function eY(e){return void 0!==e._writer}function eX(e,t){var r;if("closed"===e._state||"errored"===e._state)return a(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort();let n=e._state;if("closed"===n||"errored"===n)return a(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let i=!1;"erroring"===n&&(i=!0,t=void 0);let o=u((r,n)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:i}});return e._pendingAbortRequest._promise=o,i||e0(e,t),o}function eZ(e){var t;let r=e._state;if("closed"===r||"errored"===r)return l(TypeError(`The stream (in ${r} state) is not in the writable state and cannot be closed`));let n=u((t,r)=>{e._closeRequest={_resolve:t,_reject:r}}),i=e._writer;return void 0!==i&&e._backpressure&&"writable"===r&&tS(i),es(t=e._writableStreamController,tt,0),ta(t),n}function eQ(e,t){let r=e._state;if("writable"===r){e0(e,t);return}e1(e)}function e0(e,t){let r=e._writableStreamController;e._state="erroring",e._storedError=t;let n=e._writer;void 0!==n&&e9(n,t),!(void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest)&&r._started&&e1(e)}function e1(e){e._state="errored",e._writableStreamController[C]();let t=e._storedError;if(e._writeRequests.forEach(e=>{e._reject(t)}),e._writeRequests=new b,void 0===e._pendingAbortRequest){e2(e);return}let r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring){r._reject(t),e2(e);return}let n=e._writableStreamController[B](r._reason);h(n,()=>{r._resolve(),e2(e)},t=>{r._reject(t),e2(e)})}function e8(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function e2(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;void 0!==t&&tg(t,e._storedError)}function e3(e,t){let r=e._writer;void 0!==r&&t!==e._backpressure&&(t?tb(r):tS(r)),e._backpressure=t}Object.defineProperties(eF.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(eF.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class e6{constructor(e){if(K(e,1,"WritableStreamDefaultWriter"),eJ(e,"First parameter"),eY(e))throw TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;let t=e._state;if("writable"===t)!e8(e)&&e._backpressure?tb(this):(tb(this),tS(this)),ty(this);else if("erroring"===t)tv(this,e._storedError),ty(this);else if("closed"===t)tb(this),tS(this),ty(this),tm(this);else{let t=e._storedError;tv(this,t),ty(this),tg(this,t)}}get closed(){return e4(this)?this._closedPromise:l(td("closed"))}get desiredSize(){if(!e4(this))throw td("desiredSize");if(void 0===this._ownerWritableStream)throw tp("desiredSize");return function(e){let t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:ts(t._writableStreamController)}(this)}get ready(){return e4(this)?this._readyPromise:l(td("ready"))}abort(e){return e4(this)?void 0===this._ownerWritableStream?l(tp("abort")):function(e,t){let r=e._ownerWritableStream;return eX(r,t)}(this,e):l(td("abort"))}close(){if(!e4(this))return l(td("close"));let e=this._ownerWritableStream;return void 0===e?l(tp("close")):e8(e)?l(TypeError("Cannot close an already-closing stream")):e5(this)}releaseLock(){if(!e4(this))throw td("releaseLock");let e=this._ownerWritableStream;void 0!==e&&e7(this)}write(e){return e4(this)?void 0===this._ownerWritableStream?l(tp("write to")):te(this,e):l(td("write"))}}function e4(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream"))&&e instanceof e6}function e5(e){let t=e._ownerWritableStream;return eZ(t)}function e9(e,t){"pending"===e._readyPromiseState?tw(e,t):tv(e,t)}function e7(e){var t,r;let n=e._ownerWritableStream,i=TypeError("Writer was released and can no longer be used to monitor the stream's closedness");e9(e,i),"pending"===e._closedPromiseState?tg(e,i):(t=e,r=i,ty(t),tg(t,r)),n._writer=void 0,e._ownerWritableStream=void 0}function te(e,t){let r=e._ownerWritableStream,n=r._writableStreamController,i=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return tl(e,t),1}}(n,t);if(r!==e._ownerWritableStream)return l(tp("write to"));let o=r._state;if("errored"===o)return l(r._storedError);if(e8(r)||"closed"===o)return l(TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===o)return l(r._storedError);let s=function(e){let t=u((t,r)=>{e._writeRequests.push({_resolve:t,_reject:r})});return t}(r);return function(e,t,r){try{es(e,t,r)}catch(t){tl(e,t);return}let n=e._controlledWritableStream;if(!e8(n)&&"writable"===n._state){let t=tu(e);e3(n,t)}ta(e)}(n,t,i),s}Object.defineProperties(e6.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(e6.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});let tt={};class tr{constructor(){throw TypeError("Illegal constructor")}get abortReason(){if(!tn(this))throw tf("abortReason");return this._abortReason}get signal(){if(!tn(this))throw tf("signal");if(void 0===this._abortController)throw TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!tn(this))throw tf("error");let t=this._controlledWritableStream._state;"writable"===t&&tc(this,e)}[B](e){let t=this._abortAlgorithm(e);return to(this),t}[C](){ea(this)}}function tn(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream"))&&e instanceof tr}function ti(e,t,r,n,i,o,s,l){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,ea(t),t._abortReason=void 0,t._abortController=function(){if(eV)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=l,t._strategyHWM=s,t._writeAlgorithm=n,t._closeAlgorithm=i,t._abortAlgorithm=o;let u=tu(t);e3(e,u);let c=r(),f=a(c);h(f,()=>{t._started=!0,ta(t)},r=>{t._started=!0,eQ(e,r)})}function to(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ts(e){return e._strategyHWM-e._queueTotalSize}function ta(e){let t=e._controlledWritableStream;if(!e._started||void 0!==t._inFlightWriteRequest)return;let r=t._state;if("erroring"===r){e1(t);return}if(0===e._queue.length)return;let n=function(e){let t=e._queue.peek();return t.value}(e);n===tt?function(e){let t=e._controlledWritableStream;t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0,eo(e);let r=e._closeAlgorithm();to(e),h(r,()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;let t=e._state;"erroring"===t&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let r=e._writer;void 0!==r&&tm(r)}(t)},e=>{t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),eQ(t,e)})}(e):function(e,t){let r=e._controlledWritableStream;r._inFlightWriteRequest=r._writeRequests.shift();let n=e._writeAlgorithm(t);h(n,()=>{r._inFlightWriteRequest._resolve(void 0),r._inFlightWriteRequest=void 0;let t=r._state;if(eo(e),!e8(r)&&"writable"===t){let t=tu(e);e3(r,t)}ta(e)},t=>{"writable"===r._state&&to(e),r._inFlightWriteRequest._reject(t),r._inFlightWriteRequest=void 0,eQ(r,t)})}(e,n)}function tl(e,t){"writable"===e._controlledWritableStream._state&&tc(e,t)}function tu(e){let t=ts(e);return t<=0}function tc(e,t){let r=e._controlledWritableStream;to(e),e0(r,t)}function th(e){return TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function tf(e){return TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function td(e){return TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function tp(e){return TypeError("Cannot "+e+" a stream using a released writer")}function ty(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"})}function tg(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function tm(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function tb(e){e._readyPromise=u((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState="pending"}function tv(e,t){tb(e),tw(e,t)}function tw(e,t){void 0!==e._readyPromise_reject&&(p(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function tS(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(tr.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(tr.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});let tA="undefined"!=typeof DOMException?DOMException:void 0,t_=!function(e){if(!("function"==typeof e||"object"==typeof e))return!1;try{return new e,!0}catch(e){return!1}}(tA)?function(){let e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}():tA;function tk(e,t,n,i,o,s){let f=D(e),y=new e6(t);e._disturbed=!0;let g=!1,m=a(void 0);return u((b,v)=>{var w,A;let _;if(void 0!==s){if(_=()=>{let r=new t_("Aborted","AbortError"),n=[];i||n.push(()=>"writable"===t._state?eX(t,r):a(void 0)),o||n.push(()=>"readable"===e._state?tz(e,r):a(void 0)),B(()=>Promise.all(n.map(e=>e())),!0,r)},s.aborted){_();return}s.addEventListener("abort",_)}if(E(e,f._closedPromise,e=>{i?C(!0,e):B(()=>eX(t,e),!0,e)}),E(t,y._closedPromise,t=>{o?C(!0,t):B(()=>tz(e,t),!0,t)}),w=f._closedPromise,A=()=>{n?C():B(()=>(function(e){let t=e._ownerWritableStream,r=t._state;return e8(t)||"closed"===r?a(void 0):"errored"===r?l(t._storedError):e5(e)})(y))},"closed"===e._state?A():h(w,A),e8(t)||"closed"===t._state){let t=TypeError("the destination writable stream closed before all data could be piped to it");o?C(!0,t):B(()=>tz(e,t),!0,t)}function k(){let e=m;return c(m,()=>e!==m?k():void 0)}function E(e,t,r){"errored"===e._state?r(e._storedError):d(t,r)}function B(e,r,n){!g&&((g=!0,"writable"!==t._state||e8(t))?i():h(k(),i));function i(){h(e(),()=>P(r,n),e=>P(!0,e))}}function C(e,r){!g&&((g=!0,"writable"!==t._state||e8(t))?P(e,r):h(k(),()=>P(e,r)))}function P(e,t){e7(y),S(f),void 0!==s&&s.removeEventListener("abort",_),e?v(t):b(void 0)}p(u((e,t)=>{!function n(i){i?e():c(g?a(!0):c(y._readyPromise,()=>u((e,t)=>{F(f,{_chunkSteps:t=>{m=c(te(y,t),void 0,r),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})),n,t)}(!1)}))})}class tE{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!tB(this))throw tU("desiredSize");return tI(this)}close(){if(!tB(this))throw tU("close");if(!tR(this))throw TypeError("The stream is not in a state that permits close");tx(this)}enqueue(e){if(!tB(this))throw tU("enqueue");if(!tR(this))throw TypeError("The stream is not in a state that permits enqueue");return tO(this,e)}error(e){if(!tB(this))throw tU("error");tN(this,e)}[P](e){ea(this);let t=this._cancelAlgorithm(e);return tT(this),t}[T](e){let t=this._controlledReadableStream;if(this._queue.length>0){let r=eo(this);this._closeRequested&&0===this._queue.length?(tT(this),tJ(t)):tC(this),e._chunkSteps(r)}else H(t,e),tC(this)}}function tB(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream"))&&e instanceof tE}function tC(e){let t=tP(e);if(!t)return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let r=e._pullAlgorithm();h(r,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,tC(e))},t=>{tN(e,t)})}function tP(e){let t=e._controlledReadableStream;if(!tR(e)||!e._started)return!1;if(t$(t)&&$(t)>0)return!0;let r=tI(e);return r>0}function tT(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function tx(e){if(!tR(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(tT(e),tJ(t))}function tO(e,t){if(!tR(e))return;let r=e._controlledReadableStream;if(t$(r)&&$(r)>0)q(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw tN(e,t),t}try{es(e,t,r)}catch(t){throw tN(e,t),t}}tC(e)}function tN(e,t){let r=e._controlledReadableStream;"readable"===r._state&&(ea(e),tT(e),tV(r,t))}function tI(e){let t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function tR(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function tK(e,t,r,n,i,o,s){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,ea(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=s,t._strategyHWM=o,t._pullAlgorithm=n,t._cancelAlgorithm=i,e._readableStreamController=t;let l=r();h(a(l),()=>{t._started=!0,tC(t)},e=>{tN(t,e)})}function tU(e){return TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function tL(e,t){N(e,t);let r=null==e?void 0:e.preventAbort,n=null==e?void 0:e.preventCancel,i=null==e?void 0:e.preventClose,o=null==e?void 0:e.signal;return void 0!==o&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw TypeError(`${t} is not an AbortSignal.`)}(o,`${t} has member 'signal' that`),{preventAbort:!!r,preventCancel:!!n,preventClose:!!i,signal:o}}Object.defineProperties(tE.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(tE.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class tj{constructor(e={},t={}){void 0===e?e=null:R(e,"First parameter");let r=ez(t,"Second parameter"),n=function(e,t){N(e,t);let r=null==e?void 0:e.autoAllocateChunkSize,n=null==e?void 0:e.cancel,i=null==e?void 0:e.pull,o=null==e?void 0:e.start,s=null==e?void 0:e.type;return{autoAllocateChunkSize:void 0===r?void 0:j(r,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===n?void 0:(I(n,`${t} has member 'cancel' that`),t=>m(n,e,[t])),pull:void 0===i?void 0:(I(i,`${t} has member 'pull' that`),t=>m(i,e,[t])),start:void 0===o?void 0:(I(o,`${t} has member 'start' that`),t=>g(o,e,[t])),type:void 0===s?void 0:function(e,t){if("bytes"!=(e=`${e}`))throw TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}(s,`${t} has member 'type' that`)}}(e,"First parameter");if(tH(this),"bytes"===n.type){if(void 0!==r.size)throw RangeError("The strategy for a byte stream cannot have a size function");let e=eq(r,0);!function(e,t,r){let n=Object.create(eu.prototype),i=()=>void 0,o=()=>a(void 0),s=()=>a(void 0);void 0!==t.start&&(i=()=>t.start(n)),void 0!==t.pull&&(o=()=>t.pull(n)),void 0!==t.cancel&&(s=e=>t.cancel(e));let l=t.autoAllocateChunkSize;if(0===l)throw TypeError("autoAllocateChunkSize must be greater than 0");eN(e,n,i,o,s,r,l)}(this,n,e)}else{let e=e$(r),t=eq(r,1);!function(e,t,r,n){let i=Object.create(tE.prototype),o=()=>void 0,s=()=>a(void 0),l=()=>a(void 0);void 0!==t.start&&(o=()=>t.start(i)),void 0!==t.pull&&(s=()=>t.pull(i)),void 0!==t.cancel&&(l=e=>t.cancel(e)),tK(e,i,o,s,l,r,n)}(this,n,t,e)}}get locked(){if(!tq(this))throw tF("locked");return t$(this)}cancel(e){return tq(this)?t$(this)?l(TypeError("Cannot cancel a stream that already has a reader")):tz(this,e):l(tF("cancel"))}getReader(e){if(!tq(this))throw tF("getReader");let t=function(e,t){N(e,t);let r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:function(e,t){if("byob"!=(e=`${e}`))throw TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}(r,`${t} has member 'mode' that`)}}(e,"First parameter");return void 0===t.mode?D(this):new ej(this)}pipeThrough(e,t={}){if(!tq(this))throw tF("pipeThrough");K(e,1,"pipeThrough");let r=function(e,t){N(e,t);let r=null==e?void 0:e.readable;U(r,"readable","ReadableWritablePair"),M(r,`${t} has member 'readable' that`);let n=null==e?void 0:e.writable;return U(n,"writable","ReadableWritablePair"),eJ(n,`${t} has member 'writable' that`),{readable:r,writable:n}}(e,"First parameter"),n=tL(t,"Second parameter");if(t$(this))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(eY(r.writable))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let i=tk(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal);return p(i),r.readable}pipeTo(e,t={}){let r;if(!tq(this))return l(tF("pipeTo"));if(void 0===e)return l("Parameter 1 is required in 'pipeTo'.");if(!eG(e))return l(TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));try{r=tL(t,"Second parameter")}catch(e){return l(e)}return t$(this)?l(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):eY(e)?l(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):tk(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!tq(this))throw tF("tee");let e=ec(this._readableStreamController)?function(e){let t,r,n,i,o,s=D(e),l=!1,c=!1,h=!1,f=!1,p=!1,g=u(e=>{o=e});function m(e){d(e._closedPromise,t=>{e===s&&(eC(n._readableStreamController,t),eC(i._readableStreamController,t),f&&p||o(void 0))})}function b(){eM(s)&&(S(s),m(s=D(e))),F(s,{_chunkSteps:t=>{y(()=>{c=!1,h=!1;let r=t;if(!f&&!p)try{r=ei(t)}catch(t){eC(n._readableStreamController,t),eC(i._readableStreamController,t),o(tz(e,t));return}f||eB(n._readableStreamController,t),p||eB(i._readableStreamController,r),l=!1,c?w():h&&A()})},_closeSteps:()=>{l=!1,f||eE(n._readableStreamController),p||eE(i._readableStreamController),n._readableStreamController._pendingPullIntos.length>0&&ex(n._readableStreamController,0),i._readableStreamController._pendingPullIntos.length>0&&ex(i._readableStreamController,0),f&&p||o(void 0)},_errorSteps:()=>{l=!1}})}function v(t,r){V(s)&&(S(s),m(s=new ej(e)));let a=r?i:n,u=r?n:i;eD(s,t,{_chunkSteps:t=>{y(()=>{c=!1,h=!1;let n=r?p:f,i=r?f:p;if(i)n||eO(a._readableStreamController,t);else{let r;try{r=ei(t)}catch(t){eC(a._readableStreamController,t),eC(u._readableStreamController,t),o(tz(e,t));return}n||eO(a._readableStreamController,t),eB(u._readableStreamController,r)}l=!1,c?w():h&&A()})},_closeSteps:e=>{l=!1;let t=r?p:f,n=r?f:p;t||eE(a._readableStreamController),n||eE(u._readableStreamController),void 0!==e&&(t||eO(a._readableStreamController,e),!n&&u._readableStreamController._pendingPullIntos.length>0&&ex(u._readableStreamController,0)),t&&n||o(void 0)},_errorSteps:()=>{l=!1}})}function w(){if(l)return c=!0,a(void 0);l=!0;let e=eP(n._readableStreamController);return null===e?b():v(e._view,!1),a(void 0)}function A(){if(l)return h=!0,a(void 0);l=!0;let e=eP(i._readableStreamController);return null===e?b():v(e._view,!0),a(void 0)}function _(){}return n=tD(_,w,function(n){if(f=!0,t=n,p){let n=et([t,r]),i=tz(e,n);o(i)}return g}),i=tD(_,A,function(n){if(p=!0,r=n,f){let n=et([t,r]),i=tz(e,n);o(i)}return g}),m(s),[n,i]}(this):function(e,t){let r,n,i,o,s;let l=D(e),c=!1,h=!1,f=!1,p=!1,g=u(e=>{s=e});function m(){return c?h=!0:(c=!0,F(l,{_chunkSteps:e=>{y(()=>{h=!1,f||tO(i._readableStreamController,e),p||tO(o._readableStreamController,e),c=!1,h&&m()})},_closeSteps:()=>{c=!1,f||tx(i._readableStreamController),p||tx(o._readableStreamController),f&&p||s(void 0)},_errorSteps:()=>{c=!1}})),a(void 0)}function b(){}return i=tM(b,m,function(t){if(f=!0,r=t,p){let t=et([r,n]),i=tz(e,t);s(i)}return g}),o=tM(b,m,function(t){if(p=!0,n=t,f){let t=et([r,n]),i=tz(e,t);s(i)}return g}),d(l._closedPromise,e=>{tN(i._readableStreamController,e),tN(o._readableStreamController,e),f&&p||s(void 0)}),[i,o]}(this);return et(e)}values(e){if(!tq(this))throw tF("values");let t=function(e,t){N(e,t);let r=null==e?void 0:e.preventCancel;return{preventCancel:!!r}}(e,"First parameter");return function(e,t){let r=D(e),n=new Y(r,t),i=Object.create(X);return i._asyncIteratorImpl=n,i}(this,t.preventCancel)}}function tM(e,t,r,n=1,i=()=>1){let o=Object.create(tj.prototype);tH(o);let s=Object.create(tE.prototype);return tK(o,s,e,t,r,n,i),o}function tD(e,t,r){let n=Object.create(tj.prototype);tH(n);let i=Object.create(eu.prototype);return eN(n,i,e,t,r,0,void 0),n}function tH(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function tq(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_readableStreamController"))&&e instanceof tj}function t$(e){return void 0!==e._reader}function tz(e,t){if(e._disturbed=!0,"closed"===e._state)return a(void 0);if("errored"===e._state)return l(e._storedError);tJ(e);let n=e._reader;void 0!==n&&eM(n)&&(n._readIntoRequests.forEach(e=>{e._closeSteps(void 0)}),n._readIntoRequests=new b);let i=e._readableStreamController[P](t);return c(i,r,void 0)}function tJ(e){e._state="closed";let t=e._reader;void 0!==t&&(E(t),V(t)&&(t._readRequests.forEach(e=>{e._closeSteps()}),t._readRequests=new b))}function tV(e,t){e._state="errored",e._storedError=t;let r=e._reader;void 0!==r&&(k(r,t),V(r)?(r._readRequests.forEach(e=>{e._errorSteps(t)}),r._readRequests=new b):(r._readIntoRequests.forEach(e=>{e._errorSteps(t)}),r._readIntoRequests=new b))}function tF(e){return TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function tW(e,t){N(e,t);let r=null==e?void 0:e.highWaterMark;return U(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:L(r)}}Object.defineProperties(tj.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(tj.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(tj.prototype,t.asyncIterator,{value:tj.prototype.values,writable:!0,configurable:!0});let tG=e=>e.byteLength;try{Object.defineProperty(tG,"name",{value:"size",configurable:!0})}catch(e){}class tY{constructor(e){K(e,1,"ByteLengthQueuingStrategy"),e=tW(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!tZ(this))throw tX("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!tZ(this))throw tX("size");return tG}}function tX(e){return TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function tZ(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark"))&&e instanceof tY}Object.defineProperties(tY.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(tY.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});let tQ=()=>1;try{Object.defineProperty(tQ,"name",{value:"size",configurable:!0})}catch(e){}class t0{constructor(e){K(e,1,"CountQueuingStrategy"),e=tW(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!t8(this))throw t1("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!t8(this))throw t1("size");return tQ}}function t1(e){return TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function t8(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark"))&&e instanceof t0}Object.defineProperties(t0.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(t0.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class t2{constructor(e={},t={},r={}){let n;void 0===e&&(e=null);let i=ez(t,"Second parameter"),o=ez(r,"Third parameter"),s=function(e,t){N(e,t);let r=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,i=null==e?void 0:e.start,o=null==e?void 0:e.transform,s=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:(I(r,`${t} has member 'flush' that`),t=>m(r,e,[t])),readableType:n,start:void 0===i?void 0:(I(i,`${t} has member 'start' that`),t=>g(i,e,[t])),transform:void 0===o?void 0:(I(o,`${t} has member 'transform' that`),(t,r)=>m(o,e,[t,r])),writableType:s}}(e,"First parameter");if(void 0!==s.readableType)throw RangeError("Invalid readableType specified");if(void 0!==s.writableType)throw RangeError("Invalid writableType specified");let h=eq(o,0),f=e$(o),d=eq(i,1),p=e$(i),y=u(e=>{n=e});(function(e,t,r,n,i,o){function s(){return t}e._writable=function(e,t,r,n,i=1,o=()=>1){let s=Object.create(eF.prototype);eW(s);let a=Object.create(tr.prototype);return ti(s,a,e,t,r,n,i,o),s}(s,function(t){return function(e,t){let r=e._transformStreamController;if(e._backpressure){let n=e._backpressureChangePromise;return c(n,()=>{let n=e._writable,i=n._state;if("erroring"===i)throw n._storedError;return rr(r,t)},void 0)}return rr(r,t)}(e,t)},function(){return function(e){let t=e._readable,r=e._transformStreamController,n=r._flushAlgorithm();return re(r),c(n,()=>{if("errored"===t._state)throw t._storedError;tx(t._readableStreamController)},r=>{throw t6(e,r),t._storedError})}(e)},function(t){return t6(e,t),a(void 0)},r,n),e._readable=tM(s,function(){return t5(e,!1),e._backpressureChangePromise},function(t){return t4(e,t),a(void 0)},i,o),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,t5(e,!0),e._transformStreamController=void 0})(this,y,d,p,h,f),function(e,t){var r,n;let i=Object.create(t9.prototype),o=e=>{try{return rt(i,e),a(void 0)}catch(e){return l(e)}},s=()=>a(void 0);void 0!==t.transform&&(o=e=>t.transform(e,i)),void 0!==t.flush&&(s=()=>t.flush(i)),r=o,n=s,i._controlledTransformStream=e,e._transformStreamController=i,i._transformAlgorithm=r,i._flushAlgorithm=n}(this,s),void 0!==s.start?n(s.start(this._transformStreamController)):n(void 0)}get readable(){if(!t3(this))throw ri("readable");return this._readable}get writable(){if(!t3(this))throw ri("writable");return this._writable}}function t3(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_transformStreamController"))&&e instanceof t2}function t6(e,t){tN(e._readable._readableStreamController,t),t4(e,t)}function t4(e,t){re(e._transformStreamController),tl(e._writable._writableStreamController,t),e._backpressure&&t5(e,!1)}function t5(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u(t=>{e._backpressureChangePromise_resolve=t}),e._backpressure=t}Object.defineProperties(t2.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(t2.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class t9{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!t7(this))throw rn("desiredSize");let e=this._controlledTransformStream._readable._readableStreamController;return tI(e)}enqueue(e){if(!t7(this))throw rn("enqueue");rt(this,e)}error(e){if(!t7(this))throw rn("error");t6(this._controlledTransformStream,e)}terminate(){if(!t7(this))throw rn("terminate");(function(e){let t=e._controlledTransformStream,r=t._readable._readableStreamController;tx(r);let n=TypeError("TransformStream terminated");t4(t,n)})(this)}}function t7(e){return!!(i(e)&&Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream"))&&e instanceof t9}function re(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function rt(e,t){let r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!tR(n))throw TypeError("Readable side is not in a state that permits enqueue");try{tO(n,t)}catch(e){throw t4(r,e),r._readable._storedError}let i=!tP(n);i!==r._backpressure&&t5(r,!0)}function rr(e,t){let r=e._transformAlgorithm(t);return c(r,void 0,t=>{throw t6(e._controlledTransformStream,t),t})}function rn(e){return TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function ri(e){return TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(t9.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(t9.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=tY,e.CountQueuingStrategy=t0,e.ReadableByteStreamController=eu,e.ReadableStream=tj,e.ReadableStreamBYOBReader=ej,e.ReadableStreamBYOBRequest=el,e.ReadableStreamDefaultController=tE,e.ReadableStreamDefaultReader=J,e.TransformStream=t2,e.TransformStreamDefaultController=t9,e.WritableStream=eF,e.WritableStreamDefaultController=tr,e.WritableStreamDefaultWriter=e6,Object.defineProperty(e,"__esModule",{value:!0})}(d.exports)),d.exports))}try{let{Blob:e}=r(14300);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0,r=this;return new ReadableStream({type:"bytes",async pull(e){let n=r.slice(t,Math.min(r.size,t+65536)),i=await n.arrayBuffer();t+=i.byteLength,e.enqueue(new Uint8Array(i)),t===r.size&&e.close()}})})}catch(e){}async function*p(e,t=!0){for(let r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r)){if(t){let e=r.byteOffset,t=r.byteOffset+r.byteLength;for(;e!==t;){let n=Math.min(t-e,65536),i=r.buffer.slice(e,e+n);e+=i.byteLength,yield new Uint8Array(i)}}else yield r}else{let e=0;for(;e!==r.size;){let t=r.slice(e,Math.min(r.size,e+65536)),n=await t.arrayBuffer();e+=n.byteLength,yield new Uint8Array(n)}}}let y=class e{#r;#n;#i;#o;constructor(t=[],r={}){if(this.#r=[],this.#n="",this.#i=0,this.#o="transparent","object"!=typeof t||null===t)throw TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===r&&(r={});let n=new TextEncoder;for(let r of t){let t;t=ArrayBuffer.isView(r)?new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)):r instanceof ArrayBuffer?new Uint8Array(r.slice(0)):r instanceof e?r:n.encode(`${r}`);let i=ArrayBuffer.isView(t)?t.byteLength:t.size;i&&(this.#i+=i,this.#r.push(t))}this.#o=`${void 0===r.endings?"transparent":r.endings}`;let i=void 0===r.type?"":String(r.type);this.#n=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#i}get type(){return this.#n}async text(){let e=new TextDecoder,t="";for await(let r of p(this.#r,!1))t+=e.decode(r,{stream:!0});return t+e.decode()}async arrayBuffer(){let e=new Uint8Array(this.size),t=0;for await(let r of p(this.#r,!1))e.set(r,t),t+=r.length;return e.buffer}stream(){let e=p(this.#r,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){let r=await e.next();r.done?t.close():t.enqueue(r.value)},async cancel(){await e.return()}})}slice(t=0,r=this.size,n=""){let{size:i}=this,o=t<0?Math.max(i+t,0):Math.min(t,i),s=r<0?Math.max(i+r,0):Math.min(r,i),a=Math.max(s-o,0),l=this.#r,u=[],c=0;for(let e of l){if(c>=a)break;let t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(o&&t<=o)o-=t,s-=t;else{let r;ArrayBuffer.isView(e)?c+=(r=e.subarray(o,Math.min(t,s))).byteLength:c+=(r=e.slice(o,Math.min(t,s))).size,s-=t,u.push(r),o=0}}let h=new e([],{type:String(n).toLowerCase()});return h.#i=a,h.#r=u,h}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(y.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});let g=y,m=class extends g{#s;#a;constructor(e,t,r={}){if(arguments.length<2)throw TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,r),this.#s=0,this.#a="",null===r&&(r={});let n=void 0===r.lastModified?Date.now():Number(r.lastModified);Number.isNaN(n)||(this.#s=n),this.#a=String(t)}get name(){return this.#a}get lastModified(){return this.#s}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof g&&/^(File)$/.test(e[Symbol.toStringTag])}};/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */var{toStringTag:b,iterator:v,hasInstance:w}=Symbol,S=Math.random,A="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),_=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[b])?[(r=void 0!==r?r+"":"File"==t[b]?t.name:"blob",e),t.name!==r||"blob"==t[b]?new m([t],r,t):t]:[e,t+""]),k=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),E=(e,t,r)=>{if(t.length<r)throw TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)};let B=class{#l;constructor(...e){if(this.#l=[],e.length)throw TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[b](){return"FormData"}[v](){return this.entries()}static[w](e){return e&&"object"==typeof e&&"FormData"===e[b]&&!A.some(t=>"function"!=typeof e[t])}append(...e){E("append",arguments,2),this.#l.push(_(...e))}delete(e){E("delete",arguments,1),e+="",this.#l=this.#l.filter(([t])=>t!==e)}get(e){E("get",arguments,1),e+="";for(var t=this.#l,r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1];return null}getAll(e,t){return E("getAll",arguments,1),t=[],e+="",this.#l.forEach(r=>r[0]===e&&t.push(r[1])),t}has(e){return E("has",arguments,1),e+="",this.#l.some(t=>t[0]===e)}forEach(e,t){for(var[r,n]of(E("forEach",arguments,1),this))e.call(t,n,r,this)}set(...e){E("set",arguments,2);var t=[],r=!0;e=_(...e),this.#l.forEach(n=>{n[0]===e[0]?r&&(r=!t.push(e)):t.push(n)}),r&&t.push(e),this.#l=t}*entries(){yield*this.#l}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};class C extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class P extends C{constructor(e,t,r){super(e,t),r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}let T=Symbol.toStringTag,x=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[T],O=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[T]),N=e=>"object"==typeof e&&("AbortSignal"===e[T]||"EventTarget"===e[T]),I=(e,t)=>{let r=new URL(t).hostname,n=new URL(e).hostname;return r===n||r.endsWith(`.${n}`)},R=(e,t)=>{let r=new URL(t).protocol,n=new URL(e).protocol;return r===n},K=l.promisify(s.pipeline),U=Symbol("Body internals");class L{constructor(e,{size:t=0}={}){let r=null;null===e?e=null:x(e)?e=a.Buffer.from(e.toString()):O(e)||a.Buffer.isBuffer(e)||(l.types.isAnyArrayBuffer(e)?e=a.Buffer.from(e):ArrayBuffer.isView(e)?e=a.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof s||(e instanceof B?r=(e=function(e,t=g){var r=`${S()}${S()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r
Content-Disposition: form-data; name="`;return e.forEach((e,t)=>"string"==typeof e?n.push(i+k(t)+`"\r
\r
${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r
`):n.push(i+k(t)+`"; filename="${k(e.name,1)}"\r
Content-Type: ${e.type||"application/octet-stream"}\r
\r
`,e,"\r\n")),n.push(`--${r}--`),new t(n,{type:"multipart/form-data; boundary="+r})}(e)).type.split("=")[1]:e=a.Buffer.from(String(e))));let n=e;a.Buffer.isBuffer(e)?n=s.Readable.from(e):O(e)&&(n=s.Readable.from(e.stream())),this[U]={body:e,stream:n,boundary:r,disturbed:!1,error:null},this.size=t,e instanceof s&&e.on("error",e=>{let t=e instanceof C?e:new P(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[U].error=t})}get body(){return this[U].stream}get bodyUsed(){return this[U].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:t,byteLength:r}=await j(this);return e.slice(t,t+r)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let e=new B,t=new URLSearchParams(await this.text());for(let[r,n]of t)e.append(r,n);return e}let{toFormData:t}=await r.e(7090).then(r.t.bind(r,72425,19));return t(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[U].body&&this[U].body.type||"",t=await this.arrayBuffer();return new g([t],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await j(this);return new TextDecoder().decode(e)}buffer(){return j(this)}}async function j(e){if(e[U].disturbed)throw TypeError(`body used already for: ${e.url}`);if(e[U].disturbed=!0,e[U].error)throw e[U].error;let{body:t}=e;if(null===t||!(t instanceof s))return a.Buffer.alloc(0);let r=[],n=0;try{for await(let i of t){if(e.size>0&&n+i.length>e.size){let r=new P(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(r),r}n+=i.length,r.push(i)}}catch(r){let t=r instanceof C?r:new P(`Invalid response body while trying to fetch ${e.url}: ${r.message}`,"system",r);throw t}if(!0===t.readableEnded||!0===t._readableState.ended)try{if(r.every(e=>"string"==typeof e))return a.Buffer.from(r.join(""));return a.Buffer.concat(r,n)}catch(t){throw new P(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}else throw new P(`Premature close of server response while trying to fetch ${e.url}`)}L.prototype.buffer=l.deprecate(L.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(L.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:l.deprecate(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});let M=(e,t)=>{let r,n;let{body:i}=e[U];if(e.bodyUsed)throw Error("cannot clone body after it is used");return i instanceof s&&"function"!=typeof i.getBoundary&&(r=new s.PassThrough({highWaterMark:t}),n=new s.PassThrough({highWaterMark:t}),i.pipe(r),i.pipe(n),e[U].stream=r,i=n),i},D=l.deprecate(e=>e.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),H=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":x(e)?"application/x-www-form-urlencoded;charset=UTF-8":O(e)?e.type||null:a.Buffer.isBuffer(e)||l.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof B?`multipart/form-data; boundary=${t[U].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${D(e)}`:e instanceof s?null:"text/plain;charset=UTF-8",q=e=>{let{body:t}=e[U];return null===t?0:O(t)?t.size:a.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},$=async(e,{body:t})=>{null===t?e.end():await K(t,e)},z="function"==typeof n.validateHeaderName?n.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let t=TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},J="function"==typeof n.validateHeaderValue?n.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let t=TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class V extends URLSearchParams{constructor(e){let t=[];if(e instanceof V){let r=e.raw();for(let[e,n]of Object.entries(r))t.push(...n.map(t=>[e,t]))}else if(null==e);else if("object"!=typeof e||l.types.isBoxedPrimitive(e))throw TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");else{let r=e[Symbol.iterator];if(null==r)t.push(...Object.entries(e));else{if("function"!=typeof r)throw TypeError("Header pairs must be iterable");t=[...e].map(e=>{if("object"!=typeof e||l.types.isBoxedPrimitive(e))throw TypeError("Each header pair must be an iterable object");return[...e]}).map(e=>{if(2!==e.length)throw TypeError("Each header pair must be a name/value tuple");return[...e]})}}return super(t=t.length>0?t.map(([e,t])=>(z(e),J(e,String(t)),[String(e).toLowerCase(),String(t)])):void 0),new Proxy(this,{get(e,t,r){switch(t){case"append":case"set":return(r,n)=>(z(r),J(r,String(n)),URLSearchParams.prototype[t].call(e,String(r).toLowerCase(),String(n)));case"delete":case"has":case"getAll":return r=>(z(r),URLSearchParams.prototype[t].call(e,String(r).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,r)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let t=this.getAll(e);if(0===t.length)return null;let r=t.join(", ");return/^content-encoding$/i.test(e)&&(r=r.toLowerCase()),r}forEach(e,t){for(let r of this.keys())Reflect.apply(e,t,[this.get(r),r,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>(e[t]=this.getAll(t),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{let r=this.getAll(t);return"host"===t?e[t]=r[0]:e[t]=r.length>1?r:r[0],e},{})}}Object.defineProperties(V.prototype,["get","entries","forEach","values"].reduce((e,t)=>(e[t]={enumerable:!0},e),{}));let F=new Set([301,302,303,307,308]),W=e=>F.has(e),G=Symbol("Response internals");class Y extends L{constructor(e=null,t={}){super(e,t);let r=null!=t.status?t.status:200,n=new V(t.headers);if(null!==e&&!n.has("Content-Type")){let t=H(e,this);t&&n.append("Content-Type",t)}this[G]={type:"default",url:t.url,status:r,statusText:t.statusText||"",headers:n,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[G].type}get url(){return this[G].url||""}get status(){return this[G].status}get ok(){return this[G].status>=200&&this[G].status<300}get redirected(){return this[G].counter>0}get statusText(){return this[G].statusText}get headers(){return this[G].headers}get highWaterMark(){return this[G].highWaterMark}clone(){return new Y(M(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!W(t))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Y(null,{headers:{location:new URL(e).toString()},status:t})}static error(){let e=new Y(null,{status:0,statusText:""});return e[G].type="error",e}static json(e,t={}){let r=JSON.stringify(e);if(void 0===r)throw TypeError("data is not JSON serializable");let n=new V(t&&t.headers);return n.has("content-type")||n.set("content-type","application/json"),new Y(r,{...t,headers:n})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(Y.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});let X=e=>{if(e.search)return e.search;let t=e.href.length-1,r=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-r.length]?"?":""};function Z(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol))?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e)}let Q=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function ee(e){return!!(/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||/^(blob|filesystem):$/.test(e.protocol))||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;let t=e.host.replace(/(^\[)|(]$)/g,""),r=c.isIP(t);return!!(4===r&&/^127\./.test(t)||6===r&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||!("localhost"===e.host||e.host.endsWith(".localhost"))&&"file:"===e.protocol}(e)}let et=Symbol("Request internals"),er=e=>"object"==typeof e&&"object"==typeof e[et],en=l.deprecate(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class ei extends L{constructor(e,t={}){let r;if(er(e)?r=new URL(e.url):(r=new URL(e),e={}),""!==r.username||""!==r.password)throw TypeError(`${r} is an url with embedded credentials.`);let n=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)&&(n=n.toUpperCase()),!er(t)&&"data"in t&&en(),(null!=t.body||er(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw TypeError("Request with GET/HEAD method cannot have body");let i=t.body?t.body:er(e)&&null!==e.body?M(e):null;super(i,{size:t.size||e.size||0});let o=new V(t.headers||e.headers||{});if(null!==i&&!o.has("Content-Type")){let e=H(i,this);e&&o.set("Content-Type",e)}let s=er(e)?e.signal:null;if("signal"in t&&(s=t.signal),null!=s&&!N(s))throw TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let a=null==t.referrer?e.referrer:t.referrer;if(""===a)a="no-referrer";else if(a){let e=new URL(a);a=/^about:(\/\/)?client$/.test(e)?"client":e}else a=void 0;this[et]={method:n,redirect:t.redirect||e.redirect||"follow",headers:o,parsedURL:r,signal:s,referrer:a},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[et].method}get url(){return u.format(this[et].parsedURL)}get headers(){return this[et].headers}get redirect(){return this[et].redirect}get signal(){return this[et].signal}get referrer(){return"no-referrer"===this[et].referrer?"":"client"===this[et].referrer?"about:client":this[et].referrer?this[et].referrer.toString():void 0}get referrerPolicy(){return this[et].referrerPolicy}set referrerPolicy(e){this[et].referrerPolicy=function(e){if(!Q.has(e))throw TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new ei(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(ei.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});let eo=e=>{let{parsedURL:t}=e[et],r=new V(e[et].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(n="0"),null!==e.body){let t=q(e);"number"!=typeof t||Number.isNaN(t)||(n=String(t))}n&&r.set("Content-Length",n),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[et].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;let n=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";let i=e.referrer,o=Z(i),s=Z(i,!0);o.toString().length>4096&&(o=s),t&&(o=t(o)),r&&(s=r(s));let a=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return o;case"strict-origin":if(ee(o)&&!ee(a))return"no-referrer";return s.toString();case"strict-origin-when-cross-origin":if(o.origin===a.origin)return o;if(ee(o)&&!ee(a))return"no-referrer";return s;case"same-origin":if(o.origin===a.origin)return o;return"no-referrer";case"origin-when-cross-origin":if(o.origin===a.origin)return o;return s;case"no-referrer-when-downgrade":if(ee(o)&&!ee(a))return"no-referrer";return o;default:throw TypeError(`Invalid referrerPolicy: ${n}`)}}(e):e[et].referrer="no-referrer",e[et].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=e;"function"==typeof i&&(i=i(t)),r.has("Connection")||i||r.set("Connection","close");let o=X(t),s={path:t.pathname+o,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:i};return{parsedURL:t,options:s}};class es extends C{constructor(e,t="aborted"){super(e,t)}}/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */if(!globalThis.DOMException)try{let{MessageChannel:e}=r(71267),t=new e().port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}var ea=globalThis.DOMException;let el=new Set(["data:","http:","https:"]);async function eu(e,t){return new Promise((r,l)=>{let u=new ei(e,t),{parsedURL:c,options:h}=eo(u);if(!el.has(c.protocol))throw TypeError(`node-fetch cannot load ${e}. URL scheme "${c.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===c.protocol){let e=function(e){if(!/^data:/i.test(e))throw TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');e=e.replace(/\r?\n/g,"");let t=e.indexOf(",");if(-1===t||t<=4)throw TypeError("malformed data: URI");let r=e.substring(5,t).split(";"),n="",i=!1,o=r[0]||"text/plain",s=o;for(let e=1;e<r.length;e++)"base64"===r[e]?i=!0:(s+=`;${r[e]}`,0===r[e].indexOf("charset=")&&(n=r[e].substring(8)));r[0]||n.length||(s+=";charset=US-ASCII",n="US-ASCII");let a=i?"base64":"ascii",l=unescape(e.substring(t+1)),u=Buffer.from(l,a);return u.type=o,u.typeFull=s,u.charset=n,u}(u.url),t=new Y(e,{headers:{"Content-Type":e.typeFull}});r(t);return}let f=("https:"===c.protocol?i:n).request,{signal:d}=u,p=null,y=()=>{let e=new es("The operation was aborted.");l(e),u.body&&u.body instanceof s.Readable&&u.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(d&&d.aborted){y();return}let g=()=>{y(),b()},m=f(c.toString(),h);d&&d.addEventListener("abort",g);let b=()=>{m.abort(),d&&d.removeEventListener("abort",g)};m.on("error",e=>{l(new P(`request to ${u.url} failed, reason: ${e.message}`,"system",e)),b()}),function(e,t){let r;let n=a.Buffer.from("0\r\n\r\n"),i=!1,o=!1;e.on("response",e=>{let{headers:t}=e;i="chunked"===t["transfer-encoding"]&&!t["content-length"]}),e.on("socket",s=>{let l=()=>{if(i&&!o){let e=Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",t(e)}},u=e=>{(o=0===a.Buffer.compare(e.slice(-5),n))||!r||(o=0===a.Buffer.compare(r.slice(-3),n.slice(0,3))&&0===a.Buffer.compare(e.slice(-2),n.slice(3))),r=e};s.prependListener("close",l),s.on("data",u),e.on("close",()=>{s.removeListener("close",l),s.removeListener("data",u)})})}(m,e=>{p&&p.body&&p.body.destroy(e)}),process.version<"v14"&&m.on("socket",e=>{let t;e.prependListener("end",()=>{t=e._eventsCount}),e.prependListener("close",r=>{if(p&&t<e._eventsCount&&!r){let e=Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",e)}})}),m.on("response",e=>{m.setTimeout(0);let n=function(e=[]){return new V(e.reduce((e,t,r,n)=>(r%2==0&&e.push(n.slice(r,r+2)),e),[]).filter(([e,t])=>{try{return z(e),J(e,String(t)),!0}catch{return!1}}))}(e.rawHeaders);if(W(e.statusCode)){let i=n.get("Location"),o=null;try{o=null===i?null:new URL(i,u.url)}catch{if("manual"!==u.redirect){l(new P(`uri requested responds with an invalid redirect URL: ${i}`,"invalid-redirect")),b();return}}switch(u.redirect){case"error":l(new P(`uri requested responds with a redirect, redirect mode is set to error: ${u.url}`,"no-redirect")),b();return;case"manual":break;case"follow":{if(null===o)break;if(u.counter>=u.follow){l(new P(`maximum redirect reached at: ${u.url}`,"max-redirect")),b();return}let i={headers:new V(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:M(u),signal:u.signal,size:u.size,referrer:u.referrer,referrerPolicy:u.referrerPolicy};if(!I(u.url,o)||!R(u.url,o))for(let e of["authorization","www-authenticate","cookie","cookie2"])i.headers.delete(e);if(303!==e.statusCode&&u.body&&t.body instanceof s.Readable){l(new P("Cannot follow redirect with body being a readable stream","unsupported-redirect")),b();return}(303===e.statusCode||(301===e.statusCode||302===e.statusCode)&&"POST"===u.method)&&(i.method="GET",i.body=void 0,i.headers.delete("content-length"));let a=function(e){let t=(e.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let e of t)e&&Q.has(e)&&(r=e);return r}(n);a&&(i.referrerPolicy=a),r(eu(new ei(o,i))),b();return}default:return l(TypeError(`Redirect option '${u.redirect}' is not a valid value of RequestRedirect`))}}d&&e.once("end",()=>{d.removeEventListener("abort",g)});let i=s.pipeline(e,new s.PassThrough,e=>{e&&l(e)});process.version<"v12.10"&&e.on("aborted",g);let a={url:u.url,status:e.statusCode,statusText:e.statusMessage,headers:n,size:u.size,counter:u.counter,highWaterMark:u.highWaterMark},c=n.get("Content-Encoding");if(!u.compress||"HEAD"===u.method||null===c||204===e.statusCode||304===e.statusCode){r(p=new Y(i,a));return}let h={flush:o.Z_SYNC_FLUSH,finishFlush:o.Z_SYNC_FLUSH};if("gzip"===c||"x-gzip"===c){i=s.pipeline(i,o.createGunzip(h),e=>{e&&l(e)}),r(p=new Y(i,a));return}if("deflate"===c||"x-deflate"===c){let t=s.pipeline(e,new s.PassThrough,e=>{e&&l(e)});t.once("data",e=>{i=(15&e[0])==8?s.pipeline(i,o.createInflate(),e=>{e&&l(e)}):s.pipeline(i,o.createInflateRaw(),e=>{e&&l(e)}),r(p=new Y(i,a))}),t.once("end",()=>{p||r(p=new Y(i,a))});return}if("br"===c){i=s.pipeline(i,o.createBrotliDecompress(),e=>{e&&l(e)}),r(p=new Y(i,a));return}r(p=new Y(i,a))}),$(m,u).catch(l)})}/**
 * @author Toru Nagashima <https://github.com/mysticatea>
 * @copyright 2015 Toru Nagashima. All rights reserved.
 * See LICENSE file in root directory for full license.
 */let ec=new WeakMap,eh=new WeakMap;function ef(e){let t=ec.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function ed(e){if(null!=e.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener);return}e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault())}function ep(e,t){ec.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(t);for(let e=0;e<r.length;++e){let t=r[e];t in this||Object.defineProperty(this,t,ey(t))}}function ey(e){return{get(){return ef(this).event[e]},set(t){ef(this).event[e]=t},configurable:!0,enumerable:!0}}function eg(e,t){ef(e).passiveListener=t}ep.prototype={get type(){return ef(this).event.type},get target(){return ef(this).eventTarget},get currentTarget(){return ef(this).currentTarget},composedPath(){let e=ef(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return ef(this).eventPhase},stopPropagation(){let e=ef(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){let e=ef(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return!!ef(this).event.bubbles},get cancelable(){return!!ef(this).event.cancelable},preventDefault(){ed(ef(this))},get defaultPrevented(){return ef(this).canceled},get composed(){return!!ef(this).event.composed},get timeStamp(){return ef(this).timeStamp},get srcElement(){return ef(this).eventTarget},get cancelBubble(){return ef(this).stopped},set cancelBubble(value){if(!value)return;let e=ef(this);e.stopped=!0,"boolean"==typeof e.event.cancelBubble&&(e.event.cancelBubble=!0)},get returnValue(){return!ef(this).canceled},set returnValue(value){value||ed(ef(this))},initEvent(){}},Object.defineProperty(ep.prototype,"constructor",{value:ep,configurable:!0,writable:!0});let em=new WeakMap;function eb(e){return null!==e&&"object"==typeof e}function ev(e){let t=em.get(e);if(null==t)throw TypeError("'this' is expected an EventTarget object, but got another value.");return t}function ew(e,t){Object.defineProperty(e,`on${t}`,{get(){let e=ev(this),r=e.get(t);for(;null!=r;){if(3===r.listenerType)return r.listener;r=r.next}return null},set(e){"function"==typeof e||eb(e)||(e=null);let r=ev(this),n=null,i=r.get(t);for(;null!=i;)3===i.listenerType?null!==n?n.next=i.next:null!==i.next?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(null!==e){let i={listener:e,listenerType:3,passive:!1,once:!1,next:null};null===n?r.set(t,i):n.next=i}},configurable:!0,enumerable:!0})}function eS(e){function t(){eA.call(this)}t.prototype=Object.create(eA.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)ew(t.prototype,e[r]);return t}function eA(){if(this instanceof eA){em.set(this,new Map);return}if(1==arguments.length&&Array.isArray(arguments[0]))return eS(arguments[0]);if(arguments.length>0){let e=Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return eS(e)}throw TypeError("Cannot call a class as a function")}eA.prototype={addEventListener(e,t,r){if(null==t)return;if("function"!=typeof t&&!eb(t))throw TypeError("'listener' should be a function or an object.");let n=ev(this),i=eb(r),o=i?!!r.capture:!!r,s=o?1:2,a={listener:t,listenerType:s,passive:i&&!!r.passive,once:i&&!!r.once,next:null},l=n.get(e);if(void 0===l){n.set(e,a);return}let u=null;for(;null!=l;){if(l.listener===t&&l.listenerType===s)return;u=l,l=l.next}u.next=a},removeEventListener(e,t,r){if(null==t)return;let n=ev(this),i=eb(r)?!!r.capture:!!r,o=i?1:2,s=null,a=n.get(e);for(;null!=a;){if(a.listener===t&&a.listenerType===o){null!==s?s.next=a.next:null!==a.next?n.set(e,a.next):n.delete(e);return}s=a,a=a.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw TypeError('"event.type" should be a string.');let t=ev(this),r=e.type,n=t.get(r);if(null==n)return!0;let i=function(e,t){let r=function e(t){if(null==t||t===Object.prototype)return ep;let r=eh.get(t);return null==r&&(r=function(e,t){let r=Object.keys(t);if(0===r.length)return e;function n(t,r){e.call(this,t,r)}n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let o=r[i];if(!(o in e.prototype)){let e=Object.getOwnPropertyDescriptor(t,o),r="function"==typeof e.value;Object.defineProperty(n.prototype,o,r?function(e){return{value(){let t=ef(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}(o):ey(o))}}return n}(e(Object.getPrototypeOf(t)),t),eh.set(t,r)),r}(Object.getPrototypeOf(t));return new r(e,t)}(this,e),o=null;for(;null!=n;){if(n.once?null!==o?o.next=n.next:null!==n.next?t.set(r,n.next):t.delete(r):o=n,eg(i,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,i)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(i);if(ef(i).immediateStopped)break;n=n.next}return eg(i,null),ef(i).eventPhase=0,ef(i).currentTarget=null,!i.defaultPrevented}},Object.defineProperty(eA.prototype,"constructor",{value:eA,configurable:!0,writable:!0});class e_ extends eA{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=ek.get(this);if("boolean"!=typeof e)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}}ew(e_.prototype,"abort");let ek=new WeakMap;Object.defineProperties(e_.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(e_.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class eE{constructor(){eB.set(this,function(){let e=Object.create(e_.prototype);return eA.call(e),ek.set(e,!1),e}())}get signal(){return eC(this)}abort(){var e;e=eC(this),!1===ek.get(e)&&(ek.set(e,!0),e.dispatchEvent({type:"abort"}))}}let eB=new WeakMap;function eC(e){let t=eB.get(e);if(null==t)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===e?"null":typeof e}`);return t}Object.defineProperties(eE.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(eE.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),t.AbortController=eE,t.AbortError=es,t.FetchError=P,t.File=m,t.FormData=B,t.Headers=V,t.Request=ei,t.Response=Y,t._Blob=g,t.fetch=eu,t.isRedirect=W,t.nodeDomexception=ea},60013:(e,t,r)=>{let n=r(13284);function i(e,t){return n.fetch(e,t)}for(let e in n)i[e]=n[e];e.exports=i},15803:(e,t,r)=>{r.r(t),r.d(t,{__addDisposableResource:()=>R,__assign:()=>o,__asyncDelegator:()=>E,__asyncGenerator:()=>k,__asyncValues:()=>B,__await:()=>_,__awaiter:()=>p,__classPrivateFieldGet:()=>O,__classPrivateFieldIn:()=>I,__classPrivateFieldSet:()=>N,__createBinding:()=>g,__decorate:()=>a,__disposeResources:()=>U,__esDecorate:()=>u,__exportStar:()=>m,__extends:()=>i,__generator:()=>y,__importDefault:()=>x,__importStar:()=>T,__makeTemplateObject:()=>C,__metadata:()=>d,__param:()=>l,__propKey:()=>h,__read:()=>v,__rest:()=>s,__runInitializers:()=>c,__setFunctionName:()=>f,__spread:()=>w,__spreadArray:()=>A,__spreadArrays:()=>S,__values:()=>b,default:()=>L});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function a(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function l(e,t){return function(r,n){t(r,n,e)}}function u(e,t,r,n,i,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var a,l=n.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?n.static?e:e.prototype:null,h=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),f=!1,d=r.length-1;d>=0;d--){var p={};for(var y in n)p[y]="access"===y?{}:n[y];for(var y in n.access)p.access[y]=n.access[y];p.addInitializer=function(e){if(f)throw TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var g=(0,r[d])("accessor"===l?{get:h.get,set:h.set}:h[u],p);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(a=s(g.get))&&(h.get=a),(a=s(g.set))&&(h.set=a),(a=s(g.init))&&i.unshift(a)}else(a=s(g))&&("field"===l?i.unshift(a):h[u]=a)}c&&Object.defineProperty(c,n.name,h),f=!0}function c(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function h(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((n=n.apply(e,t||[])).next())})}function y(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var g=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function m(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||g(t,e,r)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function S(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function A(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function k(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{var r;(r=i[e](t)).value instanceof _?Promise.resolve(r.value.v).then(l,u):c(o[0][2],r)}catch(e){c(o[0][3],e)}}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function E(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:_(e[n](t)),done:!1}:i?i(t):t}:i}}function B(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=b(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,i,(t=e[r](t)).done,t.value)})}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var P=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&g(t,e,r);return P(t,e),t}function x(e){return e&&e.__esModule?e:{default:e}}function O(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function N(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function I(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function R(e,t,r){if(null!=t){var n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!=typeof n)throw TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var K="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function U(e){function t(t){e.error=e.hasError?new K(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function r(){for(;e.stack.length;){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,function(e){return t(e),r()})}catch(e){t(e)}}if(e.hasError)throw e.error}()}let L={__extends:i,__assign:o,__rest:s,__decorate:a,__param:l,__metadata:d,__awaiter:p,__generator:y,__createBinding:g,__exportStar:m,__values:b,__read:v,__spread:w,__spreadArrays:S,__spreadArray:A,__await:_,__asyncGenerator:k,__asyncDelegator:E,__asyncValues:B,__makeTemplateObject:C,__importStar:T,__importDefault:x,__classPrivateFieldGet:O,__classPrivateFieldSet:N,__classPrivateFieldIn:I,__addDisposableResource:R,__disposeResources:U}}};