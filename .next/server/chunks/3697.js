exports.id=3697,exports.ids=[3697],exports.modules={13697:(e,a,d)=>{let t={"78e111e9dc41efac987bd5e8ac51b19043c9068a":()=>Promise.resolve().then(d.bind(d,87285)).then(e=>e.createThread),"38d2d7a0a35de985e321f749280c69191b8c2814":()=>Promise.resolve().then(d.bind(d,87285)).then(e=>e.fetchPosts),"39784508112122b2d6fe16b8d277c4cb71a3d20d":()=>Promise.resolve().then(d.bind(d,87285)).then(e=>e.fetchThreadById),e5fb2a651b5b7a205c654d5be1a786f5e317b9d1:()=>Promise.resolve().then(d.bind(d,87285)).then(e=>e.addCommentToThread),ff1d10e4c4589040540250355c302d70862062e6:()=>Promise.resolve().then(d.bind(d,89822)).then(e=>e.updateUser),"1596b48302c0ee3dbe71040264d262724aaf5922":()=>Promise.resolve().then(d.bind(d,89822)).then(e=>e.fetchUser),"4136361b190c15107930ce3a82a69c155f3f5e21":()=>Promise.resolve().then(d.bind(d,89822)).then(e=>e.fetchUserPosts),a1a227a67ee82139c2a8df61f007c4e13a42bd7d:()=>Promise.resolve().then(d.bind(d,89822)).then(e=>e.fetchUsers),"8ec1f8a9f390f17362a26d8913fa4e2dfef86fce":()=>Promise.resolve().then(d.bind(d,89822)).then(e=>e.getActivity)};async function c(e,...a){let d=await t[e]();return d.apply(null,a)}e.exports={"78e111e9dc41efac987bd5e8ac51b19043c9068a":c.bind(null,"78e111e9dc41efac987bd5e8ac51b19043c9068a"),"38d2d7a0a35de985e321f749280c69191b8c2814":c.bind(null,"38d2d7a0a35de985e321f749280c69191b8c2814"),"39784508112122b2d6fe16b8d277c4cb71a3d20d":c.bind(null,"39784508112122b2d6fe16b8d277c4cb71a3d20d"),e5fb2a651b5b7a205c654d5be1a786f5e317b9d1:c.bind(null,"e5fb2a651b5b7a205c654d5be1a786f5e317b9d1"),ff1d10e4c4589040540250355c302d70862062e6:c.bind(null,"ff1d10e4c4589040540250355c302d70862062e6"),"1596b48302c0ee3dbe71040264d262724aaf5922":c.bind(null,"1596b48302c0ee3dbe71040264d262724aaf5922"),"4136361b190c15107930ce3a82a69c155f3f5e21":c.bind(null,"4136361b190c15107930ce3a82a69c155f3f5e21"),a1a227a67ee82139c2a8df61f007c4e13a42bd7d:c.bind(null,"a1a227a67ee82139c2a8df61f007c4e13a42bd7d"),"8ec1f8a9f390f17362a26d8913fa4e2dfef86fce":c.bind(null,"8ec1f8a9f390f17362a26d8913fa4e2dfef86fce")}},87285:(e,a,d)=>{"use strict";d.r(a),d.d(a,{addCommentToThread:()=>b,createThread:()=>i,fetchPosts:()=>l,fetchThreadById:()=>o});var t=d(10459),c=d(50561),n=d(9148),r=d(98024),f=d(78291);async function i({text:e,author:a,communityId:d,path:t}){try{(0,f.P)();let d=await n.Z.create({text:e,author:a,community:null});await r.Z.findByIdAndUpdate(a,{$push:{threads:d._id}}),(0,c.revalidatePath)(t)}catch(e){throw Error(`Error creating thread: ${e.message}`)}}async function l(e=1,a=20){(0,f.P)();let d=(e-1)*a,t=n.Z.find({parentId:{$in:[null,void 0]}}).sort({createdAt:"desc"}).skip(d).limit(a).populate({path:"author",model:r.Z}).populate({path:"children",populate:{path:"author",model:r.Z,select:"_id name parentId image"}}),c=await n.Z.countDocuments({parentId:{$in:[null,void 0]}}),i=await t.exec(),l=c>d+i.length;return{posts:i,isNext:l}}async function o(e){(0,f.P)();try{let a=await n.Z.findById(e).populate({path:"author",model:r.Z,select:"_id id name image"}).populate({path:"children",populate:[{path:"author",model:r.Z,select:"_id id name parentId image"},{path:"children",model:n.Z,populate:{path:"author",model:r.Z,select:"_id id name patentId image"}}]}).exec();return a}catch(e){throw Error(`Error fetching thread: ${e.message}`)}}async function b(e,a,d,t){(0,f.P)();try{let t=await n.Z.findById(e);if(!t)throw Error("Thread not found");let c=new n.Z({text:a,author:d,parentId:e}),r=await c.save();t.children.push(r._id),await t.save()}catch(e){throw Error(`Error adding comment to thread: ${e.message}`)}}(0,d(51419).h)([i,l,o,b]),(0,t.U)("78e111e9dc41efac987bd5e8ac51b19043c9068a",null,i),(0,t.U)("38d2d7a0a35de985e321f749280c69191b8c2814",null,l),(0,t.U)("39784508112122b2d6fe16b8d277c4cb71a3d20d",null,o),(0,t.U)("e5fb2a651b5b7a205c654d5be1a786f5e317b9d1",null,b)}};